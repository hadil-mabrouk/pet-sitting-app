(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t,r;var s,a,n,i,l,o,c=e.i(43476),d=e.i(71645),u=e.i(18566);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function h(...e){return t=>{let r=!1,s=e.map(e=>{let s=m(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():m(e[t],null)}}}}function x(...e){return d.useCallback(h(...e),e)}e.i(47167);var p=d.forwardRef((e,t)=>{let{children:r,...s}=e,a=d.Children.toArray(r),n=a.find(b);if(n){let e=n.props.children,r=a.map(t=>t!==n?t:d.Children.count(e)>1?d.Children.only(null):d.isValidElement(e)?e.props.children:null);return(0,c.jsx)(f,{...s,ref:t,children:d.isValidElement(e)?d.cloneElement(e,void 0,r):null})}return(0,c.jsx)(f,{...s,ref:t,children:r})});p.displayName="Slot";var f=d.forwardRef((e,t)=>{let{children:r,...s}=e;if(d.isValidElement(r)){var a;let e,n,i=(a=r,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref);return d.cloneElement(r,{...function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{n(...e),a(...e)}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props),ref:t?h(t,i):i})}return d.Children.count(r)>1?d.Children.only(null):null});f.displayName="SlotClone";var g=({children:e})=>(0,c.jsx)(c.Fragment,{children:e});function b(e){return d.isValidElement(e)&&e.type===g}function v(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}(e))&&(s&&(s+=" "),s+=t);return s}let j=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,y=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),w=[],N=(e,t,r)=>{if(0==e.length-t)return r.classGroupId;let s=e[t],a=r.nextPart.get(s);if(a){let r=N(e,t+1,a);if(r)return r}let n=r.validators;if(null===n)return;let i=0===t?e.join("-"):e.slice(t).join("-"),l=n.length;for(let e=0;e<l;e++){let t=n[e];if(t.validator(i))return t.classGroupId}},k=(e,t)=>{let r=y();for(let s in e)S(e[s],r,s,t);return r},S=(e,t,r,s)=>{let a=e.length;for(let n=0;n<a;n++)C(e[n],t,r,s)},C=(e,t,r,s)=>{"string"==typeof e?M(e,t,r):"function"==typeof e?T(e,t,r,s):z(e,t,r,s)},M=(e,t,r)=>{(""===e?t:D(t,e)).classGroupId=r},T=(e,t,r,s)=>{P(e)?S(e(s),t,r,s):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:r,validator:e}))},z=(e,t,r,s)=>{let a=Object.entries(e),n=a.length;for(let e=0;e<n;e++){let[n,i]=a[e];S(i,D(t,n),r,s)}},D=(e,t)=>{let r=e,s=t.split("-"),a=s.length;for(let e=0;e<a;e++){let t=s[e],a=r.nextPart.get(t);a||(a=y(),r.nextPart.set(t,a)),r=a}return r},P=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,A=[],_=(e,t,r,s,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:a}),E=/\s+/,L=e=>{let t;if("string"==typeof e)return e;let r="";for(let s=0;s<e.length;s++)e[s]&&(t=L(e[s]))&&(r&&(r+=" "),r+=t);return r},R=[],I=e=>{let t=t=>t[e]||R;return t.isThemeGetter=!0,t},O=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,F=/^\((?:(\w[\w-]*):)?(.+)\)$/i,q=/^\d+\/\d+$/,$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,U=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,G=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,H=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,W=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,B=e=>q.test(e),Y=e=>!!e&&!Number.isNaN(Number(e)),V=e=>!!e&&Number.isInteger(Number(e)),X=e=>e.endsWith("%")&&Y(e.slice(0,-1)),K=e=>$.test(e),J=()=>!0,Q=e=>U.test(e)&&!G.test(e),Z=()=>!1,ee=e=>H.test(e),et=e=>W.test(e),er=e=>!ea(e)&&!ed(e),es=e=>eg(e,ey,Z),ea=e=>O.test(e),en=e=>eg(e,ew,Q),ei=e=>eg(e,eN,Y),el=e=>eg(e,ev,Z),eo=e=>eg(e,ej,et),ec=e=>eg(e,eS,ee),ed=e=>F.test(e),eu=e=>eb(e,ew),em=e=>eb(e,ek),eh=e=>eb(e,ev),ex=e=>eb(e,ey),ep=e=>eb(e,ej),ef=e=>eb(e,eS,!0),eg=(e,t,r)=>{let s=O.exec(e);return!!s&&(s[1]?t(s[1]):r(s[2]))},eb=(e,t,r=!1)=>{let s=F.exec(e);return!!s&&(s[1]?t(s[1]):r)},ev=e=>"position"===e||"percentage"===e,ej=e=>"image"===e||"url"===e,ey=e=>"length"===e||"size"===e||"bg-size"===e,ew=e=>"length"===e,eN=e=>"number"===e,ek=e=>"family-name"===e,eS=e=>"shadow"===e,eC=((e,...t)=>{let r,s,a,n,i=e=>{let t=s(e);if(t)return t;let n=((e,t)=>{let{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:n}=t,i=[],l=e.trim().split(E),o="";for(let e=l.length-1;e>=0;e-=1){let t=l[e],{isExternal:c,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:h}=r(t);if(c){o=t+(o.length>0?" "+o:o);continue}let x=!!h,p=s(x?m.substring(0,h):m);if(!p){if(!x||!(p=s(m))){o=t+(o.length>0?" "+o:o);continue}x=!1}let f=0===d.length?"":1===d.length?d[0]:n(d).join(":"),g=u?f+"!":f,b=g+p;if(i.indexOf(b)>-1)continue;i.push(b);let v=a(p,x);for(let e=0;e<v.length;++e){let t=v[e];i.push(g+t)}o=t+(o.length>0?" "+o:o)}return o})(e,r);return a(e,n),n};return n=l=>{var o;let c;return s=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null),a=(a,n)=>{r[a]=n,++t>e&&(t=0,s=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=s[e])?(a(e,t),t):void 0},set(e,t){e in r?r[e]=t:a(e,t)}}})((o=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,s=e=>{let t,r=[],s=0,a=0,n=0,i=e.length;for(let l=0;l<i;l++){let i=e[l];if(0===s&&0===a){if(":"===i){r.push(e.slice(n,l)),n=l+1;continue}if("/"===i){t=l;continue}}"["===i?s++:"]"===i?s--:"("===i?a++:")"===i&&a--}let l=0===r.length?e:e.slice(n),o=l,c=!1;return l.endsWith("!")?(o=l.slice(0,-1),c=!0):l.startsWith("!")&&(o=l.slice(1),c=!0),_(r,c,o,t&&t>n?t-n:void 0)};if(t){let e=t+":",r=s;s=t=>t.startsWith(e)?r(t.slice(e.length)):_(A,!1,t,void 0,!0)}if(r){let e=s;s=t=>r({className:t,parseClassName:e})}return s})(o),sortModifiers:(c=new Map,o.orderSensitiveModifiers.forEach((e,t)=>{c.set(e,1e6+t)}),e=>{let t=[],r=[];for(let s=0;s<e.length;s++){let a=e[s],n="["===a[0],i=c.has(a);n||i?(r.length>0&&(r.sort(),t.push(...r),r=[]),t.push(a)):r.push(a)}return r.length>0&&(r.sort(),t.push(...r)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e;return k(r,t)})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var r;let t,s,a;return -1===(r=e).slice(1,-1).indexOf(":")?void 0:(s=(t=r.slice(1,-1)).indexOf(":"),(a=t.slice(0,s))?"arbitrary.."+a:void 0)}let s=e.split("-"),a=+(""===s[0]&&s.length>1);return N(s,a,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=s[e],a=r[e];if(t){if(a){let e=Array(a.length+t.length);for(let t=0;t<a.length;t++)e[t]=a[t];for(let r=0;r<t.length;r++)e[a.length+r]=t[r];return e}return t}return a||w}return r[e]||w}}})(o)}).cache.get,a=r.cache.set,n=i,i(l)},(...e)=>n(((...e)=>{let t,r,s=0,a="";for(;s<e.length;)(t=e[s++])&&(r=L(t))&&(a&&(a+=" "),a+=r);return a})(...e))})(()=>{let e=I("color"),t=I("font"),r=I("text"),s=I("font-weight"),a=I("tracking"),n=I("leading"),i=I("breakpoint"),l=I("container"),o=I("spacing"),c=I("radius"),d=I("shadow"),u=I("inset-shadow"),m=I("text-shadow"),h=I("drop-shadow"),x=I("blur"),p=I("perspective"),f=I("aspect"),g=I("ease"),b=I("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],y=()=>[...j(),ed,ea],w=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],k=()=>[ed,ea,o],S=()=>[B,"full","auto",...k()],C=()=>[V,"none","subgrid",ed,ea],M=()=>["auto",{span:["full",V,ed,ea]},V,ed,ea],T=()=>[V,"auto",ed,ea],z=()=>["auto","min","max","fr",ed,ea],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],P=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...k()],_=()=>[B,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],E=()=>[e,ed,ea],L=()=>[...j(),eh,el,{position:[ed,ea]}],R=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",ex,es,{size:[ed,ea]}],F=()=>[X,eu,en],q=()=>["","none","full",c,ed,ea],$=()=>["",Y,eu,en],U=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>[Y,X,eh,el],W=()=>["","none",x,ed,ea],Q=()=>["none",Y,ed,ea],Z=()=>["none",Y,ed,ea],ee=()=>[Y,ed,ea],et=()=>[B,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[K],breakpoint:[K],color:[J],container:[K],"drop-shadow":[K],ease:["in","out","in-out"],font:[er],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[K],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[K],shadow:[K],spacing:["px",Y],text:[K],"text-shadow":[K],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",B,ea,ed,f]}],container:["container"],columns:[{columns:[Y,ea,ed,l]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[V,"auto",ed,ea]}],basis:[{basis:[B,"full","auto",l,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Y,B,"auto","initial","none",ea]}],grow:[{grow:["",Y,ed,ea]}],shrink:[{shrink:["",Y,ed,ea]}],order:[{order:[V,"first","last","none",ed,ea]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...P(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...P(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[l,"screen",..._()]}],"min-w":[{"min-w":[l,"screen","none",..._()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",r,eu,en]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ed,ei]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",X,ea]}],"font-family":[{font:[em,ea,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ed,ea]}],"line-clamp":[{"line-clamp":[Y,"none",ed,ei]}],leading:[{leading:[n,...k()]}],"list-image":[{"list-image":["none",ed,ea]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ed,ea]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:[Y,"from-font","auto",ed,en]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[Y,"auto",ed,ea]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ed,ea]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ed,ea]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:R()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},V,ed,ea],radial:["",ed,ea],conic:[V,ed,ea]},ep,eo]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...U(),"hidden","none"]}],"divide-style":[{divide:[...U(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...U(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Y,ed,ea]}],"outline-w":[{outline:["",Y,eu,en]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",d,ef,ec]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",u,ef,ec]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[Y,en]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",m,ef,ec]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[Y,ed,ea]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Y]}],"mask-image-linear-from-pos":[{"mask-linear-from":H()}],"mask-image-linear-to-pos":[{"mask-linear-to":H()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":H()}],"mask-image-t-to-pos":[{"mask-t-to":H()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":H()}],"mask-image-r-to-pos":[{"mask-r-to":H()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":H()}],"mask-image-b-to-pos":[{"mask-b-to":H()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":H()}],"mask-image-l-to-pos":[{"mask-l-to":H()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":H()}],"mask-image-x-to-pos":[{"mask-x-to":H()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":H()}],"mask-image-y-to-pos":[{"mask-y-to":H()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[ed,ea]}],"mask-image-radial-from-pos":[{"mask-radial-from":H()}],"mask-image-radial-to-pos":[{"mask-radial-to":H()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[Y]}],"mask-image-conic-from-pos":[{"mask-conic-from":H()}],"mask-image-conic-to-pos":[{"mask-conic-to":H()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:R()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ed,ea]}],filter:[{filter:["","none",ed,ea]}],blur:[{blur:W()}],brightness:[{brightness:[Y,ed,ea]}],contrast:[{contrast:[Y,ed,ea]}],"drop-shadow":[{"drop-shadow":["","none",h,ef,ec]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",Y,ed,ea]}],"hue-rotate":[{"hue-rotate":[Y,ed,ea]}],invert:[{invert:["",Y,ed,ea]}],saturate:[{saturate:[Y,ed,ea]}],sepia:[{sepia:["",Y,ed,ea]}],"backdrop-filter":[{"backdrop-filter":["","none",ed,ea]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[Y,ed,ea]}],"backdrop-contrast":[{"backdrop-contrast":[Y,ed,ea]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Y,ed,ea]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Y,ed,ea]}],"backdrop-invert":[{"backdrop-invert":["",Y,ed,ea]}],"backdrop-opacity":[{"backdrop-opacity":[Y,ed,ea]}],"backdrop-saturate":[{"backdrop-saturate":[Y,ed,ea]}],"backdrop-sepia":[{"backdrop-sepia":["",Y,ed,ea]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ed,ea]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Y,"initial",ed,ea]}],ease:[{ease:["linear","initial",g,ed,ea]}],delay:[{delay:[Y,ed,ea]}],animate:[{animate:["none",b,ed,ea]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,ed,ea]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:Z()}],"scale-x":[{"scale-x":Z()}],"scale-y":[{"scale-y":Z()}],"scale-z":[{"scale-z":Z()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[ed,ea,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:et()}],"translate-x":[{"translate-x":et()}],"translate-y":[{"translate-y":et()}],"translate-z":[{"translate-z":et()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ed,ea]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ed,ea]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[Y,eu,en,ei]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function eM(...e){return eC(v(e))}let eT=(t="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",r={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent/10",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent/10",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var s;if((null==r?void 0:r.variants)==null)return v(t,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:a,defaultVariants:n}=r,i=Object.keys(a).map(t=>{let r=null==e?void 0:e[t],s=null==n?void 0:n[t];if(null===r)return null;let i=j(r)||j(s);return a[t][i]}),l=e&&Object.entries(e).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return v(t,i,null==r||null==(s=r.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...l}[t]):({...n,...l})[t]===r})?[...e,r,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),ez=d.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},n)=>{let i=s?p:"button";return(0,c.jsx)(i,{className:eM(eT({variant:t,size:r,className:e})),ref:n,...a})});ez.displayName="Button";let eD=d.forwardRef(({className:e,type:t,...r},s)=>(0,c.jsx)("input",{type:t,className:eM("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));eD.displayName="Input",e.i(74080);var eP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=d.forwardRef((e,r)=>{let{asChild:s,...a}=e,n=s?p:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,c.jsx)(n,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),eA=d.forwardRef((e,t)=>(0,c.jsx)(eP.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));eA.displayName="Label";let e_=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(eA,{ref:r,className:eM("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));e_.displayName=eA.displayName;let eE=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var eL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let eR=(0,d.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:n,iconNode:i,...l},o)=>(0,d.createElement)("svg",{ref:o,...eL,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:eE("lucide",a),...l},[...i.map(([e,t])=>(0,d.createElement)(e,t)),...Array.isArray(n)?n:[n]])),eI=(e,t)=>{let r=(0,d.forwardRef)(({className:r,...s},a)=>(0,d.createElement)(eR,{ref:a,iconNode:t,className:eE(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...s}));return r.displayName=`${e}`,r},eO=eI("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),eF=eI("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),eq=eI("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),e$=eI("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),eU=eI("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eG=eI("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eH=eI("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),eW=eI("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),eB=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Email invalide":"Email requis",eY=e=>e?e.length<6?"6 caracteres minimum":"":"Mot de passe requis",eV=e=>e.trim()?"":"Nom requis";function eX({isOpen:e,onClose:t,initialMode:r,onLogin:s,onRegister:a,authError:n}){let[i,l]=(0,d.useState)("register"===r?"role-select":"login"),[o,u]=(0,d.useState)(null),[m,h]=(0,d.useState)(""),[x,p]=(0,d.useState)(""),[f,g]=(0,d.useState)(""),[b,v]=(0,d.useState)(!1),[j,y]=(0,d.useState)({});(0,d.useEffect)(()=>{e&&(l("register"===r?"role-select":"login"),u(null),h(""),p(""),g(""),y({}))},[e,r]);let w=(0,d.useMemo)(()=>!eB(m)&&!eY(x),[m,x]),N=(0,d.useMemo)(()=>!eV(f)&&!eB(m)&&!eY(x)&&!!o,[f,m,x,o]),k="http://127.0.0.1:5000/auth/google/login",S=o?`${k}?role=${o}`:k,C=async e=>{e.preventDefault();let r={email:eB(m),password:eY(x)};if(y(r),!r.email&&!r.password){v(!0);try{await s(m,x),t()}finally{v(!1)}}},M=async e=>{e.preventDefault();let r={name:eV(f),email:eB(m),password:eY(x)};if(o||(r.role="Choisis un rôle"),y(r),!r.name&&!r.email&&!r.password&&!r.role){v(!0);try{await a(f,m,x,o),t()}finally{v(!1)}}},T=e=>{u(e),l("register"),y(e=>({...e,role:""}))},z=({field:e})=>!j[e]&&("role"===e?o:"name"===e?f:"email"===e?m:x)?(0,c.jsx)(eH,{className:"w-4 h-4 text-green-600","aria-hidden":"true"}):null;return e?(0,c.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-foreground/50 backdrop-blur-sm",onClick:t}),(0,c.jsxs)("div",{className:"relative bg-card rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden border border-border",style:{backgroundImage:"url(/dog-chchiya.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,c.jsx)("button",{onClick:t,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors z-10","aria-label":"Fermer",children:(0,c.jsx)(eG,{className:"w-4 h-4"})}),(0,c.jsx)("div",{className:"pt-8 pb-4 px-6 text-center border-b border-border bg-white/75 backdrop-blur-sm",children:(0,c.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center",children:(0,c.jsx)(eO,{className:"w-6 h-6 text-primary-foreground"})}),(0,c.jsx)("span",{className:"text-xl font-bold text-foreground",children:"PetCare"})]})}),(0,c.jsxs)("div",{className:"p-6 bg-white/75 backdrop-blur-sm max-h-[80vh] overflow-y-auto",children:["login"===i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/70 backdrop-blur-sm border border-border shadow-sm",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Bienvenue"}),(0,c.jsx)("p",{className:"text-muted-foreground mt-1",children:"Connecte-toi pour continuer"})]}),(0,c.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{htmlFor:"email",children:"Email"}),(0,c.jsx)(z,{field:"email"})]}),(0,c.jsx)(eD,{id:"email",type:"email",placeholder:"FoulenElFoulani@gmail.com",value:m,onChange:e=>h(e.target.value),onBlur:()=>y(e=>({...e,email:eB(m)})),"aria-invalid":!!j.email,required:!0,className:"h-12"}),j.email&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.email]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{htmlFor:"password",children:"Mot de passe"}),(0,c.jsx)(z,{field:"password"})]}),(0,c.jsx)(eD,{id:"password",type:"password",placeholder:"********",value:x,onChange:e=>p(e.target.value),onBlur:()=>y(e=>({...e,password:eY(x)})),"aria-invalid":!!j.password,required:!0,className:"h-12"}),j.password&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.password]})]}),n?(0,c.jsx)("p",{className:"text-sm text-destructive",children:n}):null,(0,c.jsxs)(ez,{type:"submit",className:"w-full h-12 text-base",disabled:b||!w,children:[b?(0,c.jsx)(eU,{className:"w-4 h-4 animate-spin mr-2"}):null,"Se connecter"]})]}),(0,c.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,c.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,c.jsx)("span",{className:"px-3 text-xs text-muted-foreground uppercase tracking-wide",children:"ou"}),(0,c.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,c.jsx)("a",{href:S,className:"block mt-4",children:(0,c.jsx)(ez,{type:"button",variant:"outline",className:"w-full h-12 text-base bg-white border-primary text-primary hover:bg-primary/10",children:"Continuer avec Google"})}),(0,c.jsx)("div",{className:"mt-6 text-center",children:(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Pas de compte ?"," ",(0,c.jsx)("button",{onClick:()=>l("role-select"),className:"text-primary hover:underline font-medium",children:"Créer un compte"})]})})]}),"role-select"===i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/90 backdrop-blur-md border border-border shadow-sm",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Choisis ton rôle"}),(0,c.jsx)("p",{className:"text-muted-foreground mt-1",children:"Propriétaire ou gardien"})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("button",{onClick:()=>T("owner"),className:"w-full p-4 rounded-xl border-2 border-border bg-white/75 backdrop-blur-sm hover:border-primary hover:bg-primary/5 transition-all text-left flex items-start gap-4 shadow-md",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shrink-0",children:(0,c.jsx)(eF,{className:"w-6 h-6 text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-foreground",children:"Propriétaire"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trouve un gardien de confiance"})]})]}),(0,c.jsxs)("button",{onClick:()=>T("sitter"),className:"w-full p-4 rounded-xl border-2 border-border bg-white/90 backdrop-blur-md hover:border-accent hover:bg-accent/5 transition-all text-left flex items-start gap-4 shadow-md",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-accent/10 rounded-xl flex items-center justify-center shrink-0",children:(0,c.jsx)(eq,{className:"w-6 h-6 text-accent"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-foreground",children:"Gardien"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gagne en gardant des animaux"})]})]})]}),(0,c.jsx)("div",{className:"mt-6 text-center",children:(0,c.jsx)("button",{onClick:()=>l("login"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Déjà un compte ? Connexion"})})]}),"register"===i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{onClick:()=>l("role-select"),className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,c.jsx)(e$,{size:16}),"Retour"]}),(0,c.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/90 backdrop-blur-md border border-border shadow-sm",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Créer un compte"}),(0,c.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Inscription en tant que ","owner"===o?"propriétaire":"gardien"]})]}),(0,c.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{htmlFor:"name",children:"Nom complet"}),(0,c.jsx)(z,{field:"name"})]}),(0,c.jsx)(eD,{id:"name",type:"text",placeholder:"Foulen El Foulani",value:f,onChange:e=>g(e.target.value),onBlur:()=>y(e=>({...e,name:eV(f)})),"aria-invalid":!!j.name,required:!0,className:"h-12"}),j.name&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.name]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{htmlFor:"reg-email",children:"Email"}),(0,c.jsx)(z,{field:"email"})]}),(0,c.jsx)(eD,{id:"reg-email",type:"email",placeholder:"FoulenElFoulani@gmail.com",value:m,onChange:e=>h(e.target.value),onBlur:()=>y(e=>({...e,email:eB(m)})),"aria-invalid":!!j.email,required:!0,className:"h-12"}),j.email&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.email]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{htmlFor:"reg-password",children:"Mot de passe"}),(0,c.jsx)(z,{field:"password"})]}),(0,c.jsx)(eD,{id:"reg-password",type:"password",placeholder:"********",value:x,onChange:e=>p(e.target.value),onBlur:()=>y(e=>({...e,password:eY(x)})),"aria-invalid":!!j.password,required:!0,className:"h-12"}),j.password&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.password]})]}),j.role&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),j.role]}),n?(0,c.jsx)("p",{className:"text-sm text-destructive",children:n}):null,(0,c.jsxs)(ez,{type:"submit",className:"w-full h-12 text-base",disabled:b||!N,children:[b?(0,c.jsx)(eU,{className:"w-4 h-4 animate-spin mr-2"}):null,"S'inscrire"]}),(0,c.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,c.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,c.jsx)("span",{className:"px-3 text-xs text-muted-foreground uppercase tracking-wide",children:"ou"}),(0,c.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,c.jsx)("a",{href:S,className:"block mt-4",children:(0,c.jsx)(ez,{type:"button",variant:"outline",className:"w-full h-12 text-base bg-white border-primary text-primary hover:bg-primary/10",children:"Continuer avec Google"})})]})]})]})]})]}):null}var eK=e.i(83219);let eJ=eI("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),eQ=eI("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),eZ=eI("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),e0=eI("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),e1=[{title:"Créer une demande",desc:"Choisissez le service, l'adresse et le budget."},{title:"Recevoir des offres",desc:"Les gardiens proches répondent, contre-offres incluses."},{title:"Accepter et réserver",desc:"Une réservation est créée automatiquement."},{title:"Suivi et avis",desc:"Mises à jour puis avis qui renforcent la confiance."}];function e2({onLogin:e,onRegister:t,authError:r}){let[s,a]=(0,d.useState)(!1),[n,i]=(0,d.useState)("login"),[l,o]=(0,d.useState)({distance:!0,available:!0}),u=()=>{i("register"),a(!0)};return(0,c.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,c.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/85 backdrop-blur-md border-b border-border",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary rounded-2xl flex items-center justify-center shadow-md",children:(0,c.jsx)(eO,{className:"w-6 h-6 text-primary-foreground"})}),(0,c.jsxs)("div",{className:"leading-tight",children:[(0,c.jsx)("div",{className:"text-lg font-semibold",children:"PetCare"}),(0,c.jsx)("div",{className:"text-xs text-muted-foreground",children:"Taking care of your pet"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(ez,{variant:"ghost",className:"hidden sm:inline-flex",onClick:()=>{i("login"),a(!0)},children:"Connexion"}),(0,c.jsx)(ez,{onClick:u,children:"Créer un compte"})]})]})})}),(0,c.jsx)("section",{className:"pt-28 pb-14 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-10 items-center",children:[(0,c.jsxs)("div",{className:"space-y-4 text-center lg:text-left",children:[(0,c.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white shadow-sm text-sm text-primary",children:[(0,c.jsx)(eJ,{className:"w-4 h-4"}),"Grand Tunis"]}),(0,c.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold leading-tight",children:"Trouvez le gardien parfait pour votre compagnon"}),(0,c.jsx)("p",{className:"text-lg text-muted-foreground max-w-xl mx-auto lg:mx-0",children:"Des gardiens vérifiés, passionnés et disponibles près de chez vous. Réservez en quelques clics, profitez l'esprit tranquille."}),(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start",children:[(0,c.jsxs)(ez,{size:"lg",className:"rounded-2xl bg-primary hover:bg-primary/90",onClick:u,children:["Trouver un pet-sitter ",(0,c.jsx)(eZ,{className:"w-5 h-5 ml-1"})]}),(0,c.jsx)(ez,{size:"lg",variant:"outline",className:"rounded-2xl border-primary text-primary bg-white",onClick:u,children:"Devenir pet-sitter"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-6 text-sm text-muted-foreground justify-center lg:justify-start",children:[(0,c.jsxs)("div",{className:"flex -space-x-2",children:[(0,c.jsx)("img",{src:"/happy-person-1.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"}),(0,c.jsx)("img",{src:"/happy-person-2.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"}),(0,c.jsx)("img",{src:"/happy-person-3.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"})]}),(0,c.jsx)("span",{children:"500+ propriétaires satisfaits"}),(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(e0,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),(0,c.jsx)("span",{className:"font-semibold",children:"4.9"})]})]})]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("div",{className:"aspect-square rounded-[32px] overflow-hidden bg-[#f5e6d3] shadow-xl border border-border",children:(0,c.jsx)("img",{src:"/dog-fez.png",alt:"",className:"w-full h-full object-contain"})}),(0,c.jsx)("div",{className:"absolute -bottom-5 left-5 glass rounded-2xl p-4 border border-border",children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center",children:(0,c.jsx)(eQ,{className:"w-6 h-6 text-accent"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:"Sitters vérifiés"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Local & vérifié"})]})]})})]})]})}),(0,c.jsx)("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-secondary",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,c.jsxs)("div",{className:"text-center mb-10",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold",children:"Nos Services"}),(0,c.jsx)("p",{className:"text-lg text-muted-foreground",children:"Des solutions adaptées à tous vos besoins"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,c.jsx)(e4,{variant:"garde",title:"Garde à domicile",description:"Sitter chez vous pour prendre soin de votre compagnon dans son environnement familier.",features:["✓ Visite quotidienne","✓ Photos et updates","✓ Soins personnalisés"],priceLabel:"25 TND",priceUnit:"/jour",badge:"Populaire"}),(0,c.jsx)(e4,{variant:"promenade",title:"Promenade",description:"Balade quotidienne pour l'exercice et le bien-être.",features:["✓ 30-60 minutes","✓ Parcours sécurisés","✓ Socialisation"],priceLabel:"15 TND",priceUnit:"/balade"}),(0,c.jsx)(e4,{variant:"urgence",title:"Urgence",description:"Assistance rapide pour les situations imprévues.",features:["✓ Réponse immédiate","✓ Service prioritaire","✓ Gardiens disponibles"],priceLabel:"40 TND",priceUnit:"/intervention",badge:"24/7",pulse:!0}),(0,c.jsx)(e4,{variant:"taxi",title:"Pet Taxi",description:"Transport sécurisé pour vétérinaire ou toilettage.",features:["✓ Véhicule adapté","✓ Chauffeur expérimenté","✓ Porte-à-porte"],priceLabel:"20 TND",priceUnit:"/trajet"})]})]})}),(0,c.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-white/60",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-8 items-center",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold",children:"Gardiens proches de chez vous"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"Carte, sitters vérifiés, notes et distance. Filtrez par proximité dans le Grand Tunis."}),(0,c.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,c.jsx)("button",{onClick:()=>o(e=>({...e,distance:!e.distance})),className:`px-3 py-1 rounded-full transition ${l.distance?"bg-primary/15 text-primary":"bg-muted text-muted-foreground"}`,children:"Filtre distance"}),(0,c.jsx)("button",{onClick:()=>o(e=>({...e,available:!e.available})),className:`px-3 py-1 rounded-full transition ${l.available?"bg-accent/15 text-accent":"bg-muted text-muted-foreground"}`,children:"Sitters disponibles"})]}),(0,c.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Filtres actifs : ",l.distance?"distance":""," ",l.available?"• disponibilités":""]})]}),(0,c.jsxs)("div",{className:"h-80 rounded-3xl overflow-hidden shadow-lg border border-border relative",children:[(0,c.jsx)("img",{src:"/map-of-tunis-tunisia-streets.png",alt:"Tunis map",className:"w-full h-full object-cover"}),(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background/30 to-transparent pointer-events-none"}),(0,c.jsx)("button",{className:"absolute top-3 right-3 bg-white/90 rounded-full px-3 py-1 text-sm shadow",children:"Filtrer"})]})]})}),(0,c.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8 items-center",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold",children:"Profil animal"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"Carte d'identité complète pour que le gardien sache tout avant la mission."}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2",children:["Amical","Actif","Aime les enfants","Intérieur"].map(e=>(0,c.jsx)("span",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary text-sm shadow-sm",children:e},e))})]}),(0,c.jsxs)("div",{className:"bg-white rounded-3xl p-4 shadow-md border border-border",children:[(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("img",{src:"/sam.jpg",alt:"",className:"w-28 h-28 rounded-2xl object-cover"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-xl font-semibold",children:"Sam"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Husky • 3y 1m"}),(0,c.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,c.jsxs)("div",{className:"glass rounded-xl p-2",children:[(0,c.jsx)("p",{className:"font-semibold",children:"Poids"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"5.5 kg"})]}),(0,c.jsxs)("div",{className:"glass rounded-xl p-2",children:[(0,c.jsx)("p",{className:"font-semibold",children:"Hauteur"}),(0,c.jsx)("p",{className:"text-muted-foreground",children:"42 cm"})]})]})]})]}),(0,c.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dressé en laisse","Ok chats","Actif"].map(e=>(0,c.jsx)("span",{className:"px-3 py-1 rounded-full bg-accent/10 text-accent text-xs font-medium",children:e},e))})]})]})}),(0,c.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-background",children:(0,c.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold",children:"Comment ça marche ?"}),(0,c.jsx)("div",{className:"grid md:grid-cols-4 gap-4",children:e1.map((e,t)=>(0,c.jsxs)("div",{className:"rounded-2xl border border-border bg-card p-4 shadow-sm",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 text-primary font-bold flex items-center justify-center mb-3",children:t+1}),(0,c.jsx)("p",{className:"font-semibold",children:e.title}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.desc})]},e.title))})]})}),(0,c.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold",children:"Blog"}),(0,c.jsx)("a",{href:"/blog",className:"text-primary text-sm underline",children:"Voir tout"})]}),(0,c.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:eK.default.slice(0,3).map(e=>(0,c.jsxs)("a",{href:`/blog/${e.slug}`,className:"rounded-2xl border border-border bg-card p-4 shadow-sm hover:shadow-md transition space-y-2",children:[e.image&&(0,c.jsx)("div",{className:"h-40 w-full overflow-hidden rounded-xl bg-muted",children:(0,c.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.date).toLocaleDateString()}),(0,c.jsx)("p",{className:"text-lg font-semibold",children:e.title}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.excerpt})]},e.slug))})]})}),(0,c.jsx)(eX,{isOpen:s,onClose:()=>a(!1),initialMode:n,onLogin:e,onRegister:(e,r,s)=>t(e,r,s,"owner"),authError:r})]})}function e4({variant:e,title:t,description:r,features:s,priceLabel:a,priceUnit:n,badge:i,pulse:l}){return(0,c.jsxs)("div",{className:`relative rounded-2xl p-5 bg-gradient-to-br ${{garde:"from-[#f5e6d3]",promenade:"from-[#d4e7f7]",urgence:"from-[#ffd4d4]",taxi:"from-[#e8d9f5]"}[e]} to-white border-t-4 shadow-sm hover:-translate-y-2 hover:shadow-lg transition`,style:{borderColor:{garde:"#d4c5a9",promenade:"#a8cde8",urgence:"#ffb3b3",taxi:"#d1b8e8"}[e]},children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-[radial-gradient(circle_at_top_right,rgba(198,123,92,0.1)_0%,transparent_70%)] pointer-events-none"}),(0,c.jsx)("div",{className:"w-16 h-16 flex items-center justify-center bg-white/60 rounded-xl shadow-sm mb-3 text-primary font-bold text-lg",children:t.charAt(0)}),i&&(0,c.jsx)("span",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold ${l?"bg-destructive text-white animate-pulse uppercase":"bg-gradient-to-r from-[#ffd700] to-[#ffa500] text-[#2c2c2c]"}`,children:i}),(0,c.jsx)("h3",{className:"text-xl font-semibold",children:t}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:r}),(0,c.jsx)("div",{className:"flex flex-col gap-2 text-sm text-muted-foreground mb-4",children:s.map(e=>(0,c.jsx)("span",{children:e},e))}),(0,c.jsxs)("div",{className:"flex items-center justify-between border-t pt-3",children:[(0,c.jsxs)("div",{className:"text-primary font-bold text-lg",children:[a," ",(0,c.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:n})]}),(0,c.jsx)(ez,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",children:"Réserver →"})]})]})}"function"==typeof SuppressedError&&SuppressedError;var e3=(s=l?i:(l=1,i=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(a=s;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(n=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=s;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=s;0!=a--;){var s,a,n,i=n[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}))&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;let e5="__googleMapsScriptId";(a=o||(o={}))[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE";class e6{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:s,id:a=e5,language:n,libraries:i=[],mapIds:l,nonce:o,region:c,retries:d=3,url:u="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=s,this.id=a||e5,this.language=n,this.libraries=i,this.mapIds=l,this.nonce=o,this.region=c,this.retries=d,this.url=u,this.version=m,e6.instance){if(!e3(this.options,e6.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(e6.instance.options)}`);return e6.instance}e6.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?o.FAILURE:this.done?o.SUCCESS:this.loading?o.LOADING:o.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;let r,s,a,n,i,l,o,c,d,u,m;if(document.getElementById(this.id))return void this.callback();let h={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(h).forEach(e=>!h[e]&&delete h[e]),(null==(t=null==(e=null==window?void 0:window.google)?void 0:e.maps)?void 0:t.importLibrary)||(n="google",i="importLibrary",l=document,c=(o=(o=window)[n]||(o[n]={})).maps||(o.maps={}),d=new Set,u=new URLSearchParams,m=()=>r||(r=new Promise((e,t)=>{var i,o,m,x;return i=this,o=void 0,m=void 0,x=function*(){var i;for(a in yield s=l.createElement("script"),s.id=this.id,u.set("libraries",[...d]+""),h)u.set(a.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),h[a]);u.set("callback",n+".maps.__ib__"),s.src=this.url+"?"+u,c.__ib__=e,s.onerror=()=>r=t(Error("The Google Maps JavaScript API could not load.")),s.nonce=this.nonce||(null==(i=l.querySelector("script[nonce]"))?void 0:i.nonce)||"",l.head.append(s)},new(m||(m=Promise))(function(e,t){function r(e){try{a(x.next(e))}catch(e){t(e)}}function s(e){try{a(x.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof m?a:new m(function(e){e(a)})).then(r,s)}a((x=x.apply(i,o||[])).next())})})),c[i]?console.warn("The Google Maps JavaScript API only loads once. Ignoring:",h):c[i]=(e,...t)=>d.add(e)&&m().then(()=>c[i](e,...t)));let x=this.libraries.map(e=>this.importLibrary(e));x.length||x.push(this.importLibrary("core")),Promise.all(x).then(()=>this.callback(),e=>{let t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){let e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}function e8({apiKey:e="AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:t={lat:36.8065,lng:10.1815},markers:r=[],onMarkerClick:s,onSelectLocation:a,className:n,showRadius:i=!1,radiusKm:l=5}){let o=(0,d.useRef)(null),u=(0,d.useRef)(null),m=(0,d.useRef)([]),h=(0,d.useRef)(null),x=(0,d.useRef)(null),[p,f]=(0,d.useState)(null),g=(0,d.useMemo)(()=>new e6({apiKey:e,version:"weekly",libraries:["places"]}),[e]);return((0,d.useEffect)(()=>{let n=!0;if(!e){console.warn("Missing NEXT_PUBLIC_GOOGLE_MAPS_API_KEY"),f("Clé Google Maps absente");return}return g.importLibrary("maps").then(()=>{n&&o.current&&(f(null),u.current?u.current.setCenter(t):u.current=new google.maps.Map(o.current,{center:t,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),x.current&&(x.current.remove(),x.current=null),a&&u.current&&(x.current=u.current.addListener("click",e=>{e.latLng&&a({lat:e.latLng.lat(),lng:e.latLng.lng()})})),m.current.forEach(e=>e.setMap(null)),m.current=[],r.forEach(e=>{let t=new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:u.current,label:"request"===e.type?"R":"sitter"===e.type?"S":"U"});if(e.label){let r=new google.maps.InfoWindow({content:e.label});t.addListener("click",()=>{r.open({map:u.current,anchor:t}),s?.(e.id)})}else t.addListener("click",()=>s?.(e.id));m.current.push(t)}),i?(h.current&&h.current.setMap(null),h.current=new google.maps.Circle({map:u.current,center:t,radius:1e3*l,fillColor:"#c65a3a",fillOpacity:.05,strokeColor:"#c65a3a",strokeOpacity:.3,strokeWeight:1})):h.current&&(h.current.setMap(null),h.current=null))}).catch(e=>{console.error("Failed to load Google Maps",e),f("Impossible de charger la carte")}),()=>{n=!1,m.current.forEach(e=>e.setMap(null)),m.current=[],h.current&&(h.current.setMap(null),h.current=null),x.current&&(x.current.remove(),x.current=null)}},[e,t,r,s,a,i,l,g]),p)?(0,c.jsx)("div",{className:eM("relative w-full h-full bg-secondary/50 text-muted-foreground flex items-center justify-center text-sm",n),children:p}):(0,c.jsx)("div",{ref:o,className:eM("relative w-full h-full",n)})}let e9=eI("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);function e7({children:e,snapPoints:t=[.15,.5,.9],defaultSnap:r=0,className:s}){let[a,n]=(0,d.useState)(r),[i,l]=(0,d.useState)(!1),o=(0,d.useRef)(null),u=(0,d.useRef)(0),m=(0,d.useRef)(0),h=`${100*t[a]}%`,x=e=>{l(!0),u.current="touches"in e?e.touches[0].clientY:e.clientY,m.current=t[a]},p=()=>{l(!1)};return(0,c.jsxs)("div",{ref:o,className:eM("absolute bottom-0 left-0 right-0 bg-card rounded-t-3xl shadow-2xl transition-all duration-300 ease-out z-40",i&&"transition-none",s),style:{height:h},children:[(0,c.jsx)("div",{className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing",onTouchStart:x,onTouchEnd:p,onMouseDown:x,onMouseUp:p,onClick:()=>{n(e=>(e+1)%t.length)},children:(0,c.jsx)(e9,{className:"w-8 h-1.5 text-muted-foreground/50"})}),(0,c.jsx)("div",{className:"overflow-y-auto h-[calc(100%-28px)] px-4 pb-8",children:e})]})}let te=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("div",{ref:r,className:eM("rounded-xl border bg-card text-card-foreground shadow-sm",e),...t}));te.displayName="Card";let tt=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("div",{ref:r,className:eM("flex flex-col space-y-1.5 p-6",e),...t}));tt.displayName="CardHeader";let tr=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("h3",{ref:r,className:eM("text-2xl font-semibold leading-none tracking-tight",e),...t}));tr.displayName="CardTitle",d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("p",{ref:r,className:eM("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let ts=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("div",{ref:r,className:eM("p-6 pt-0",e),...t}));function ta(e,t=[]){let r=[],s=()=>{let t=r.map(e=>d.createContext(e));return function(r){let s=r?.[e]||t;return d.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return s.scopeName=e,[function(t,s){let a=d.createContext(s),n=r.length;r=[...r,s];let i=t=>{let{scope:r,children:s,...i}=t,l=r?.[e]?.[n]||a,o=d.useMemo(()=>i,Object.values(i));return(0,c.jsx)(l.Provider,{value:o,children:s})};return i.displayName=t+"Provider",[i,function(r,i){let l=i?.[e]?.[n]||a,o=d.useContext(l);if(o)return o;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(s,...t)]}function tn(e){let t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...e)=>t.current?.(...e),[])}ts.displayName="CardContent",d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("div",{ref:r,className:eM("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var ti=globalThis?.document?d.useLayoutEffect:()=>{},tl="Avatar",[to,tc]=ta(tl),[td,tu]=to(tl),tm=d.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[a,n]=d.useState("idle");return(0,c.jsx)(td,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:n,children:(0,c.jsx)(eP.span,{...s,ref:t})})});tm.displayName=tl;var th="AvatarImage",tx=d.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...n}=e,i=tu(th,r),l=function(e,t){let[r,s]=d.useState("idle");return ti(()=>{if(!e)return void s("error");let r=!0,a=new window.Image,n=e=>()=>{r&&s(e)};return s("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(s,n.referrerPolicy),o=tn(e=>{a(e),i.onImageLoadingStatusChange(e)});return ti(()=>{"idle"!==l&&o(l)},[l,o]),"loaded"===l?(0,c.jsx)(eP.img,{...n,ref:t,src:s}):null});tx.displayName=th;var tp="AvatarFallback",tf=d.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...a}=e,n=tu(tp,r),[i,l]=d.useState(void 0===s);return d.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(e)}},[s]),i&&"loaded"!==n.imageLoadingStatus?(0,c.jsx)(eP.span,{...a,ref:t}):null});tf.displayName=tp;let tg=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(tm,{ref:r,className:eM("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));tg.displayName=tm.displayName;let tb=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(tx,{ref:r,className:eM("aspect-square h-full w-full",e),...t}));tb.displayName=tx.displayName;let tv=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(tf,{ref:r,className:eM("flex h-full w-full items-center justify-center rounded-full bg-muted font-medium text-muted-foreground",e),...t}));function tj({status:e,size:t="md"}){let r={open:{label:"Ouvert",className:"bg-accent/10 text-accent"},accepted:{label:"Acceptée",className:"bg-primary/10 text-primary"},active:{label:"Active",className:"bg-chart-2/20 text-chart-2"},"in-progress":{label:"En cours",className:"bg-chart-2/20 text-chart-2"},scheduled:{label:"Planifiée",className:"bg-primary/10 text-primary"},completed:{label:"Terminée",className:"bg-accent/10 text-accent"},cancelled:{label:"Annulée",className:"bg-destructive/10 text-destructive"}},{label:s,className:a}=r[e]||r.open;return(0,c.jsxs)("span",{className:eM("inline-flex items-center rounded-full font-medium","sm"===t?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1",a),children:[(0,c.jsx)("span",{className:eM("w-1.5 h-1.5 rounded-full mr-1.5","open"===e?"bg-accent":"active"===e||"in-progress"===e?"bg-chart-2":"bg-current")}),s]})}tv.displayName=tf.displayName;let ty=eI("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),tw=eI("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]),tN=eI("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),tk=eI("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function tS({type:e,size:t=20,className:r}){let s={sitting:ty,walking:tw,taxi:tN,emergency:tk}[["sitting","walking","taxi","emergency"].includes(e)?e:"sitting"]||ty;return(0,c.jsx)(s,{size:t,className:eM(r)})}function tC(e,t="fr"){return({sitting:"Garde à domicile",walking:"Promenade",taxi:"Taxi animaux",emergency:"Urgence"})[e]??"Service"}var tM=e.i(7761);let tT=eI("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),tz=eI("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),tD=Symbol.for("constructDateFrom");function tP(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&tD in e?e[tD](t):e instanceof Date?new e.constructor(t):new Date(t)}let tA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function t_(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let tE={date:t_({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:t_({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:t_({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tR(e){return(t,r)=>{let s;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{let t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function tI(e){return(t,r={})=>{let s,a=r.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(n);if(!i)return null;let l=i[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(o,e=>e.test(l)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(o,e=>e.test(l));return s=e.valueCallback?e.valueCallback(c):c,{value:s=r.valueCallback?r.valueCallback(s):s,rest:t.slice(l.length)}}}let tO={code:"en-US",formatDistance:(e,t,r)=>{let s,a=tA[e];if(s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"in "+s;else return s+" ago";return s},formatLong:tE,formatRelative:(e,t,r,s)=>tL[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:tR({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tR({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:tR({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tR({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tR({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(n={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let s=r[0],a=e.match(n.parsePattern);if(!a)return null;let i=n.valueCallback?n.valueCallback(a[0]):a[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:e.slice(s.length)}}),era:tI({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tI({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tI({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tI({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tI({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},tF={};function tq(e,t){return tP(t||e,e)}function t$(e){let t=tq(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),e-r}function tU(e,...t){let r=tP.bind(null,e||t.find(e=>"object"==typeof e));return t.map(r)}function tG(e,t){let r=tq(e)-tq(t);return r<0?-1:r>0?1:r}function tH({request:e,onClick:t,compact:r=!1}){var s,a;let{lang:n}=(0,tM.useI18n)(),i=e.petName||e?.pet?.name||"Animal",l=e.petType||e?.pet?.type||e?.pet?.species,o=l?` - ${l}`:"",d="string"==typeof e.location?e.location:e.location?.address||"Localisation inconnue";return(0,c.jsx)(te,{className:`cursor-pointer hover:shadow-md transition-shadow ${r?"p-2":""}`,onClick:t,children:(0,c.jsx)(ts,{className:r?"p-2":"p-4",children:(0,c.jsxs)("div",{className:"flex items-start gap-3",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)(tg,{className:r?"h-12 w-12":"h-16 w-16",children:[(0,c.jsx)(tb,{src:e.petImage||"/petAvatar.png",alt:i}),(0,c.jsx)(tv,{children:i[0]})]}),(0,c.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-card rounded-full flex items-center justify-center shadow-sm",children:(0,c.jsx)(tS,{type:e.serviceType,size:14,className:"text-primary"})})]}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,c.jsxs)("h3",{className:"font-semibold text-foreground truncate",children:[i,o]}),(0,c.jsx)(tj,{status:e.status,size:"sm"})]}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:[tC(e.serviceType,n)," • ",i,e.petType?` (${e.petType})`:""]}),!r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-1",children:[(0,c.jsx)(eJ,{size:14}),(0,c.jsx)("span",{className:"truncate",children:d})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-2",children:[(0,c.jsx)(tT,{size:14}),(0,c.jsx)("span",{children:e.dateStart?new Date(e.dateStart).toLocaleDateString():""})]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-accent",children:[(0,c.jsx)(tz,{size:16}),(0,c.jsxs)("span",{children:[e.offeredPrice," TND"]})]}),(0,c.jsx)("span",{className:"text-xs text-muted-foreground",children:e.createdAt?(s=new Date(e.createdAt),a={addSuffix:!0},function(e,t,r){var s;let a,n=r?.locale??tF.locale??tO,i=tG(e,t);if(isNaN(i))throw RangeError("Invalid time value");let l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[o,c]=tU(r?.in,...i>0?[t,e]:[e,t]),d=(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})((tq(c)-tq(o))/1e3),u=Math.round((d-(t$(c)-t$(o))/1e3)/60);if(u<2)if(r?.includeSeconds)if(d<5)return n.formatDistance("lessThanXSeconds",5,l);else if(d<10)return n.formatDistance("lessThanXSeconds",10,l);else if(d<20)return n.formatDistance("lessThanXSeconds",20,l);else if(d<40)return n.formatDistance("halfAMinute",0,l);else if(d<60)return n.formatDistance("lessThanXMinutes",1,l);else return n.formatDistance("xMinutes",1,l);else if(0===u)return n.formatDistance("lessThanXMinutes",1,l);else return n.formatDistance("xMinutes",u,l);if(u<45)return n.formatDistance("xMinutes",u,l);if(u<90)return n.formatDistance("aboutXHours",1,l);if(u<1440){let e=Math.round(u/60);return n.formatDistance("aboutXHours",e,l)}if(u<2520)return n.formatDistance("xDays",1,l);else if(u<43200){let e=Math.round(u/1440);return n.formatDistance("xDays",e,l)}else if(u<86400)return a=Math.round(u/43200),n.formatDistance("aboutXMonths",a,l);if((a=function(e,t,r){var s,a;let n,i,l,o,[c,d,u]=tU(void 0,e,e,t),m=tG(d,u),h=Math.abs(function(e,t,r){let[s,a]=tU(void 0,e,t);return 12*(s.getFullYear()-a.getFullYear())+(s.getMonth()-a.getMonth())}(d,u));if(h<1)return 0;1===d.getMonth()&&d.getDate()>27&&d.setDate(30),d.setMonth(d.getMonth()-m*h);let x=tG(d,u)===-m;+(n=tq(c,void 0),s=void 0,(i=tq(n,s?.in)).setHours(23,59,59,999),i)==+(a=void 0,o=(l=tq(n,a?.in)).getMonth(),l.setFullYear(l.getFullYear(),o+1,0),l.setHours(23,59,59,999),l)&&1===h&&1===tG(c,u)&&(x=!1);let p=m*(h-x);return 0===p?0:p}(c,o))<12){let e=Math.round(u/43200);return n.formatDistance("xMonths",e,l)}{let e=a%12,t=Math.trunc(a/12);return e<3?n.formatDistance("aboutXYears",t,l):e<9?n.formatDistance("overXYears",t,l):n.formatDistance("almostXYears",t+1,l)}}(s,tP(s,Date.now()),a)):""})]})]})]})})})}let tW=eI("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),tB=eI("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function tY({score:e,reviewCount:t,size:r="md",showLabel:s=!0}){let a=Number.isFinite(e)?e:0,{icon:n,label:i,color:l}={high:{icon:tW,label:"Trusted",color:"text-accent bg-accent/10"},medium:{icon:eQ,label:"Verified",color:"text-primary bg-primary/10"},low:{icon:tB,label:"New",color:"text-muted-foreground bg-muted"}}[a>=4.5?"high":a>=3.5?"medium":"low"];return(0,c.jsxs)("div",{className:eM("inline-flex items-center rounded-full font-medium",l,{sm:"text-xs px-1.5 py-0.5 gap-1",md:"text-sm px-2 py-1 gap-1.5",lg:"text-base px-3 py-1.5 gap-2"}[r]),children:[(0,c.jsx)(n,{size:{sm:12,md:14,lg:18}[r]}),s&&(0,c.jsx)("span",{children:i}),(0,c.jsx)("span",{className:"font-semibold",children:a.toFixed(1)}),void 0!==t&&(0,c.jsxs)("span",{className:"text-muted-foreground",children:["(",t,")"]})]})}let tV=eI("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function tX({offer:e,onAccept:t,onReject:r,locationLabel:s}){let a=e.sitterName||"Garde",n=a[0],i="number"==typeof e.distance&&Number.isFinite(e.distance)?`${e.distance.toFixed(1)} km`:null,l="number"==typeof e.offeredPrice&&Number.isFinite(e.offeredPrice)?`${e.offeredPrice} TND`:"-";return(0,c.jsx)(te,{className:"overflow-hidden",children:(0,c.jsx)(ts,{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-start gap-3",children:[(0,c.jsxs)(tg,{className:"h-14 w-14",children:[(0,c.jsx)(tb,{src:e.sitterAvatar||"/sitterAvatar.png",alt:a}),(0,c.jsx)(tv,{children:n})]}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,c.jsx)("h3",{className:"font-semibold text-foreground",children:a}),(0,c.jsx)(tY,{score:e.sitterTrustScore,reviewCount:e.sitterReviewCount,size:"sm"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground mb-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)(eJ,{size:14}),(0,c.jsx)("span",{children:s||i||"Localisation inconnue"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-accent",children:[(0,c.jsx)(tz,{size:14}),(0,c.jsx)("span",{children:l})]})]}),e.message&&(0,c.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground bg-secondary rounded-lg p-2 mb-3",children:[(0,c.jsx)(tV,{size:14,className:"mt-0.5 flex-shrink-0"}),(0,c.jsx)("p",{className:"line-clamp-2",children:e.message})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",onClick:r,children:"Decline"}),(0,c.jsx)(ez,{size:"sm",className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:t,children:"Accept"})]})]})]})})})}let tK=eI("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),tJ=eI("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),tQ=eI("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),tZ=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)("textarea",{className:eM("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));function t0(e,[t,r]){return Math.min(r,Math.max(t,e))}function t1(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),!1===r||!s.defaultPrevented)return t?.(s)}}function t2({prop:e,defaultProp:t,onChange:r=()=>{}}){let[s,a]=function({defaultProp:e,onChange:t}){let r=d.useState(e),[s]=r,a=d.useRef(s),n=tn(t);return d.useEffect(()=>{a.current!==s&&(n(s),a.current=s)},[s,a,n]),r}({defaultProp:t,onChange:r}),n=void 0!==e,i=n?e:s,l=tn(r);return[i,d.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else a(t)},[n,e,a,l])]}tZ.displayName="Textarea";var t4=d.createContext(void 0);function t3(e){let t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function t5(e){let[t,r]=d.useState(void 0);return ti(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}var t6=["PageUp","PageDown"],t8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},t7="Slider",[re,rt,rr]=function(e){let t=e+"CollectionProvider",[r,s]=ta(t),[a,n]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{let{scope:t,children:r}=e,s=d.default.useRef(null),n=d.default.useRef(new Map).current;return(0,c.jsx)(a,{scope:t,itemMap:n,collectionRef:s,children:r})};i.displayName=t;let l=e+"CollectionSlot",o=d.default.forwardRef((e,t)=>{let{scope:r,children:s}=e,a=x(t,n(l,r).collectionRef);return(0,c.jsx)(p,{ref:a,children:s})});o.displayName=l;let u=e+"CollectionItemSlot",m="data-radix-collection-item",h=d.default.forwardRef((e,t)=>{let{scope:r,children:s,...a}=e,i=d.default.useRef(null),l=x(t,i),o=n(u,r);return d.default.useEffect(()=>(o.itemMap.set(i,{ref:i,...a}),()=>void o.itemMap.delete(i))),(0,c.jsx)(p,{...{[m]:""},ref:l,children:s})});return h.displayName=u,[{Provider:i,Slot:o,ItemSlot:h},function(t){let r=n(e+"CollectionConsumer",t);return d.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},s]}(t7),[rs,ra]=ta(t7,[rr]),[rn,ri]=rs(t7),rl=d.forwardRef((e,t)=>{let{name:r,min:s=0,max:a=100,step:n=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:o=0,defaultValue:u=[s],value:m,onValueChange:h=()=>{},onValueCommit:x=()=>{},inverted:p=!1,form:f,...g}=e,b=d.useRef(new Set),v=d.useRef(0),j="horizontal"===i,[y=[],w]=t2({prop:m,defaultProp:u,onChange:e=>{let t=[...b.current];t[v.current]?.focus(),h(e)}}),N=d.useRef(y);function k(e,t,{commit:r}={commit:!1}){let i,l=(String(n).split(".")[1]||"").length,c=t0(Math.round((Math.round((e-s)/n)*n+s)*(i=Math.pow(10,l)))/i,[s,a]);w((e=[])=>{let s=function(e=[],t,r){let s=[...e];return s[r]=t,s.sort((e,t)=>e-t)}(e,c,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(s,o*n))return e;{v.current=s.indexOf(c);let t=String(s)!==String(e);return t&&r&&x(s),t?s:e}})}return(0,c.jsx)(rn,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:a,valueIndexToChangeRef:v,thumbs:b.current,values:y,orientation:i,form:f,children:(0,c.jsx)(re.Provider,{scope:e.__scopeSlider,children:(0,c.jsx)(re.Slot,{scope:e.__scopeSlider,children:(0,c.jsx)(j?rd:ru,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:t1(g.onPointerDown,()=>{l||(N.current=y)}),min:s,max:a,inverted:p,onSlideStart:l?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),s=Math.min(...r);return r.indexOf(s)}(y,e);k(e,t)},onSlideMove:l?void 0:function(e){k(e,v.current)},onSlideEnd:l?void 0:function(){let e=N.current[v.current];y[v.current]!==e&&x(y)},onHomeKeyDown:()=>!l&&k(s,0,{commit:!0}),onEndKeyDown:()=>!l&&k(a,y.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){let r=t6.includes(e.key)||e.shiftKey&&t8.includes(e.key),s=v.current;k(y[s]+n*(r?10:1)*t,s,{commit:!0})}}})})})})});rl.displayName=t7;var[ro,rc]=rs(t7,{startEdge:"left",endEdge:"right",size:"width",direction:1}),rd=d.forwardRef((e,t)=>{let r,{min:s,max:a,dir:n,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:u,onStepKeyDown:m,...h}=e,[p,f]=d.useState(null),g=x(t,e=>f(e)),b=d.useRef(void 0),v=(r=d.useContext(t4),n||r||"ltr"),j="ltr"===v,y=j&&!i||!j&&i;function w(e){let t=b.current||p.getBoundingClientRect(),r=rw([0,t.width],y?[s,a]:[a,s]);return b.current=t,r(e-t.left)}return(0,c.jsx)(ro,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,c.jsx)(rm,{dir:v,"data-orientation":"horizontal",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=w(e.clientX);l?.(t)},onSlideMove:e=>{let t=w(e.clientX);o?.(t)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:e=>{let t=t9[y?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:t?-1:1})}})})}),ru=d.forwardRef((e,t)=>{let{min:r,max:s,inverted:a,onSlideStart:n,onSlideMove:i,onSlideEnd:l,onStepKeyDown:o,...u}=e,m=d.useRef(null),h=x(t,m),p=d.useRef(void 0),f=!a;function g(e){let t=p.current||m.current.getBoundingClientRect(),a=rw([0,t.height],f?[s,r]:[r,s]);return p.current=t,a(e-t.top)}return(0,c.jsx)(ro,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,c.jsx)(rm,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=g(e.clientY);n?.(t)},onSlideMove:e=>{let t=g(e.clientY);i?.(t)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:e=>{let t=t9[f?"from-bottom":"from-top"].includes(e.key);o?.({event:e,direction:t?-1:1})}})})}),rm=d.forwardRef((e,t)=>{let{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:n,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:o,...d}=e,u=ri(t7,r);return(0,c.jsx)(eP.span,{...d,ref:t,onKeyDown:t1(e.onKeyDown,e=>{"Home"===e.key?(i(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):t6.concat(t8).includes(e.key)&&(o(e),e.preventDefault())}),onPointerDown:t1(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():s(e)}),onPointerMove:t1(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:t1(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),n(e))})})}),rh="SliderTrack",rx=d.forwardRef((e,t)=>{let{__scopeSlider:r,...s}=e,a=ri(rh,r);return(0,c.jsx)(eP.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});rx.displayName=rh;var rp="SliderRange",rf=d.forwardRef((e,t)=>{let{__scopeSlider:r,...s}=e,a=ri(rp,r),n=rc(rp,r),i=x(t,d.useRef(null)),l=a.values.length,o=a.values.map(e=>ry(e,a.min,a.max)),u=l>1?Math.min(...o):0,m=100-Math.max(...o);return(0,c.jsx)(eP.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:i,style:{...e.style,[n.startEdge]:u+"%",[n.endEdge]:m+"%"}})});rf.displayName=rp;var rg="SliderThumb",rb=d.forwardRef((e,t)=>{let r=rt(e.__scopeSlider),[s,a]=d.useState(null),n=x(t,e=>a(e)),i=d.useMemo(()=>s?r().findIndex(e=>e.ref.current===s):-1,[r,s]);return(0,c.jsx)(rv,{...e,ref:n,index:i})}),rv=d.forwardRef((e,t)=>{var r,s,a,n,i;let l,o,{__scopeSlider:u,index:m,name:h,...p}=e,f=ri(rg,u),g=rc(rg,u),[b,v]=d.useState(null),j=x(t,e=>v(e)),y=!b||f.form||!!b.closest("form"),w=t5(b),N=f.values[m],k=void 0===N?0:ry(N,f.min,f.max),S=(r=m,(s=f.values.length)>2?`Value ${r+1} of ${s}`:2===s?["Minimum","Maximum"][r]:void 0),C=w?.[g.size],M=C?(a=C,n=k,i=g.direction,o=rw([0,50],[0,l=a/2]),(l-o(n)*i)*i):0;return d.useEffect(()=>{if(b)return f.thumbs.add(b),()=>{f.thumbs.delete(b)}},[b,f.thumbs]),(0,c.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[g.startEdge]:`calc(${k}% + ${M}px)`},children:[(0,c.jsx)(re.ItemSlot,{scope:e.__scopeSlider,children:(0,c.jsx)(eP.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":f.min,"aria-valuenow":N,"aria-valuemax":f.max,"aria-orientation":f.orientation,"data-orientation":f.orientation,"data-disabled":f.disabled?"":void 0,tabIndex:f.disabled?void 0:0,...p,ref:j,style:void 0===N?{display:"none"}:e.style,onFocus:t1(e.onFocus,()=>{f.valueIndexToChangeRef.current=m})})}),y&&(0,c.jsx)(rj,{name:h??(f.name?f.name+(f.values.length>1?"[]":""):void 0),form:f.form,value:N},m)]})});rb.displayName=rg;var rj=e=>{let{value:t,...r}=e,s=d.useRef(null),a=t3(t);return d.useEffect(()=>{let e=s.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(a!==t&&r){let s=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(s)}},[a,t]),(0,c.jsx)("input",{style:{display:"none"},...r,ref:s,defaultValue:t})};function ry(e,t,r){return t0(100/(r-t)*(e-t),[0,100])}function rw(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}let rN=d.forwardRef(({className:e,...t},r)=>(0,c.jsxs)(rl,{ref:r,className:eM("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,c.jsx)(rx,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,c.jsx)(rf,{className:"absolute h-full bg-primary"})}),(0,c.jsx)(rb,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));async function rk(e,t={}){let r="undefined"==typeof localStorage?null:localStorage.getItem("access_token"),s=new Headers(t.headers||{});"undefined"!=typeof FormData&&t.body instanceof FormData||s.has("Content-Type")||s.set("Content-Type","application/json");let a=e.startsWith("/auth/login")||e.startsWith("/auth/register")||e.startsWith("/auth/google/login")||e.startsWith("/auth/google/callback");r&&!a&&s.set("Authorization",`Bearer ${r}`);let n=await fetch(`http://127.0.0.1:5000${e}`,{...t,headers:s,credentials:"omit"});if(!n.ok){let e=await n.text(),t=null;try{t=JSON.parse(e)}catch{t=null}let r=Error(t?.message||e||`API error ${n.status}`);throw r.status=n.status,r.data=t,r}return n}function rS(e){if(!e)return null;if("object"==typeof e&&"number"==typeof e.lat&&"number"==typeof e.lng)return{lat:e.lat,lng:e.lng,address:e.address};if("string"==typeof e){try{let t=JSON.parse(e);if(t&&"number"==typeof t.lat&&"number"==typeof t.lng)return{lat:t.lat,lng:t.lng,address:t.address}}catch{}let t=e.split(",").map(e=>e.trim());if(t.length>=2){let e=Number(t[0]),r=Number(t[1]);if(!Number.isNaN(e)&&!Number.isNaN(r))return{lat:e,lng:r,address:t.slice(2).join(", ").trim()||void 0}}}return null}function rC(e){return{id:String(e.id),requestId:String(e.request_id??e.requestId??""),sitterId:String(e.sitter_id??e.sitterId??""),sitterName:e.sitter_name||e.sitterName||"Garde",sitterAvatar:e.sitter_avatar||e.sitterAvatar,sitterTrustScore:Number(e.sitter_trust_score??e.sitterTrustScore??0),sitterReviewCount:Number(e.sitter_review_count??e.sitterReviewCount??0),offeredPrice:Number(e.offered_price??e.offeredPrice??0),message:e.message,distance:Number(e.distance??e.distance_km??0),status:e.status||"pending",createdAt:e.created_at||e.createdAt||new Date().toISOString()}}function rM(e){let t=rS(e.location)||{lat:36.8065,lng:10.1815,address:"Tunis, Tunisia"};return{id:String(e.id),requestId:String(e.request_id??e.requestId??""),offerId:String(e.offer_id??e.offerId??""),ownerId:String(e.owner_id??e.ownerId??""),sitterId:String(e.sitter_id??e.sitterId??""),sitterName:e.sitter_name||e.sitterName||"Sitter",sitterAvatar:e.sitter_avatar||e.sitterAvatar,petName:e.pet_name||e.petName||"Animal",petType:e.pet_type||e.petType||"pet",serviceType:rT(e.service_type??e.serviceType??e.service_type_id),location:{lat:t.lat,lng:t.lng,address:t.address||e.location||"Localisation inconnue"},dateStart:e.date_start||e.dateStart||"",dateEnd:e.date_end||e.dateEnd||"",price:Number(e.price??e.agreed_price??e.requested_price??0),status:e.status||"scheduled",updates:Array.isArray(e.updates)?e.updates.map(e=>({id:String(e.id??Math.random()),createdAt:e.created_at||e.timestamp||new Date().toISOString(),type:e.type||"note",content:e.content??e.message??"",photoUrl:e.photo_url??e.photoUrl})):[]}}function rT(e){if("string"==typeof e){let t=e.toLowerCase();return t.includes("walk")?"walking":t.includes("taxi")?"taxi":t.includes("emerg")?"emergency":"sitting"}if("number"==typeof e){if(2===e)return"walking";if(3===e)return"taxi";if(4===e)return"emergency"}return"sitting"}function rz(e){return{id:String(e.id),ownerId:String(e.owner_id??""),ownerName:e.owner_name||e.ownerName||"",ownerAvatar:e.owner_avatar||e.ownerAvatar,petId:String(e.pet_id??e.petId??""),petName:e.pet_name||e.petName||"",petType:e.pet_type||e.petType||"",petImage:e.pet_image||e.petImage,serviceType:rT(e.service_type??e.serviceType??e.service_type_id),location:rS(e.location)||{lat:36.8065,lng:10.1815,address:e.location},dateStart:e.date_start||e.dateStart||"",dateEnd:e.date_end||e.dateEnd||"",offeredPrice:Number(e.requested_price??e.offeredPrice??0),status:e.status||"open",createdAt:e.created_at||e.createdAt||new Date().toISOString(),description:e.description}}async function rD(){let e=await rk("/requests/open",{method:"GET"}),t=await e.json();return Array.isArray(t)?t.map(rz):[]}async function rP(){let e=await rk("/requests/types",{method:"GET"});return await e.json()}async function rA(){let e=await rk("/requests/my",{method:"GET"}),t=await e.json();return Array.isArray(t)?t.map(rz):[]}async function r_(e){let t={pet_id:e.petId,service_type_id:e.serviceTypeId,requested_price:e.requestedPrice,location:JSON.stringify(e.location)},r=await rk("/requests",{method:"POST",body:JSON.stringify(t)});return rz(await r.json())}async function rE(){let e=await rk("/sitters",{method:"GET"}),t=await e.json();return Array.isArray(t)?t.map(e=>({id:String(e.id),sitterId:String(e.sitter_id??e.sitterId??e.id),name:e.name||e.full_name||"Sitter",avatar:e.avatar,trustScore:e.trust_score??e.trustScore,reviewCount:e.review_count??e.reviewCount,city:e.city,isAvailable:e.is_available??e.isAvailable,lat:e.lat,lng:e.lng,servicesOffered:e.services_offered??e.servicesOffered,bio:e.bio})):[]}async function rL(){let e=await rk("/sitters/me",{method:"GET"});return await e.json()}async function rR(e){let t=await rk(`/sitters/${e}/reviews`,{method:"GET"});return await t.json()}async function rI(e){let t=await rk("/sitters/me",{method:"PUT",body:JSON.stringify(e)});return await t.json()}async function rO(){let e=await rk("/pets/",{method:"GET"});return await e.json()}async function rF(e){let t=await rk("/pets/",{method:"POST",body:JSON.stringify({name:e.name,species:e.species||e.type||e.type,breed:e.breed,age:e.age,temperament:e.temperament,medical_notes:e.medical_notes})});return await t.json()}async function rq(e,t){let r=await rk(`/pets/${e}`,{method:"PUT",body:JSON.stringify(t)});return await r.json()}async function r$(e){let t=await rk(`/requests/${e}/offers`,{method:"GET"}),r=await t.json();return Array.isArray(r)?r.map(rC):[]}async function rU(e,t){let r=await rk(`/requests/${e}/offers`,{method:"POST",body:JSON.stringify({offered_price:t.price,message:t.message})});return await r.json()}async function rG(e){let t=await rk(`/offers/${e}/accept`,{method:"PUT"});return await t.json()}async function rH(e){let t=await rk(`/offers/${e}/reject`,{method:"PUT"});return await t.json()}async function rW(){let e=await rk("/bookings/my",{method:"GET"}),t=await e.json();return Array.isArray(t)?t.map(rM):[]}async function rB(e){let t=await rk(`/bookings/${e}`,{method:"GET"});return rM(await t.json())}async function rY(e){let t=await rk(`/bookings/${e}/complete`,{method:"PUT"});return rM(await t.json())}async function rV(e){let t=await rk(`/bookings/${e}/updates`,{method:"GET"}),r=await t.json();return Array.isArray(r)?r.map(e=>({id:String(e.id??Math.random()),createdAt:e.created_at||e.timestamp||new Date().toISOString(),type:e.type||"note",content:e.content??"",photoUrl:e.photo_url??e.photoUrl})):[]}async function rX(e,t){let r={type:t.type,content:t.content,photo_url:t.photoUrl};return(await rk(`/bookings/${e}/updates`,{method:"POST",body:JSON.stringify(r)})).json()}async function rK(e,t){let r=new FormData;return r.append("file",t),(await rk(`/bookings/${e}/updates/photo`,{method:"POST",body:r})).json()}async function rJ(e,t){let r=await rk(`/bookings/${e}/review`,{method:"POST",body:JSON.stringify(t)});return await r.json()}function rQ(){let[e,t]=(0,d.useState)(null),[r,s]=(0,d.useState)(null),[a,n]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{if(!navigator?.geolocation){s("Geolocation not available"),n(!1);return}navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lng:e.coords.longitude}),n(!1)},e=>{s(e.message),n(!1)},{enableHighAccuracy:!0,timeout:1e4})},[]),{coords:e,error:r,loading:a}}rN.displayName=rl.displayName;let rZ=["Details","Localisation & Budget","Confirmation"];function r0({user:e,onClose:t,onSubmit:r,onUpdateUser:s}){var a;let[n,i]=(0,d.useState)(0),[l,o]=(0,d.useState)(e?.pets||[]),[u,m]=(0,d.useState)(!1),[h,x]=(0,d.useState)(null),[p,f]=(0,d.useState)([]),[g,b]=(0,d.useState)(null),[v,j]=(0,d.useState)(l[0]?.id??null),[y,w]=(0,d.useState)(null),[N,k]=(0,d.useState)(""),[S,C]=(0,d.useState)(""),[M,T]=(0,d.useState)([30]),[z,D]=(0,d.useState)(""),[P,A]=(0,d.useState)(!1),{coords:_}=rQ(),[E,L]=(0,d.useState)({lat:e?.location?.lat??_?.lat??36.8065,lng:e?.location?.lng??_?.lng??10.1815,address:e?.location?.address??"Tunis, Tunisia"}),[R,I]=(0,d.useState)(!1),[O,F]=(0,d.useState)({name:"",species:"dog",breed:"",age:""}),[q,$]=(0,d.useState)(null),[U,G]=(0,d.useState)(null),[H,W]=(0,d.useState)(E.address||""),[B,Y]=(0,d.useState)(e?.location?.address||"Tunis, Tunisia"),[V,X]=(0,d.useState)(null),[K,J]=(0,d.useState)({});(0,d.useEffect)(()=>{let e=async()=>{try{let e=await rP();f(e||[])}catch(e){b("Types de services indisponibles.")}};(async()=>{m(!0),x(null);try{let e=await rO(),t=e?.map(e=>({id:String(e.id),name:e.name,type:e.type||e.species||"other",breed:e.breed,age:e.age,image:e.image||e.photo_url}))||[];o(t),!v&&t[0]&&j(String(t[0].id))}catch(e){x("Impossible de charger vos animaux.")}finally{m(!1)}})(),e()},[v]),(0,d.useEffect)(()=>{_?.lat&&_?.lng&&L(e=>({...e,lat:_.lat,lng:_.lng}))},[_]);let Q=l.find(e=>String(e.id)===String(v)),Z=(0,d.useMemo)(()=>p.find(e=>e.id===y)||null,[p,y]),ee=(0,d.useMemo)(()=>{if(!N||!S)return null;let e=new Date(N),t=new Date(S);if(Number.isNaN(e.getTime())||Number.isNaN(t.getTime())||t<=e)return null;let r=Math.round((t.getTime()-e.getTime())/36e5),s=Math.floor(r/24);return{hours:r,days:s,remHours:r%24}},[N,S]),et=e=>{let t={};return 0===e&&(v||(t.pet="Selectionne un animal."),null===y&&(t.service="Choisis un service."),N||(t.dateStart="Date de debut requise"),S||(t.dateEnd="Date de fin requise"),N&&S&&new Date(S)<new Date(N)&&(t.dateEnd="La fin doit etre apres le debut")),1===e&&(H||B||(t.address="Adresse requise"),Z&&M[0]<Number(Z.min_price)?t.price=`Minimum ${Number(Z.min_price)} TND`:M[0]<10&&(t.price="Montant trop bas")),t},er=async()=>{let e={...et(0),...et(1)};if(J(t=>({...t,...e})),Object.values(e).some(Boolean))return void G("Corrige les champs en rouge.");A(!0),G(null);try{await r_({petId:v,serviceTypeId:y,requestedPrice:M[0],location:{...E,address:H||B||E.address}}),r()}catch(e){G("Creation impossible. Verifie les champs et reessaie.")}finally{A(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:()=>{n>0?i(n-1):t()},className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:"Creer une demande"}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Etape ",n+1," sur ",rZ.length]})]})]}),(0,c.jsx)("div",{className:"flex gap-1 px-4 py-3",children:rZ.map((e,t)=>(0,c.jsx)("div",{className:`flex-1 h-1 rounded-full transition-colors ${t<=n?"bg-primary":"bg-border"}`},t))}),(0,c.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:rZ[n]}),U?(0,c.jsx)("p",{className:"text-sm text-destructive",children:U}):null,0===n&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[u&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement des animaux."}),h&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:h}),l.map(e=>(0,c.jsxs)("button",{onClick:()=>j(String(e.id)),className:`w-full p-4 rounded-xl border-2 transition-all flex items-center gap-4 ${v===String(e.id)?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,c.jsxs)(tg,{className:"h-14 w-14",children:[(0,c.jsx)(tb,{src:e.image||`/petAvatar.png?height=56&width=56&query=${e.type} ${e.breed}`}),(0,c.jsx)(tv,{children:e.name?.[0]})]}),(0,c.jsxs)("div",{className:"flex-1 text-left",children:[(0,c.jsx)("p",{className:"font-semibold",children:e.name}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.breed||e.type)??""," - ",e.age??"-"," ans"]})]}),v===String(e.id)&&(0,c.jsx)("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:(0,c.jsx)(tK,{size:14,className:"text-primary-foreground"})})]},e.id)),K.pet&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.pet]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsxs)(ez,{className:"flex-1",variant:"outline",size:"sm",onClick:()=>{x(null),(async()=>{try{let e=await rO(),t=e?.map(e=>({id:String(e.id),name:e.name,type:e.type||e.species||"other",breed:e.breed,age:e.age,image:e.image||e.photo_url}))||[];o(t),t[0]&&j(String(t[0].id))}catch(e){x("Impossible de rafraichir les animaux.")}})()},children:[(0,c.jsx)(tJ,{size:14,className:"mr-1"}),"Rafraichir mes animaux"]}),(0,c.jsxs)(ez,{variant:"secondary",size:"sm",onClick:()=>I(e=>!e),children:[(0,c.jsx)(eO,{size:16,className:"mr-1"}),"Ajouter"]})]}),R&&(0,c.jsxs)("div",{className:"p-4 border rounded-xl space-y-3 bg-secondary/30",children:[q?(0,c.jsx)("p",{className:"text-sm text-destructive",children:q}):null,(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Nom"}),(0,c.jsx)(eD,{value:O.name,onChange:e=>F({...O,name:e.target.value})})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Type"}),(0,c.jsxs)("select",{className:"w-full rounded-md border bg-card p-2 text-sm",value:O.species,onChange:e=>F({...O,species:e.target.value}),children:[(0,c.jsx)("option",{value:"dog",children:"Chien"}),(0,c.jsx)("option",{value:"cat",children:"Chat"}),(0,c.jsx)("option",{value:"other",children:"Autre"})]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Race"}),(0,c.jsx)(eD,{value:O.breed,onChange:e=>F({...O,breed:e.target.value})})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Age (ans)"}),(0,c.jsx)(eD,{type:"number",value:O.age,onChange:e=>F({...O,age:e.target.value})})]})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{type:"button",className:"flex-1",onClick:async()=>{if($(null),!O.name)return void $("Nom requis.");try{let e=await rF({name:O.name,species:O.species,breed:O.breed,age:O.age?Number(O.age):void 0}),t={id:String(e.id),name:e.name,type:e.type||e.species||O.species||"other",breed:e.breed,age:e.age,image:e.image||e.photo_url};o(e=>[...e,t]),j(String(t.id)),s?.({pets:[...l,t]}),I(!1),F({name:"",species:"dog",breed:"",age:""})}catch(e){$("Ajout impossible. Verifie que tu es connecte.")}},disabled:!O.name,children:"Enregistrer l'animal"}),(0,c.jsx)(ez,{variant:"ghost",type:"button",onClick:()=>I(!1),children:"Annuler"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[g?(0,c.jsx)("p",{className:"text-sm text-destructive",children:g}):null,0===p.length&&!g&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement des services."}),(0,c.jsx)("div",{className:"grid grid-cols-2 gap-3",children:p.map(e=>{let t=e.name?.toLowerCase().includes("walk")||e.name?.toLowerCase().includes("dog")?"Promenade":e.name?.toLowerCase().includes("taxi")?"Pet Taxi":e.name?.toLowerCase().includes("emergency")?"Urgence":"Garde a domicile",r="Garde a domicile"===t?"bg-[#F5E6D3]":"Promenade"===t?"bg-[#D4E7F7]":"Urgence"===t?"bg-[#FFD4D4]":"bg-[#E8D9F5]",s="Garde a domicile"===t?"hover:border-[#c67b5c]":"Promenade"===t?"hover:border-[#2F6F8F]":"Urgence"===t?"hover:border-[#D94141]":"hover:border-[#8B9F8F]";return(0,c.jsxs)("button",{onClick:()=>w(e.id),className:`p-4 rounded-xl border-2 transition-all text-left shadow-sm ${r} ${y===e.id?"border-primary scale-[1.01]":`border-border ${s} hover:shadow-md`}`,children:[(0,c.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-3 bg-white/60 shadow-sm",children:(0,c.jsx)(tS,{type:"Promenade"===t?"walking":"Pet Taxi"===t?"taxi":"Urgence"===t?"emergency":"sitting",size:32})}),(0,c.jsx)("p",{className:"font-semibold text-sm",children:t}),(0,c.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Tarif min: ",Number(e.min_price)," TND ",e.description?`- ${e.description}`:""]})]},e.id)})}),K.service&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.service]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e_,{htmlFor:"start",children:"Date et heure de debut"}),(0,c.jsx)(eD,{id:"start",type:"datetime-local",value:N,onChange:e=>k(e.target.value),onBlur:()=>J(e=>({...e,...et(0)})),"aria-invalid":!!K.dateStart,min:new Date().toISOString().slice(0,16)}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selectionne la date et l'heure souhaitees"}),K.dateStart&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.dateStart]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e_,{htmlFor:"end",children:"Date et heure de fin"}),(0,c.jsx)(eD,{id:"end",type:"datetime-local",value:S,onChange:e=>C(e.target.value),onBlur:()=>J(e=>({...e,...et(0)})),"aria-invalid":!!K.dateEnd,min:N||new Date().toISOString().slice(0,16)}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selectionne la date et l'heure souhaitees"}),K.dateEnd&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.dateEnd]})]}),ee&&(0,c.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Duree estimee : ",ee.days,"j ",ee.remHours,"h (",ee.hours," heures)"]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[(0,c.jsx)("span",{className:"text-muted-foreground",children:"Suggestions :"}),(0,c.jsx)(ez,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=(N?new Date(N):new Date).toISOString().slice(0,10);k(`${e}T09:00`),C(`${e}T12:00`)},children:"Matin (09:00-12:00)"}),(0,c.jsx)(ez,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=(N?new Date(N):new Date).toISOString().slice(0,10);k(`${e}T12:00`),C(`${e}T17:00`)},children:"Apres-midi (12:00-17:00)"}),(0,c.jsx)(ez,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=(N?new Date(N):new Date).toISOString().slice(0,10);k(`${e}T18:00`),C(`${e}T22:00`)},children:"Soir (18:00-22:00)"})]})]})]}),1===n&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(eJ,{size:20,className:"text-primary"}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)(e_,{children:"Adresse"}),(0,c.jsx)(eD,{value:H,onChange:e=>{let t=e.target.value;W(t),L(e=>({...e,address:t||B||e.address}))},placeholder:"Ex: Rue de Marseille, Tunis"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(e_,{children:"Ville / Zone (Grand Tunis)"}),(0,c.jsx)("select",{className:"w-full mt-1 rounded-md border bg-card p-2",value:B,onChange:e=>{let t=e.target.value;Y(t),L(e=>({...e,address:H||t,lat:e.lat,lng:e.lng}))},children:["Tunis, Tunisia","La Marsa","Carthage","Le Kram","Ariana","Ben Arous","Manouba","Ezzahra","Bardo"].map(e=>(0,c.jsx)("option",{value:e,children:e},e))})]}),K.address&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.address]}),(0,c.jsxs)(ez,{type:"button",variant:"outline",size:"sm",className:"inline-flex items-center gap-2",onClick:()=>{_?.lat&&_?.lng&&(L({lat:_.lat,lng:_.lng,address:H||B||E.address}),W(H||B||E.address||"Ma position"))},children:[(0,c.jsx)(tQ,{size:16}),"Utiliser ma position"]}),(0,c.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Lat: ",E.lat.toFixed(4)," - Lng: ",E.lng.toFixed(4)]}),(0,c.jsx)("div",{className:"rounded-2xl overflow-hidden border border-border h-72",children:(0,c.jsx)(e8,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:V||E,markers:V?[{id:"selected",lat:V.lat,lng:V.lng,type:"request",label:"Emplacement"}]:[],onSelectLocation:e=>{let t=H?.trim()?H:`${B||"Tunis"}, (${e.lat.toFixed(4)}, ${e.lng.toFixed(4)})`;W(t),X(e),L({...E,...e,address:t})}})}),(0,c.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Adresse actuelle : ",H||B," | Coords : ",V?`${V.lat.toFixed(4)}, ${V.lng.toFixed(4)}`:"-"]})]}),(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("div",{className:"inline-flex items-center gap-2 text-4xl font-bold text-primary",children:[(0,c.jsx)("span",{children:M[0]}),(0,c.jsx)("span",{className:"text-lg font-semibold text-muted-foreground",children:"TND"})]}),(0,c.jsx)("p",{className:"text-muted-foreground mt-1",children:"Budget propose"}),Z?(0,c.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",Number(Z.min_price)," TND pour ce service"]}):null,ee&&(0,c.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Prix estime: ",Math.max(M[0],Z?Number(Z.min_price):0)," TND - Duree ",ee.hours," h"]})]}),(0,c.jsxs)("div",{className:"px-4",children:[(0,c.jsx)(rN,{value:M,onValueChange:T,min:10,max:200,step:5,className:"mb-4"}),(0,c.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,c.jsx)("span",{children:"10 TND"}),(0,c.jsx)("span",{children:"200 TND"})]})]}),K.price&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),K.price]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e_,{htmlFor:"description",children:"Notes additionnelles (optionnel)"}),(0,c.jsx)(tZ,{id:"description",placeholder:"Instructions pour le gardien...",value:z,onChange:e=>D(e.target.value),rows:3})]})]})]}),2===n&&(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(tg,{className:"h-12 w-12",children:[(0,c.jsx)(tb,{src:Q?.image||"/placeholder.svg"}),(0,c.jsx)(tv,{children:Q?.name?.[0]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:Q?.name}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:Q?.breed})]})]}),(0,c.jsx)("div",{className:"h-px bg-border"}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:Z?(0,c.jsx)(tS,{type:Z.name.toLowerCase().includes("walk")?"walking":Z.name.toLowerCase().includes("taxi")?"taxi":Z.name.toLowerCase().includes("emergency")?"emergency":"sitting",className:"text-primary"}):null}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:Z?Z.name:2===(a=y)?"Promenade":3===a?"Pet Taxi":4===a?"Urgence":1===a?"Garde a domicile":"Service"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type de service"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tT,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium",children:[N?new Date(N).toLocaleDateString():"-"," - ",S?new Date(S).toLocaleDateString():"-"]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plage de dates"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(eJ,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:E.address}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tz,{size:20,className:"text-accent"})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium text-accent",children:[M[0]," TND"]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ton offre"})]})]}),z&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"h-px bg-border"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:z})]})]})})]}),(0,c.jsx)("div",{className:"p-4 border-t border-border",children:(0,c.jsx)(ez,{onClick:()=>{let e=et(n);J(t=>({...t,...e})),Object.values(e).some(Boolean)||(n<rZ.length-1?i(n+1):er())},className:"w-full",size:"lg",disabled:!Object.values(et(n)).every(e=>!e)||P,children:n===rZ.length-1?"Envoyer la demande":"Continuer"})})]})}function r1({onBack:e,onUpdated:t}){let[r,s]=(0,d.useState)([]),[a,n]=(0,d.useState)(!1),[i,l]=(0,d.useState)(null),[o,u]=(0,d.useState)(null),[m,h]=(0,d.useState)({name:"",species:"dog",breed:"",age:void 0,temperament:"",medical_notes:"",weight:"",height:"",behaviors:""}),[x,p]=(0,d.useState)({}),f=({field:e})=>!x[e]&&m[e]?(0,c.jsx)(eH,{className:"w-4 h-4 text-green-600","aria-hidden":"true"}):null,g=async()=>{n(!0),l(null);try{let e=await rO();s(e||[]),t?.(e||[])}catch(e){console.error(e),l("Impossible de charger vos animaux.")}finally{n(!1)}};(0,d.useEffect)(()=>{g()},[]);let b=e=>{e?(u(String(e.id)),h({...e,weight:v(e.medical_notes,"Poids"),height:v(e.medical_notes,"Taille"),behaviors:e.temperament||""})):(u("new"),h({name:"",species:"dog",breed:"",age:void 0,weight:"",height:"",behaviors:"",temperament:"",medical_notes:""}))},v=(e,t)=>{if(!e)return"";let r=e.split("\n").find(e=>e.toLowerCase().startsWith(t.toLowerCase()));return r?r.split(":").slice(1).join(":").trim():""},j=()=>{let e=[];return m.weight&&e.push(`Poids: ${m.weight}`),m.height&&e.push(`Taille: ${m.height}`),m.medical_notes&&e.push(m.medical_notes),e.join("\n")},y=async()=>{let e={};if(m.name||(e.name="Nom requis"),m.species||(e.species="Type requis"),p(e),Object.values(e).some(Boolean))return void l("Corrige les champs en rouge.");n(!0),l(null);try{if(o&&"new"!==o){let e=await rq(o,{name:m.name,species:m.species,breed:m.breed,age:m.age?Number(m.age):void 0,temperament:m.behaviors||m.temperament,medical_notes:j()}),a=r.map(t=>String(t.id)===String(e.id)?e:t);s(a),t?.(a)}else{let e=await rF({name:m.name,species:m.species,breed:m.breed,age:m.age?Number(m.age):void 0,temperament:m.behaviors,medical_notes:j()}),a=[...r,e];s(a),t?.(a)}u(null),h({name:"",species:"dog",breed:"",age:void 0,weight:"",height:"",behaviors:"",temperament:"",medical_notes:""})}catch(e){console.error(e),l("Sauvegarde impossible.")}finally{n(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:e,className:"p-2 hover:bg-secondary rounded-lg",children:"←"}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:"Mes animaux"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gérer les profils de vos compagnons."})]}),(0,c.jsx)(ez,{size:"sm",onClick:()=>b(),children:"Ajouter un animal"})]}),(0,c.jsxs)("div",{className:"p-4 space-y-3 overflow-y-auto",children:[a&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."}),i&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:i}),r.map(e=>(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 flex gap-3 items-center",children:[(0,c.jsxs)(tg,{className:"h-14 w-14",children:[(0,c.jsx)(tb,{src:e.image||"/petAvatar.png"}),(0,c.jsx)(tv,{children:e.name?.[0]??(0,c.jsx)(eO,{})})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:e.name}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.breed||e.species||e.type)??""," · ",e.age??"-"," ans"]})]}),(0,c.jsx)(ez,{variant:"outline",size:"sm",onClick:()=>b(e),children:"Modifier"})]}),e.temperament&&(0,c.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Comportement: ",e.temperament]}),e.medical_notes&&(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",e.medical_notes]})]})]})},e.id)),0===r.length&&!a&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré."}),null!==o&&(0,c.jsx)(te,{className:"border-primary/50",children:(0,c.jsxs)(ts,{className:"p-4 space-y-3",children:[(0,c.jsx)("h2",{className:"font-semibold",children:"new"===o?"Nouvel animal":"Modifier l'animal"}),i&&(0,c.jsx)("p",{className:"text-sm text-destructive",children:i}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{children:"Nom"}),(0,c.jsx)(f,{field:"name"})]}),(0,c.jsx)(eD,{value:m.name,onChange:e=>h({...m,name:e.target.value}),onBlur:()=>p(e=>({...e,name:m.name?"":"Nom requis"})),"aria-invalid":!!x.name}),x.name&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),x.name]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)(e_,{children:"Type"}),(0,c.jsx)(f,{field:"species"})]}),(0,c.jsxs)("select",{className:"w-full rounded-md border bg-card p-2 text-sm",value:m.species||"dog",onChange:e=>h({...m,species:e.target.value}),onBlur:()=>p(e=>({...e,species:m.species?"":"Type requis"})),"aria-invalid":!!x.species,children:[(0,c.jsx)("option",{value:"dog",children:"Chien"}),(0,c.jsx)("option",{value:"cat",children:"Chat"}),(0,c.jsx)("option",{value:"other",children:"Autre"})]}),x.species&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),x.species]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(e_,{children:"Race"}),(0,c.jsx)(eD,{value:m.breed,onChange:e=>h({...m,breed:e.target.value})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(e_,{children:"Âge"}),(0,c.jsx)(eD,{type:"number",value:m.age,onChange:e=>h({...m,age:e.target.value?Number(e.target.value):void 0})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(e_,{children:"Poids"}),(0,c.jsx)(eD,{value:m.weight,onChange:e=>h({...m,weight:e.target.value})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(e_,{children:"Taille"}),(0,c.jsx)(eD,{value:m.height,onChange:e=>h({...m,height:e.target.value})})]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Comportement"}),(0,c.jsx)(tZ,{value:m.behaviors,onChange:e=>h({...m,behaviors:e.target.value}),placeholder:"Amical, actif, ok chats..."})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Notes médicales / besoins"}),(0,c.jsx)(tZ,{value:m.medical_notes,onChange:e=>h({...m,medical_notes:e.target.value}),placeholder:"Allergies, médicaments, etc."})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{onClick:y,disabled:a,children:"Enregistrer"}),(0,c.jsx)(ez,{variant:"ghost",onClick:()=>u(null),disabled:a,children:"Annuler"})]})]})})]})]})}let r2=eI("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),r4=eI("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function r3(e,t){let r=tq(e,t?.in);return r.setHours(0,0,0,0),r}function r5(e,t){let r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??tF.weekStartsOn??tF.locale?.options?.weekStartsOn??0,s=tq(e,t?.in),a=s.getDay();return s.setDate(s.getDate()-(7*(a<r)+a-r)),s.setHours(0,0,0,0),s}function r6(e,t){return r5(e,{...t,weekStartsOn:1})}function r8(e,t){let r=tq(e,t?.in),s=r.getFullYear(),a=tP(r,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);let n=r6(a),i=tP(r,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);let l=r6(i);return r.getTime()>=n.getTime()?s+1:r.getTime()>=l.getTime()?s:s-1}function r9(e,t){let r=tq(e,t?.in),s=r.getFullYear(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??tF.firstWeekContainsDate??tF.locale?.options?.firstWeekContainsDate??1,n=tP(t?.in||e,0);n.setFullYear(s+1,0,a),n.setHours(0,0,0,0);let i=r5(n,t),l=tP(t?.in||e,0);l.setFullYear(s,0,a),l.setHours(0,0,0,0);let o=r5(l,t);return+r>=+i?s+1:+r>=+o?s:s-1}function r7(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let se={y(e,t){let r=e.getFullYear(),s=r>0?r:1-r;return r7("yy"===t?s%100:s,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):r7(r+1,2)},d:(e,t)=>r7(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>r7(e.getHours()%12||12,t.length),H:(e,t)=>r7(e.getHours(),t.length),m:(e,t)=>r7(e.getMinutes(),t.length),s:(e,t)=>r7(e.getSeconds(),t.length),S(e,t){let r=t.length;return r7(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},st={G:function(e,t,r){let s=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return se.y(e,t)},Y:function(e,t,r,s){let a=r9(e,s),n=a>0?a:1-a;return"YY"===t?r7(n%100,2):"Yo"===t?r.ordinalNumber(n,{unit:"year"}):r7(n,t.length)},R:function(e,t){return r7(r8(e),t.length)},u:function(e,t){return r7(e.getFullYear(),t.length)},Q:function(e,t,r){let s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return r7(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){let s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return r7(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){let s=e.getMonth();switch(t){case"M":case"MM":return se.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){let s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return r7(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){let a,n,i,l,o=Math.round((r5(a=tq(e,s?.in),s)-(n=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??tF.firstWeekContainsDate??tF.locale?.options?.firstWeekContainsDate??1,i=r9(a,s),(l=tP(s?.in||a,0)).setFullYear(i,0,n),l.setHours(0,0,0,0),r5(l,s)))/6048e5)+1;return"wo"===t?r.ordinalNumber(o,{unit:"week"}):r7(o,t.length)},I:function(e,t,r){let s,a,n,i=Math.round((r6(s=tq(e,void 0))-(a=r8(s,void 0),(n=tP(s,0)).setFullYear(a,0,4),n.setHours(0,0,0,0),r6(n)))/6048e5)+1;return"Io"===t?r.ordinalNumber(i,{unit:"week"}):r7(i,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):se.d(e,t)},D:function(e,t,r){let s,a,n=function(e,t,r){let[s,a]=tU(void 0,e,t),n=r3(s),i=r3(a);return Math.round((n-t$(n)-(i-t$(i)))/864e5)}(s=tq(e,void 0),((a=tq(s,void 0)).setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a))+1;return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):r7(n,t.length)},E:function(e,t,r){let s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){let a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return r7(n,2);case"eo":return r.ordinalNumber(n,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){let a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return r7(n,t.length);case"co":return r.ordinalNumber(n,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){let s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return r7(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){let s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){let s,a=e.getHours();switch(s=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){let s,a=e.getHours();switch(s=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return se.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):se.H(e,t)},K:function(e,t,r){let s=e.getHours()%12;return"Ko"===t?r.ordinalNumber(s,{unit:"hour"}):r7(s,t.length)},k:function(e,t,r){let s=e.getHours();return(0===s&&(s=24),"ko"===t)?r.ordinalNumber(s,{unit:"hour"}):r7(s,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):se.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):se.s(e,t)},S:function(e,t){return se.S(e,t)},X:function(e,t,r){let s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return ss(s);case"XXXX":case"XX":return sa(s);default:return sa(s,":")}},x:function(e,t,r){let s=e.getTimezoneOffset();switch(t){case"x":return ss(s);case"xxxx":case"xx":return sa(s);default:return sa(s,":")}},O:function(e,t,r){let s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sr(s,":");default:return"GMT"+sa(s,":")}},z:function(e,t,r){let s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sr(s,":");default:return"GMT"+sa(s,":")}},t:function(e,t,r){return r7(Math.trunc(e/1e3),t.length)},T:function(e,t,r){return r7(+e,t.length)}};function sr(e,t=""){let r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),n=s%60;return 0===n?r+String(a):r+String(a)+t+r7(n,2)}function ss(e,t){return e%60==0?(e>0?"-":"+")+r7(Math.abs(e)/60,2):sa(e,t)}function sa(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+r7(Math.trunc(r/60),2)+t+r7(r%60,2)}let sn=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},si=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},sl={p:si,P:(e,t)=>{let r,s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return sn(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",sn(a,t)).replace("{{time}}",si(n,t))}},so=/^D+$/,sc=/^Y+$/,sd=["D","DD","YY","YYYY"],su=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sh=/^'([^]*?)'?$/,sx=/''/g,sp=/[a-zA-Z]/;function sf(e,t,r){let s=r?.locale??tF.locale??tO,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??tF.firstWeekContainsDate??tF.locale?.options?.firstWeekContainsDate??1,n=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??tF.weekStartsOn??tF.locale?.options?.weekStartsOn??0,i=tq(e,r?.in);if(!(i instanceof Date||"object"==typeof i&&"[object Date]"===Object.prototype.toString.call(i))&&"number"!=typeof i||isNaN(+tq(i)))throw RangeError("Invalid time value");let l=t.match(sm).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,sl[t])(e,s.formatLong):e}).join("").match(su).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(sh))?t[1].replace(sx,"'"):r}}if(st[t])return{isToken:!0,value:e};if(t.match(sp))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(l=s.localize.preprocessor(i,l));let o={firstWeekContainsDate:a,weekStartsOn:n,locale:s};return l.map(a=>{if(!a.isToken)return a.value;let n=a.value;return(!r?.useAdditionalWeekYearTokens&&sc.test(n)||!r?.useAdditionalDayOfYearTokens&&so.test(n))&&function(e,t,r){var s,a,n;let i,l=(s=e,a=t,n=r,i="Y"===s[0]?"years":"days of the month",`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${a}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(l),sd.includes(e))throw RangeError(l)}(n,t,String(e)),(0,st[n[0]])(i,n,s.localize,o)}).join("")}function sg({booking:e,onBack:t,onComplete:r,isSitter:s=!1}){let[a,n]=(0,d.useState)(e.updates||[]),[i,l]=(0,d.useState)(!1),[o,u]=(0,d.useState)({type:"note",content:"",photoUrl:""}),[m,h]=(0,d.useState)(!1),[x,p]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null),[b,v]=(0,d.useState)(null),j=(e,t)=>{if(!e)return"--";let r=new Date(e);return Number.isNaN(r.getTime())?"--":sf(r,t)},y=e.location||{},w="number"==typeof y.lat?y.lat:36.8065,N="number"==typeof y.lng?y.lng:10.1815,k=y.address||("string"==typeof y?y:`Lat ${w.toFixed(3)}, Lng ${N.toFixed(3)}`)||"Localisation inconnue",S=e.sitterName?e.sitterName[0]:"?",C=e.petName||"Animal",M=e.sitterName||"Sitter",T=e.price??e.agreedPrice??0,z=tC(e.serviceType),D=`${j(e.dateStart,"dd/MM/yyyy")} - ${j(e.dateEnd,"dd/MM/yyyy")}`,P=s&&["active","in-progress"].includes((e.status||"").toLowerCase()),A=async()=>{l(!0);try{let t=await rV(e.id);n(t)}catch(e){console.error("Failed to load updates",e)}finally{l(!1)}};(0,d.useEffect)(()=>{A()},[e.id]);let _=async t=>{if(t){p(!0),g(null),v(null);try{let r=await rK(e.id,t);r?.url?(u(e=>({...e,photoUrl:r.url})),v("Photo ajoutée")):g("Échec de l'upload")}catch(e){console.error(e),g("Échec de l'upload")}finally{p(!1)}}},E=async()=>{h(!0);try{await rX(e.id,{type:o.type,content:o.content,photoUrl:o.photoUrl}),await A(),u({type:"note",content:"",photoUrl:""})}catch(e){console.error("Failed to add update",e)}finally{h(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:t,className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:"Réservation active"}),(0,c.jsx)(tj,{status:e.status,size:"sm"})]})]}),(0,c.jsx)("div",{className:"h-56 relative rounded-b-2xl overflow-hidden shadow-inner",children:(0,c.jsx)(e8,{markers:[{id:e.sitterId,lat:w,lng:N,type:"sitter",label:e.sitterName}]})}),(0,c.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4 bg-background",children:[(0,c.jsx)(te,{className:"shadow-md",children:(0,c.jsx)(ts,{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(tg,{className:"h-14 w-14",children:[(0,c.jsx)(tb,{src:e.sitterAvatar||"/sitterAvatar.png"}),(0,c.jsx)(tv,{children:S})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"font-semibold",children:M}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["S'occupe de ",C]})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{variant:"outline",size:"icon",className:"rounded-full bg-transparent",children:(0,c.jsx)(r2,{size:18})}),(0,c.jsx)(ez,{variant:"outline",size:"icon",className:"rounded-full bg-transparent",children:(0,c.jsx)(tV,{size:18})})]})]})})}),(0,c.jsx)(te,{className:"shadow-sm",children:(0,c.jsxs)(ts,{className:"p-4 space-y-3",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tS,{type:e.serviceType,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:z}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Service"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tT,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:D}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Durée"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(e0,{size:20,className:"text-accent"})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium",children:[T," TND"]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tarif convenu"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(eJ,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:k}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]})]})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold mb-3",children:"Mises à jour"}),i&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."}),(0,c.jsxs)("div",{className:"space-y-4",children:[a.map((e,t)=>(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-primary rounded-full"}),t<a.length-1&&(0,c.jsx)("div",{className:"w-0.5 flex-1 bg-border mt-1"})]}),(0,c.jsxs)("div",{className:"flex-1 pb-4",children:[(0,c.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:j(e.createdAt,"dd/MM/yyyy HH:mm")}),(0,c.jsx)("p",{className:"text-xs font-semibold text-foreground uppercase",children:e.type}),(0,c.jsx)("p",{className:"text-sm",children:e.content||"—"}),e.photoUrl&&(0,c.jsx)("img",{src:e.photoUrl,alt:"Mise à jour",className:"mt-2 rounded-lg w-full max-w-xs object-cover"})]})]},e.id)),0===a.length&&!i&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pas encore de mises à jour."})]})]}),P&&(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-3",children:[(0,c.jsx)("p",{className:"font-semibold",children:"Ajouter une mise à jour"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-sm text-muted-foreground",children:"Type"}),(0,c.jsxs)("select",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:o.type,onChange:e=>u(t=>({...t,type:e.target.value})),children:[(0,c.jsx)("option",{value:"note",children:"Note"}),(0,c.jsx)("option",{value:"feeding",children:"Repas"}),(0,c.jsx)("option",{value:"walking",children:"Promenade"}),(0,c.jsx)("option",{value:"meds",children:"Médicaments"}),(0,c.jsx)("option",{value:"photo",children:"Photo"})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-sm text-muted-foreground",children:"Contenu"}),(0,c.jsx)("textarea",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:o.content,onChange:e=>u(t=>({...t,content:e.target.value})),placeholder:"Ex: Repas pris à 19h, balade de 20 minutes...",rows:3})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-sm text-muted-foreground",children:"Photo"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border bg-card text-sm cursor-pointer hover:bg-secondary",children:[(0,c.jsx)(r4,{size:16}),(0,c.jsx)("span",{children:x?"Upload en cours...":"Choisir un fichier"}),(0,c.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>_(e.target.files?.[0]),disabled:x})]}),(0,c.jsx)("input",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:o.photoUrl,onChange:e=>u(t=>({...t,photoUrl:e.target.value})),placeholder:"Ou collez une URL https://..."}),b&&(0,c.jsx)("p",{className:"text-xs text-success",children:b}),f&&(0,c.jsx)("p",{className:"text-xs text-destructive",children:f})]})]}),(0,c.jsx)(ez,{className:"w-full",onClick:E,disabled:m,children:m?"Envoi...":"Publier"})]})})]}),["in-progress","active"].includes((e.status||"").toLowerCase())&&(0,c.jsx)("div",{className:"p-4 border-t border-border",children:r?(0,c.jsxs)(ez,{className:"w-full",variant:"outline",onClick:()=>r(),children:[(0,c.jsx)(e0,{size:18,className:"mr-2"}),"Terminer et noter"]}):(0,c.jsxs)(ez,{className:"w-full bg-transparent",variant:"outline",children:[(0,c.jsx)(e0,{size:18,className:"mr-2"}),"Laisser un avis après la fin"]})})]})}function sb({targetName:e,targetAvatar:t,petName:r,onSubmit:s,onBack:a}){let[n,i]=(0,d.useState)(0),[l,o]=(0,d.useState)(0),[u,m]=(0,d.useState)(""),[h,x]=(0,d.useState)(null);return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:a,className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)("h1",{className:"font-semibold",children:"Leave a Review"})})]}),(0,c.jsx)("div",{className:"flex-1 p-4",children:(0,c.jsxs)(te,{children:[(0,c.jsxs)(tt,{className:"text-center pb-2",children:[(0,c.jsxs)(tg,{className:"h-20 w-20 mx-auto mb-3",children:[(0,c.jsx)(tb,{src:t||"/happy-person-3.jpeg"}),(0,c.jsx)(tv,{className:"text-xl",children:e[0]})]}),(0,c.jsxs)(tr,{className:"text-lg",children:["How was your experience with ",e,"?"]}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Service for ",r]})]}),(0,c.jsx)(ts,{children:(0,c.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),n<=0)?x("Choisis une note avant d'envoyer."):(x(null),s(n,u))},className:"space-y-6",children:[(0,c.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>(0,c.jsx)("button",{type:"button",onClick:()=>i(e),onMouseEnter:()=>o(e),onMouseLeave:()=>o(0),className:"p-1 transition-transform hover:scale-110",children:(0,c.jsx)(e0,{size:40,className:`transition-colors ${e<=(l||n)?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})},e))}),n>0&&(0,c.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:[5===n&&"Excellent!",4===n&&"Very Good!",3===n&&"Good",2===n&&"Fair",1===n&&"Poor"]}),h&&(0,c.jsx)("p",{className:"text-center text-xs text-destructive",children:h}),(0,c.jsx)("div",{className:"space-y-2",children:(0,c.jsx)(tZ,{placeholder:"Share your experience (optional)...",value:u,onChange:e=>m(e.target.value),rows:4})}),(0,c.jsx)(ez,{type:"submit",className:"w-full",size:"lg",disabled:0===n,children:"Submit Review"})]})})]})})]})}let sv=eI("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sj=eI("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),sy=eI("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function sw({user:e,onLogout:t,onUpdateUser:r}){let{t:s}=(0,tM.useI18n)(),[a,n]=(0,d.useState)("home"),[i,l]=(0,d.useState)(null),[o,u]=(0,d.useState)(!1),[m,h]=(0,d.useState)([]),[x,p]=(0,d.useState)([]),[f,g]=(0,d.useState)([]),[b,v]=(0,d.useState)([]),[j,y]=(0,d.useState)(null),{coords:w}=rQ(),N=async()=>{try{let e=await rE();h(e)}catch(e){console.error("Failed to load sitters",e),h([])}try{let e=await rA();p(e)}catch(e){console.error("Failed to load requests",e),p([])}try{let e=await rW();v(e)}catch(e){console.error("Failed to load bookings",e),v([])}};(0,d.useEffect)(()=>{N()},[]);let k=(0,d.useMemo)(()=>x.filter(e=>{let t="open"===(e.status||"").toLowerCase(),r=b.some(t=>String(t.requestId)===String(e.id));return t&&!r}),[x,b]),S=m.map(e=>{let t=e.lat??e.location?.lat,r=e.lng??e.location?.lng;return t&&r?{id:e.id,lat:t,lng:r,type:"sitter",label:e.name||"Sitter"}:null}).filter(Boolean),C=e=>{l(e),n("view-offers"),r$(e.id).then(g).catch(()=>g([]))},M=async e=>{try{await rG(e.id);let t=await rW();v(t),await N(),n(t&&t.length>0?"active-booking":"home")}catch(e){console.error(e),n("home")}finally{l(null)}},T=async e=>{await rH(e.id).catch(e=>console.error(e)),g(t=>t.filter(t=>t.id!==e.id))};if("create-request"===a)return(0,c.jsx)(r0,{user:e,onClose:()=>n("home"),onSubmit:async()=>{await N(),n("home")},onUpdateUser:r});if("pets"===a)return(0,c.jsx)(r1,{onBack:()=>n("home"),onUpdated:e=>r?.({pets:e})});if("requests-list"===a)return(0,c.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:()=>n("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:s("myRequests")}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[x.length," demandes"]})]})]}),(0,c.jsxs)("div",{className:"p-4 space-y-3",children:[x.map(e=>(0,c.jsx)(tH,{request:e,onClick:()=>C(e)},e.id)),0===x.length&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Aucune demande."})]})]});if("bookings-list"===a)return(0,c.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:()=>n("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:s("bookings")}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b.length," réservations"]})]})]}),(0,c.jsxs)("div",{className:"p-4 space-y-3",children:[b.map(e=>(0,c.jsxs)("div",{className:"p-4 rounded-xl border bg-card shadow-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:e.petName||"Animal"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.sitterName})]}),(0,c.jsx)(tj,{status:e.status,size:"sm"})]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.location?.address||("string"==typeof e.location?e.location:"Localisation inconnue")}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.dateStart?new Date(e.dateStart).toLocaleDateString():""," →"," ",e.dateEnd?new Date(e.dateEnd).toLocaleDateString():""]}),(0,c.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,c.jsx)(ez,{size:"sm",variant:"outline",onClick:()=>{y(e),n("active-booking")},children:"Détails"}),e.status&&("in-progress"===e.status||"active"===e.status.toLowerCase())&&(0,c.jsx)(ez,{size:"sm",onClick:async()=>{await rY(e.id),v(await rW())},children:"Terminer"}),e.status&&"completed"===e.status.toLowerCase()&&(0,c.jsx)(ez,{size:"sm",variant:"secondary",onClick:()=>{y(e),n("review")},children:"Noter le gardien"})]})]},e.id)),0===b.length&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Aucune réservation."})]})]});if("review"===a&&j)return(0,c.jsx)(sb,{targetName:j.sitterName||"Sitter",targetAvatar:j.sitterAvatar,petName:j.petName||"Animal",onSubmit:async(e,t)=>{await rJ(j.id,{rating:e,comment:t}),n("home"),v(await rW()),y(null)},onBack:()=>n("home")});if("active-booking"===a&&(j||b[0])){let e=j||b[0];return(0,c.jsx)(sg,{booking:e,onBack:()=>{y(null),n("home")},onComplete:async()=>{await rY(e.id),v(await rW()),y(e),n("review")}})}return(0,c.jsxs)("div",{className:"h-screen w-full relative overflow-hidden",children:[(0,c.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 p-4 flex items-center justify-between",children:[(0,c.jsx)("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center",children:(0,c.jsx)(sy,{size:20})}),(0,c.jsx)("div",{className:"bg-card px-4 py-2 rounded-full shadow-md",children:(0,c.jsx)("span",{className:"text-sm font-medium",children:"Grand Tunis"})}),(0,c.jsxs)("button",{className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center relative",children:[(0,c.jsx)(sj,{size:20}),(0,c.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-accent rounded-full"})]})]}),o&&(0,c.jsxs)("div",{className:"absolute inset-0 z-50 flex",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>u(!1)}),(0,c.jsxs)("div",{className:"relative w-72 bg-card h-full shadow-xl",children:[(0,c.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("span",{className:"font-semibold",children:s("menu")}),(0,c.jsx)("button",{onClick:()=>u(!1),children:(0,c.jsx)(eG,{size:20})})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(tg,{className:"h-12 w-12",children:[(0,c.jsx)(tb,{src:e?.avatar||"/userAvatar.png"}),(0,c.jsx)(tv,{children:e?.name?.[0]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:e?.name}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Propriétaire"})]})]})]}),(0,c.jsxs)("div",{className:"p-4 space-y-2",children:[(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{u(!1),n("pets")},children:s("myPets")}),(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{u(!1),n("requests-list")},children:s("myRequests")}),(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>void n("bookings-list"),children:s("bookings")}),(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",children:s("settings")}),(0,c.jsx)("button",{onClick:t,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary text-destructive",children:s("logout")})]})]})]}),(0,c.jsx)(e8,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:w||{lat:36.8065,lng:10.1815},markers:S,showRadius:!!w,radiusKm:5}),(0,c.jsx)(ez,{onClick:()=>n("create-request"),className:"fixed w-14 h-14 rounded-full shadow-xl bg-accent hover:bg-accent/90 border border-accent/40 z-50",style:{bottom:"6rem",right:"1.25rem"},size:"icon","aria-label":s("createRequest"),children:(0,c.jsx)(sv,{size:24})}),(0,c.jsx)(e7,{defaultSnap:1,children:"view-offers"===a&&i?(0,c.jsxs)("div",{children:[(0,c.jsxs)("button",{onClick:()=>{n("home"),l(null)},className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[(0,c.jsx)(e$,{size:16}),"Retour aux demandes"]}),(0,c.jsxs)("h2",{className:"text-lg font-semibold mb-1",children:[s("offers")," · ",i.petName]}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:[f.length," gardiens intéressés"]}),(0,c.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,c.jsx)(tX,{offer:e,locationLabel:"string"==typeof i.location?i.location:i.location?.address,onAccept:()=>M(e),onReject:()=>T(e)},e.id))})]}):(0,c.jsxs)("div",{children:[b.length>0&&"in-progress"===b[0].status&&(0,c.jsxs)("button",{onClick:()=>n("active-booking"),className:"w-full mb-4 p-4 bg-accent/10 rounded-xl flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-accent-foreground text-sm font-bold",children:"!"})}),(0,c.jsxs)("div",{className:"flex-1 text-left",children:[(0,c.jsx)("p",{className:"font-medium text-foreground",children:s("activeBooking")}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b[0].sitterName," s'occupe de ",b[0].petName]})]}),(0,c.jsx)(e$,{size:20,className:"rotate-180 text-muted-foreground"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold",children:s("nearSitters")}),(0,c.jsxs)("span",{className:"text-sm text-muted-foreground",children:[m.length," disponibles"]})]}),k.length>0&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Tes demandes en cours"}),(0,c.jsx)("div",{className:"space-y-3",children:k.slice(0,2).map(e=>(0,c.jsx)(tH,{request:e,onClick:()=>C(e),compact:!0},e.id))})]}),(0,c.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-secondary rounded-xl",children:[(0,c.jsxs)(tg,{className:"h-10 w-10",children:[(0,c.jsx)(tb,{src:e.avatar||"/sitterAvatar.png"}),(0,c.jsx)(tv,{children:e.name?.[0]})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,c.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.trustScore||0).toFixed?.(1)," ★ · ",e.reviewCount||0," avis"]})]}),(0,c.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(1+.5*t).toFixed(1)," km"]})]},e.id))})]})})]})}function sN({request:e,onBack:t,onAccept:r}){let[s,a]=(0,d.useState)(!1),[n,i]=(0,d.useState)(e.offeredPrice.toString()),[l,o]=(0,d.useState)(""),[u,m]=(0,d.useState)(!1),[h,x]=(0,d.useState)(null),[p,f]=(0,d.useState)({}),g=e.location||{},b="number"==typeof g.lat?g.lat:36.8065,v="number"==typeof g.lng?g.lng:10.1815,j=g.address||"Localisation inconnue",y=e.petName?e.petName[0]:"?",w=e.ownerName?e.ownerName[0]:"?",N=e.dateStart?new Date(e.dateStart):null,k=e.dateEnd?new Date(e.dateEnd):null,S=N&&!Number.isNaN(N.getTime())?sf(N,"MMM d, h:mm a"):"Date inconnue",C=k&&!Number.isNaN(k.getTime())?sf(k,"MMM d, h:mm a"):"Date inconnue",M=async()=>{m(!0),x(null);try{let t=Number.parseFloat(n),s={};if(Number.isNaN(t)?s.price="Montant invalide":t<e.offeredPrice&&(s.price="Pas en dessous du prix demandé"),f(s),Object.values(s).some(Boolean))return void m(!1);await rU(e.id,{price:Number.parseFloat(n),message:l}),r()}catch(e){console.error("Failed to send offer",e),x("string"==typeof e?.message?e.message:"Impossible d'envoyer la contre-offre. Vérifie le prix ou réessaie.")}finally{m(!1)}},T=async()=>{m(!0),x(null);try{await rU(e.id,{price:e.offeredPrice,message:""}),r()}catch(e){console.error("Failed to submit offer",e),x("string"==typeof e?.message?e.message:"Impossible d'envoyer l'offre. Tu as peut-être déjà proposé.")}finally{m(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:t,className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:"Détail de la demande"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:tC(e.serviceType)})]})]}),(0,c.jsx)("div",{className:"h-48 relative",children:(0,c.jsx)(e8,{center:{lat:b,lng:v},markers:[{id:e.id,lat:b,lng:v,type:"request",label:e.petName}]})}),(0,c.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[(0,c.jsx)(te,{children:(0,c.jsx)(ts,{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-start gap-4",children:[(0,c.jsxs)(tg,{className:"h-16 w-16",children:[(0,c.jsx)(tb,{src:e.petImage||"/happy-dog-playing.jpeg",alt:e.petName}),(0,c.jsx)(tv,{children:y})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:e.petName}),(0,c.jsx)("p",{className:"text-muted-foreground capitalize",children:e.petType}),(0,c.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,c.jsxs)(tg,{className:"h-6 w-6",children:[(0,c.jsx)(tb,{src:e.ownerAvatar||"/userAvatar.png"}),(0,c.jsx)(tv,{children:w})]}),(0,c.jsx)("span",{className:"text-sm text-muted-foreground",children:e.ownerName})]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 text-2xl font-bold text-accent",children:[(0,c.jsx)(tz,{size:24}),(0,c.jsx)("span",{children:e.offeredPrice})]}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:"TND proposé"})]})]})})}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tS,{type:e.serviceType,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:tC(e.serviceType)}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type de service"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(tT,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium",children:[S," - ",C]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date & Heure"})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,c.jsx)(eJ,{size:20,className:"text-primary"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:j}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]})]})}),e.description&&(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4",children:[(0,c.jsx)("h3",{className:"font-medium mb-2",children:"Notes complémentaires"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})}),s&&(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-4",children:[(0,c.jsx)("h3",{className:"font-medium",children:"Contre-offre"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e_,{htmlFor:"price",children:"Prix (TND)"}),(0,c.jsx)(eD,{id:"price",type:"number",value:n,onChange:e=>i(e.target.value),min:10,onBlur:()=>{let t=Number.parseFloat(n);f(r=>({...r,price:Number.isNaN(t)?"Montant invalide":t<e.offeredPrice?"Pas en dessous du prix demandé":""}))},"aria-invalid":!!p.price}),p.price&&(0,c.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,c.jsx)(eW,{className:"w-3 h-3"}),p.price]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e_,{htmlFor:"message",children:"Message (optionnel)"}),(0,c.jsx)(tZ,{id:"message",placeholder:"Présente-toi au propriétaire...",value:l,onChange:e=>o(e.target.value),rows:3})]})]})})]}),(0,c.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[h?(0,c.jsx)("p",{className:"text-sm text-destructive",children:h}):null,s?(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>a(!1),disabled:u,children:"Annuler"}),(0,c.jsx)(ez,{className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:M,disabled:u,children:"Envoyer"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(ez,{variant:"outline",className:"flex-1 bg-transparent",onClick:t,disabled:u,children:"Refuser"}),(0,c.jsxs)(ez,{className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:T,disabled:u,children:["Accepter (",e.offeredPrice," TND)"]})]}),(0,c.jsxs)(ez,{variant:"ghost",className:"w-full",onClick:()=>a(!0),disabled:u,children:[(0,c.jsx)(tV,{size:18,className:"mr-2"}),"Faire une contre-offre"]})]})]})]})}var sk="Switch",[sS,sC]=ta(sk),[sM,sT]=sS(sk),sz=d.forwardRef((e,t)=>{let{__scopeSwitch:r,name:s,checked:a,defaultChecked:n,required:i,disabled:l,value:o="on",onCheckedChange:u,form:m,...h}=e,[p,f]=d.useState(null),g=x(t,e=>f(e)),b=d.useRef(!1),v=!p||m||!!p.closest("form"),[j=!1,y]=t2({prop:a,defaultProp:n,onChange:u});return(0,c.jsxs)(sM,{scope:r,checked:j,disabled:l,children:[(0,c.jsx)(eP.button,{type:"button",role:"switch","aria-checked":j,"aria-required":i,"data-state":s_(j),"data-disabled":l?"":void 0,disabled:l,value:o,...h,ref:g,onClick:t1(e.onClick,e=>{y(e=>!e),v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),v&&(0,c.jsx)(sA,{control:p,bubbles:!b.current,name:s,value:o,checked:j,required:i,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});sz.displayName=sk;var sD="SwitchThumb",sP=d.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,a=sT(sD,r);return(0,c.jsx)(eP.span,{"data-state":s_(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});sP.displayName=sD;var sA=e=>{let{control:t,checked:r,bubbles:s=!0,...a}=e,n=d.useRef(null),i=t3(r),l=t5(t);return d.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==r&&t){let a=new Event("click",{bubbles:s});t.call(e,r),e.dispatchEvent(a)}},[i,r,s]),(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:n,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function s_(e){return e?"checked":"unchecked"}let sE=d.forwardRef(({className:e,...t},r)=>(0,c.jsx)(sz,{className:eM("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,c.jsx)(sP,{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})}));sE.displayName=sz.displayName;let sL=eI("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),sR=eI("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function sI({user:e,onBack:t,onUpdateUser:r}){let{t:s}=(0,tM.useI18n)(),[a,n]=(0,d.useState)(e?.isAvailable??!0),[i,l]=(0,d.useState)(e?.bio||""),[o,u]=(0,d.useState)(e?.servicesOffered||[]),[m,h]=(0,d.useState)(e?.basePrice??""),[x,p]=(0,d.useState)(e?.city||""),[f,g]=(0,d.useState)(!1),[b,v]=(0,d.useState)(null),[j,y]=(0,d.useState)(null),[w,N]=(0,d.useState)([]);(0,d.useEffect)(()=>{(async()=>{try{let e=await rL();if(y(e),n(!!(e.is_available??e.isAvailable)),l(e.bio||""),u(e.services||e.services_offered||e.servicesOffered||[]),h(e.base_price??e.basePrice??""),p(e.city||""),e.id){let t=await rR(e.id);N(Array.isArray(t)?t:[])}}catch(e){console.error("Failed to load profile",e),v("Impossible de charger le profil")}})()},[]);let k=async()=>{g(!0);try{let t=await rI({bio:i,is_available:a,services:o,base_price:""===m?void 0:m,city:x});r({isAvailable:t.is_available??t.isAvailable,bio:t.bio,servicesOffered:t.services||t.services_offered||t.servicesOffered,trustScore:t.trust_score??t.trustScore??e.trustScore,reviewCount:t.review_count??t.reviewCount??e.reviewCount,city:t.city??x})}catch(e){console.error("Failed to save profile",e)}finally{g(!1)}};return(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:t,className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsx)("div",{className:"flex-1",children:(0,c.jsx)("h1",{className:"font-semibold",children:"Mon profil"})}),(0,c.jsx)(ez,{variant:"ghost",size:"icon",onClick:k,disabled:f,children:(0,c.jsx)(sL,{size:18})})]}),(0,c.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,c.jsxs)("div",{className:"p-6 flex flex-col items-center text-center",children:[(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsxs)(tg,{className:"h-24 w-24",children:[(0,c.jsx)(tb,{src:e?.avatar||"/userAvatar.png"}),(0,c.jsx)(tv,{className:"text-2xl",children:e?.name?.[0]})]}),(0,c.jsx)("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground shadow-md",children:(0,c.jsx)(sR,{size:14})})]}),(0,c.jsx)("h2",{className:"text-xl font-semibold",children:e?.name}),(0,c.jsx)("p",{className:"text-muted-foreground mb-3",children:e?.email}),(0,c.jsx)(tY,{score:e?.trustScore??0,reviewCount:e?.reviewCount,size:"lg"}),b?(0,c.jsx)("p",{className:"text-sm text-destructive mt-2",children:b}):null]}),(0,c.jsxs)("div",{className:"px-4 space-y-4 pb-8",children:[(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:"Disponibilité"}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:a?"Visible pour les propriétaires":"Vous ne recevrez pas de nouvelles demandes"})]}),(0,c.jsx)(sE,{checked:a,onCheckedChange:e=>{n(e),r({isAvailable:e})}})]})}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4",children:[(0,c.jsx)("h3",{className:"font-medium mb-2",children:"À propos"}),(0,c.jsx)(tZ,{value:i,onChange:e=>l(e.target.value),placeholder:"Parlez de votre expérience, ville, disponibilités...",rows:3})]})}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-3",children:[(0,c.jsx)("h3",{className:"font-medium mb-3",children:"Services proposés"}),(0,c.jsx)(eD,{value:o.join(", "),onChange:e=>u(e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),placeholder:"Garde à domicile, Promenade, Taxi..."}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Tarif de base (TND)"}),(0,c.jsx)(eD,{type:"number",value:""===m?"":m,onChange:e=>h(""===e.target.value?"":Number(e.target.value)),placeholder:"Ex: 30"})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)(e_,{children:"Ville"}),(0,c.jsx)(eD,{value:x,onChange:e=>p(e.target.value),placeholder:"Ex: Tunis"})]})]})]})}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-primary",children:e?.reviewCount||0}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:s("reviewsCount")})]})}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-primary",children:e?.trustScore?.toFixed(1)||"0.0"}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:s("avgRating")})]})}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-accent",children:j?.completed_count??"—"}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:"Terminées"})]})})]}),(0,c.jsx)(te,{children:(0,c.jsxs)(ts,{className:"p-4 space-y-3",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h3",{className:"font-semibold",children:"Avis"}),(0,c.jsxs)("span",{className:"text-xs text-muted-foreground",children:[w.length," avis"]})]}),0===w.length&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pas encore d'avis."}),w.map(e=>(0,c.jsxs)("div",{className:"border border-border rounded-xl p-3 space-y-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{className:"font-semibold text-sm",children:e.reviewer_name||"Client"}),(0,c.jsxs)("span",{className:"text-xs text-accent font-semibold",children:[e.rating??e.score," ★"]})]}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:e.comment||""}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:e.created_at?new Date(e.created_at).toLocaleDateString():""})]},e.id))]})})]})]})]})}function sO(e){return e*Math.PI/180}let sF=eI("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function sq({user:e,onLogout:t,onUpdateUser:r}){let{t:s}=(0,tM.useI18n)(),[a,n]=(0,d.useState)("home"),[i,l]=(0,d.useState)(null),[o,u]=(0,d.useState)(!1),[m,h]=(0,d.useState)(!1),[x,p]=(0,d.useState)({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),[f,g]=(0,d.useState)([]),[b,v]=(0,d.useState)([]),[j,y]=(0,d.useState)(null),[w,N]=(0,d.useState)(!1),[k,S]=(0,d.useState)(!1),[C,M]=(0,d.useState)(null),{coords:T,loading:z}=rQ(),D=async()=>{S(!0),M(null);try{let[e,t]=await Promise.all([rD(),rW()]);v(t||[]);let r=new Set((t||[]).map(e=>String(e.requestId||e.request_id))),s=(e||[]).filter(e=>"open"===(e.status||"").toLowerCase()&&!r.has(String(e.id)));g(s)}catch(e){console.error("Failed to load open requests",e),M(s("errorLoading")||"Erreur de chargement"),g([])}finally{S(!1)}};(0,d.useEffect)(()=>{D()},[]);let P=(0,d.useMemo)(()=>f.filter(e=>{if(x.serviceTypes.length>0&&!x.serviceTypes.includes(e.serviceType)||e.offeredPrice<x.minPrice||e.offeredPrice>x.maxPrice||x.city&&!("string"==typeof e.location?e.location.toLowerCase():e.location?.address?.toLowerCase()||"").includes(x.city.toLowerCase()))return!1;if(T&&x.maxDistance>0){let r=rS(e.location);if(r){var t;let e,s,a,n,i,l,o;if(e=sO((t={lat:r.lat,lng:r.lng}).lat-T.lat),s=sO(t.lng-T.lng),a=sO(T.lat),n=sO(t.lat),2*Math.atan2(Math.sqrt(o=(i=Math.sin(e/2))*i+Math.cos(a)*Math.cos(n)*(l=Math.sin(s/2))*l),Math.sqrt(1-o))*6371>x.maxDistance)return!1}}return!0}),[f,x,T]),A=P.map(e=>{let t=rS(e.location);return t?{id:e.id,lat:t.lat,lng:t.lng,type:"request",label:e.petName}:null}).filter(Boolean),_=e=>{l(e),n("request-details")};return"request-details"===a&&i?(0,c.jsx)(sN,{request:i,onBack:()=>{n("home"),l(null)},onAccept:()=>{n("home"),l(null),D()}}):"profile"===a?(0,c.jsx)(sI,{user:e,onBack:()=>n("home"),onUpdateUser:r}):"bookings"===a?j?(0,c.jsx)(sg,{booking:j,onBack:()=>y(null),isSitter:!0}):(0,c.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,c.jsx)("button",{onClick:()=>n("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,c.jsx)(e$,{size:20})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h1",{className:"font-semibold",children:s("bookings")}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b.length," ",s("available")??"disponibles"]})]})]}),(0,c.jsxs)("div",{className:"p-4 space-y-3",children:[w&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement du détail..."}),b.map(e=>{let t="string"==typeof e.location?e.location:e.location?.address||s("unknownLocation")||"";return(0,c.jsxs)("button",{className:"w-full text-left p-4 rounded-xl border bg-card shadow-sm hover:shadow-md transition",onClick:async()=>{N(!0);try{let t=await rB(e.id);y(t)}catch(e){console.error("Failed to load booking",e)}finally{N(!1)}},children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,c.jsx)("div",{className:"font-semibold",children:e.petName||"Animal"}),(0,c.jsx)(tj,{status:e.status,size:"sm"})]}),(0,c.jsxs)("div",{className:"text-sm text-muted-foreground",children:[tC(e.serviceType)," · ",t]}),(0,c.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.dateStart?new Date(e.dateStart).toLocaleDateString():""," ",e.dateEnd?new Date(e.dateEnd).toLocaleDateString():""]}),(0,c.jsxs)("div",{className:"text-sm font-semibold mt-1",children:[e.price??e.agreedPrice??0," TND"]})]},e.id)}),0===b.length&&(0,c.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:s("noData")})]})]}):(0,c.jsxs)("div",{className:"h-screen w-full relative overflow-hidden",children:[(0,c.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 p-4 flex items-center justify-between",children:[(0,c.jsx)("button",{onClick:()=>u(!0),className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center",children:(0,c.jsx)(sy,{size:20})}),(0,c.jsxs)("div",{className:"bg-card px-4 py-2 rounded-full shadow-md flex items-center gap-2",children:[(0,c.jsx)("span",{className:`w-2 h-2 rounded-full ${e?.isAvailable?"bg-accent":"bg-muted-foreground"}`}),(0,c.jsx)("span",{className:"text-sm font-medium",children:e?.isAvailable?s("available"):s("unavailable")})]}),(0,c.jsxs)("button",{className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center relative",children:[(0,c.jsx)(sj,{size:20}),(0,c.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-accent rounded-full"})]})]}),o&&(0,c.jsxs)("div",{className:"absolute inset-0 z-50 flex",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>u(!1)}),(0,c.jsxs)("div",{className:"relative w-72 bg-card h-full shadow-xl",children:[(0,c.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("span",{className:"font-semibold",children:s("menu")}),(0,c.jsx)("button",{onClick:()=>u(!1),children:(0,c.jsx)(eG,{size:20})})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)(tg,{className:"h-12 w-12",children:[(0,c.jsx)(tb,{src:e?.avatar||"/sitterAvatar.png"}),(0,c.jsx)(tv,{children:e?.name?.[0]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium",children:e?.name}),(0,c.jsxs)("p",{className:"text-sm text-accent",children:[s("trust"),": ",e?.trustScore?.toFixed?.(1)??"0.0"," · ",s("reviewsCount"),":"," ",e?.reviewCount??0]})]})]})]}),(0,c.jsxs)("div",{className:"p-4 space-y-2",children:[(0,c.jsxs)("button",{onClick:()=>{n("profile"),u(!1)},className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary flex items-center gap-3",children:[(0,c.jsx)(eF,{size:20}),"Mon profil"]}),(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{D(),n("bookings"),u(!1)},children:s("bookings")}),(0,c.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",children:s("settings")}),(0,c.jsx)("button",{onClick:t,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary text-destructive",children:s("logout")})]})]})]}),(0,c.jsx)(e8,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:T||{lat:36.8065,lng:10.1815},markers:A,showRadius:!!T,radiusKm:x.maxDistance,onMarkerClick:e=>{let t=P.find(t=>t.id===e);t&&_(t)}}),(0,c.jsx)(ez,{onClick:()=>h(!m),variant:"outline",className:"absolute top-20 right-4 z-30 bg-card shadow-md",size:"icon",children:(0,c.jsx)(sF,{size:18})}),m&&(0,c.jsxs)("div",{className:"absolute top-32 right-4 z-30 w-72 bg-card rounded-xl shadow-lg p-4 space-y-3",children:[(0,c.jsx)("h3",{className:"font-semibold mb-3",children:"Filtres"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:s("serviceType")}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2",children:[{type:"sitting",icon:ty,label:"Garde maison"},{type:"walking",icon:tw,label:"Promenade"},{type:"taxi",icon:tN,label:"Taxi"},{type:"emergency",icon:tk,label:"Urgence"}].map(({type:e,icon:t,label:r})=>(0,c.jsxs)("button",{onClick:()=>{p(t=>({...t,serviceTypes:t.serviceTypes.includes(e)?t.serviceTypes.filter(t=>t!==e):[...t.serviceTypes,e]}))},className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1.5 transition-colors ${x.serviceTypes.includes(e)?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:[(0,c.jsx)(t,{size:12}),r]},e))})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:s("city")??"Ville"}),(0,c.jsx)("input",{className:"w-full rounded-md border bg-card p-2 text-sm",value:x.city,onChange:e=>p(t=>({...t,city:e.target.value})),placeholder:"Ex: Tunis, La Marsa"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Min TND"}),(0,c.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:x.minPrice,onChange:e=>p(t=>({...t,minPrice:Number(e.target.value)||0}))})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Max TND"}),(0,c.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:x.maxPrice,onChange:e=>p(t=>({...t,maxPrice:Number(e.target.value)||t.maxPrice}))})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:s("distance")??"Distance (km)"}),(0,c.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:x.maxDistance,onChange:e=>p(t=>({...t,maxDistance:Number(e.target.value)||t.maxDistance}))})]}),(0,c.jsx)(ez,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>p({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),children:"Effacer"})]})]}),(0,c.jsxs)(e7,{defaultSnap:1,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold",children:s("openRequests")}),(0,c.jsxs)("span",{className:"text-sm text-muted-foreground",children:[k?s("loading"):`${P.length} disponibles`,z?" ...":""]})]}),C&&(0,c.jsxs)("div",{className:"mb-3 text-sm text-destructive bg-destructive/10 rounded-md p-3",children:[C,(0,c.jsx)(ez,{variant:"link",size:"sm",className:"ml-2 px-0",onClick:()=>void D(),children:s("retry")??"Réessayer"})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[P.map(e=>(0,c.jsx)(tH,{request:e,onClick:()=>_(e)},e.id)),0===P.length&&(0,c.jsxs)("div",{className:"text-center py-8",children:[(0,c.jsx)("p",{className:"text-muted-foreground",children:s("noData")}),(0,c.jsxs)("div",{className:"flex justify-center gap-3 mt-2",children:[(0,c.jsx)(ez,{variant:"outline",size:"sm",onClick:()=>void D(),children:s("refresh")??"Actualiser"}),(0,c.jsx)(ez,{variant:"link",size:"sm",onClick:()=>p({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),children:s("reset")??"Réinitialiser"})]})]})]})]})]})}async function s$(e,t){try{let r=await rk("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),s=await r.json();if(!s.access_token)throw Error("Login successful but no access_token returned by the backend.");return"undefined"!=typeof localStorage&&(s.access_token&&localStorage.setItem("access_token",s.access_token),s.role&&localStorage.setItem("role",s.role)),s}catch(e){throw e}}async function sU(e){let t=(e.role||"").toUpperCase();return await rk("/auth/register",{method:"POST",body:JSON.stringify({full_name:e.name,email:e.email,password:e.password,role:t,city:e.city||"Tunis"})}),{message:"verification_sent"}}async function sG(){return(await rk("/auth/me",{method:"GET"})).json()}function sH(){let[e,t]=(0,d.useState)(null),[r,s]=(0,d.useState)(!0),[a,n]=(0,d.useState)(null);(0,u.useRouter)(),(0,d.useEffect)(()=>{(async()=>{if(!("undefined"!=typeof localStorage?localStorage.getItem("access_token"):null))return s(!1);try{let e=await sG();t({id:String(e.id),name:e.name||e.full_name||"",email:e.email||"",role:"sitter"===(e.role||"owner").toLowerCase()?"sitter":"owner",avatar:e.avatar,trustScore:e.trust_score??e.avg_rating,reviewCount:e.review_count,location:"string"==typeof e.location?{lat:36.8065,lng:10.1815,address:e.location}:e.location})}catch(e){console.error("meApi failed",e),t(null)}finally{s(!1)}})()},[]);let i=async(e,r)=>{n(null);try{await s$(e,r);let s=await sG();t({id:String(s.id),name:s.name||s.full_name||"",email:s.email||"",role:"sitter"===(s.role||"owner").toLowerCase()?"sitter":"owner",avatar:s.avatar,trustScore:s.trust_score??s.avg_rating,reviewCount:s.review_count,location:"string"==typeof s.location?{lat:36.8065,lng:10.1815,address:s.location}:s.location})}catch(e){console.error("login failed",e),n(e?.message||"Login failed"),t(null)}},l=async(e,r,s,a)=>{n(null);try{await sU({name:e,email:r,password:s,role:a});let n=await sG();t({id:String(n.id),name:n.name||n.full_name||"",email:n.email||"",role:"sitter"===(n.role||"owner").toLowerCase()?"sitter":"owner",avatar:n.avatar,trustScore:n.trust_score??n.avg_rating,reviewCount:n.review_count,location:"string"==typeof n.location?{lat:36.8065,lng:10.1815,address:n.location}:n.location})}catch(e){console.error("register failed",e),n(e?.message||"Register failed"),t(null)}},o=()=>t(null),m=e=>{t(t=>t?{...t,...e}:null)};return r?(0,c.jsxs)("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:(0,c.jsx)(eO,{className:"w-7 h-7 text-primary-foreground"})}),(0,c.jsx)("span",{className:"text-2xl font-bold text-foreground",children:"PetCare"})]}),(0,c.jsx)(eU,{className:"w-6 h-6 text-primary animate-spin"})]}):e?"sitter"===e.role?(0,c.jsx)(sq,{user:e,onLogout:o,onUpdateUser:m}):(0,c.jsx)(sw,{user:e,onLogout:o,onUpdateUser:m}):(0,c.jsx)(e2,{onLogin:i,onRegister:l,authError:a??void 0})}e.s(["default",()=>sH],31713)}]);
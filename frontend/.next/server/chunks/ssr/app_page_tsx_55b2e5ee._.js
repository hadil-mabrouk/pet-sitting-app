module.exports=[60350,a=>{"use strict";let b,c;var d,e,f,g,h,i,j=a.i(87924),k=a.i(72131),l=a.i(50944);function m(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function n(...a){return b=>{let c=!1,d=a.map(a=>{let d=m(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():m(a[b],null)}}}}function o(...a){return k.useCallback(n(...a),a)}var p=k.forwardRef((a,b)=>{let{children:c,...d}=a,e=k.Children.toArray(c),f=e.find(s);if(f){let a=f.props.children,c=e.map(b=>b!==f?b:k.Children.count(a)>1?k.Children.only(null):k.isValidElement(a)?a.props.children:null);return(0,j.jsx)(q,{...d,ref:b,children:k.isValidElement(a)?k.cloneElement(a,void 0,c):null})}return(0,j.jsx)(q,{...d,ref:b,children:c})});p.displayName="Slot";var q=k.forwardRef((a,b)=>{let{children:c,...d}=a;if(k.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref);return k.cloneElement(c,{...function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props),ref:b?n(b,g):g})}return k.Children.count(c)>1?k.Children.only(null):null});q.displayName="SlotClone";var r=({children:a})=>(0,j.jsx)(j.Fragment,{children:a});function s(a){return k.isValidElement(a)&&a.type===r}function t(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let u=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,v=(a=new Map,b=null,c)=>({nextPart:a,validators:b,classGroupId:c}),w=[],x=(a,b,c)=>{if(0==a.length-b)return c.classGroupId;let d=a[b],e=c.nextPart.get(d);if(e){let c=x(a,b+1,e);if(c)return c}let f=c.validators;if(null===f)return;let g=0===b?a.join("-"):a.slice(b).join("-"),h=f.length;for(let a=0;a<h;a++){let b=f[a];if(b.validator(g))return b.classGroupId}},y=(a,b)=>{let c=v();for(let d in a)z(a[d],c,d,b);return c},z=(a,b,c,d)=>{let e=a.length;for(let f=0;f<e;f++)A(a[f],b,c,d)},A=(a,b,c,d)=>{"string"==typeof a?B(a,b,c):"function"==typeof a?C(a,b,c,d):D(a,b,c,d)},B=(a,b,c)=>{(""===a?b:E(b,a)).classGroupId=c},C=(a,b,c,d)=>{F(a)?z(a(d),b,c,d):(null===b.validators&&(b.validators=[]),b.validators.push({classGroupId:c,validator:a}))},D=(a,b,c,d)=>{let e=Object.entries(a),f=e.length;for(let a=0;a<f;a++){let[f,g]=e[a];z(g,E(b,f),c,d)}},E=(a,b)=>{let c=a,d=b.split("-"),e=d.length;for(let a=0;a<e;a++){let b=d[a],e=c.nextPart.get(b);e||(e=v(),c.nextPart.set(b,e)),c=e}return c},F=a=>"isThemeGetter"in a&&!0===a.isThemeGetter,G=[],H=(a,b,c,d,e)=>({modifiers:a,hasImportantModifier:b,baseClassName:c,maybePostfixModifierPosition:d,isExternal:e}),I=/\s+/,J=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=J(a[d]))&&(c&&(c+=" "),c+=b);return c},K=[],L=a=>{let b=b=>b[a]||K;return b.isThemeGetter=!0,b},M=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,N=/^\((?:(\w[\w-]*):)?(.+)\)$/i,O=/^\d+\/\d+$/,P=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Q=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,R=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,S=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,U=a=>O.test(a),V=a=>!!a&&!Number.isNaN(Number(a)),W=a=>!!a&&Number.isInteger(Number(a)),X=a=>a.endsWith("%")&&V(a.slice(0,-1)),Y=a=>P.test(a),Z=()=>!0,$=a=>Q.test(a)&&!R.test(a),_=()=>!1,aa=a=>S.test(a),ab=a=>T.test(a),ac=a=>!ae(a)&&!ak(a),ad=a=>ar(a,av,_),ae=a=>M.test(a),af=a=>ar(a,aw,$),ag=a=>ar(a,ax,V),ah=a=>ar(a,at,_),ai=a=>ar(a,au,ab),aj=a=>ar(a,az,aa),ak=a=>N.test(a),al=a=>as(a,aw),am=a=>as(a,ay),an=a=>as(a,at),ao=a=>as(a,av),ap=a=>as(a,au),aq=a=>as(a,az,!0),ar=(a,b,c)=>{let d=M.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},as=(a,b,c=!1)=>{let d=N.exec(a);return!!d&&(d[1]?b(d[1]):c)},at=a=>"position"===a||"percentage"===a,au=a=>"image"===a||"url"===a,av=a=>"length"===a||"size"===a||"bg-size"===a,aw=a=>"length"===a,ax=a=>"number"===a,ay=a=>"family-name"===a,az=a=>"shadow"===a,aA=((a,...b)=>{let c,d,e,f,g=a=>{let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(I),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=0===k.length?"":1===k.length?k[0]:f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.indexOf(s)>-1)continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f};return f=h=>{var i;let j;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=Object.create(null),d=Object.create(null),e=(e,f)=>{c[e]=f,++b>a&&(b=0,d=c,c=Object.create(null))};return{get(a){let b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set(a,b){a in c?c[a]=b:e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c=[],d=0,e=0,f=0,g=a.length;for(let h=0;h<g;h++){let g=a[h];if(0===d&&0===e){if(":"===g){c.push(a.slice(f,h)),f=h+1;continue}if("/"===g){b=h;continue}}"["===g?d++:"]"===g?d--:"("===g?e++:")"===g&&e--}let h=0===c.length?a:a.slice(f),i=h,j=!1;return h.endsWith("!")?(i=h.slice(0,-1),j=!0):h.startsWith("!")&&(i=h.slice(1),j=!0),H(c,j,i,b&&b>f?b-f:void 0)};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.slice(a.length)):H(G,!1,b,void 0,!0)}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(i),sortModifiers:(j=new Map,i.orderSensitiveModifiers.forEach((a,b)=>{j.set(a,1e6+b)}),a=>{let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d],f="["===e[0],g=j.has(e);f||g?(c.length>0&&(c.sort(),b.push(...c),c=[]),b.push(e)):c.push(e)}return c.length>0&&(c.sort(),b.push(...c)),b}),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a;return y(c,b)})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]")){var c;let b,d,e;return -1===(c=a).slice(1,-1).indexOf(":")?void 0:(d=(b=c.slice(1,-1)).indexOf(":"),(e=b.slice(0,d))?"arbitrary.."+e:void 0)}let d=a.split("-"),e=+(""===d[0]&&d.length>1);return x(d,e,b)},getConflictingClassGroupIds:(a,b)=>{if(b){let b=d[a],e=c[a];if(b){if(e){let a=Array(e.length+b.length);for(let b=0;b<e.length;b++)a[b]=e[b];for(let c=0;c<b.length;c++)a[e.length+c]=b[c];return a}return b}return e||w}return c[a]||w}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)},(...a)=>f(((...a)=>{let b,c,d=0,e="";for(;d<a.length;)(b=a[d++])&&(c=J(b))&&(e&&(e+=" "),e+=c);return e})(...a))})(()=>{let a=L("color"),b=L("font"),c=L("text"),d=L("font-weight"),e=L("tracking"),f=L("leading"),g=L("breakpoint"),h=L("container"),i=L("spacing"),j=L("radius"),k=L("shadow"),l=L("inset-shadow"),m=L("text-shadow"),n=L("drop-shadow"),o=L("blur"),p=L("perspective"),q=L("aspect"),r=L("ease"),s=L("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),ak,ae],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[ak,ae,i],z=()=>[U,"full","auto",...y()],A=()=>[W,"none","subgrid",ak,ae],B=()=>["auto",{span:["full",W,ak,ae]},W,ak,ae],C=()=>[W,"auto",ak,ae],D=()=>["auto","min","max","fr",ak,ae],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[U,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[a,ak,ae],J=()=>[...u(),an,ah,{position:[ak,ae]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",ao,ad,{size:[ak,ae]}],N=()=>[X,al,af],O=()=>["","none","full",j,ak,ae],P=()=>["",V,al,af],Q=()=>["solid","dashed","dotted","double"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>[V,X,an,ah],T=()=>["","none",o,ak,ae],$=()=>["none",V,ak,ae],_=()=>["none",V,ak,ae],aa=()=>[V,ak,ae],ab=()=>[U,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Y],breakpoint:[Y],color:[Z],container:[Y],"drop-shadow":[Y],ease:["in","out","in-out"],font:[ac],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Y],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Y],shadow:[Y],spacing:["px",V],text:[Y],"text-shadow":[Y],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",U,ae,ak,q]}],container:["container"],columns:[{columns:[V,ae,ak,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[W,"auto",ak,ae]}],basis:[{basis:[U,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[V,U,"auto","initial","none",ae]}],grow:[{grow:["",V,ak,ae]}],shrink:[{shrink:["",V,ak,ae]}],order:[{order:[W,"first","last","none",ak,ae]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,al,af]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,ak,ag]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",X,ae]}],"font-family":[{font:[am,ae,b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,ak,ae]}],"line-clamp":[{"line-clamp":[V,"none",ak,ag]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",ak,ae]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ak,ae]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[V,"from-font","auto",ak,af]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[V,"auto",ak,ae]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ak,ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ak,ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},W,ak,ae],radial:["",ak,ae],conic:[W,ak,ae]},ap,ai]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:N()}],"gradient-via-pos":[{via:N()}],"gradient-to-pos":[{to:N()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:O()}],"rounded-s":[{"rounded-s":O()}],"rounded-e":[{"rounded-e":O()}],"rounded-t":[{"rounded-t":O()}],"rounded-r":[{"rounded-r":O()}],"rounded-b":[{"rounded-b":O()}],"rounded-l":[{"rounded-l":O()}],"rounded-ss":[{"rounded-ss":O()}],"rounded-se":[{"rounded-se":O()}],"rounded-ee":[{"rounded-ee":O()}],"rounded-es":[{"rounded-es":O()}],"rounded-tl":[{"rounded-tl":O()}],"rounded-tr":[{"rounded-tr":O()}],"rounded-br":[{"rounded-br":O()}],"rounded-bl":[{"rounded-bl":O()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[V,ak,ae]}],"outline-w":[{outline:["",V,al,af]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",k,aq,aj]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",l,aq,aj]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[V,af]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,aq,aj]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[V,ak,ae]}],"mix-blend":[{"mix-blend":[...R(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":R()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[V]}],"mask-image-linear-from-pos":[{"mask-linear-from":S()}],"mask-image-linear-to-pos":[{"mask-linear-to":S()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":S()}],"mask-image-t-to-pos":[{"mask-t-to":S()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":S()}],"mask-image-r-to-pos":[{"mask-r-to":S()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":S()}],"mask-image-b-to-pos":[{"mask-b-to":S()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":S()}],"mask-image-l-to-pos":[{"mask-l-to":S()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":S()}],"mask-image-x-to-pos":[{"mask-x-to":S()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":S()}],"mask-image-y-to-pos":[{"mask-y-to":S()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[ak,ae]}],"mask-image-radial-from-pos":[{"mask-radial-from":S()}],"mask-image-radial-to-pos":[{"mask-radial-to":S()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[V]}],"mask-image-conic-from-pos":[{"mask-conic-from":S()}],"mask-image-conic-to-pos":[{"mask-conic-to":S()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ak,ae]}],filter:[{filter:["","none",ak,ae]}],blur:[{blur:T()}],brightness:[{brightness:[V,ak,ae]}],contrast:[{contrast:[V,ak,ae]}],"drop-shadow":[{"drop-shadow":["","none",n,aq,aj]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",V,ak,ae]}],"hue-rotate":[{"hue-rotate":[V,ak,ae]}],invert:[{invert:["",V,ak,ae]}],saturate:[{saturate:[V,ak,ae]}],sepia:[{sepia:["",V,ak,ae]}],"backdrop-filter":[{"backdrop-filter":["","none",ak,ae]}],"backdrop-blur":[{"backdrop-blur":T()}],"backdrop-brightness":[{"backdrop-brightness":[V,ak,ae]}],"backdrop-contrast":[{"backdrop-contrast":[V,ak,ae]}],"backdrop-grayscale":[{"backdrop-grayscale":["",V,ak,ae]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[V,ak,ae]}],"backdrop-invert":[{"backdrop-invert":["",V,ak,ae]}],"backdrop-opacity":[{"backdrop-opacity":[V,ak,ae]}],"backdrop-saturate":[{"backdrop-saturate":[V,ak,ae]}],"backdrop-sepia":[{"backdrop-sepia":["",V,ak,ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ak,ae]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[V,"initial",ak,ae]}],ease:[{ease:["linear","initial",r,ak,ae]}],delay:[{delay:[V,ak,ae]}],animate:[{animate:["none",s,ak,ae]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,ak,ae]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:$()}],"rotate-x":[{"rotate-x":$()}],"rotate-y":[{"rotate-y":$()}],"rotate-z":[{"rotate-z":$()}],scale:[{scale:_()}],"scale-x":[{"scale-x":_()}],"scale-y":[{"scale-y":_()}],"scale-z":[{"scale-z":_()}],"scale-3d":["scale-3d"],skew:[{skew:aa()}],"skew-x":[{"skew-x":aa()}],"skew-y":[{"skew-y":aa()}],transform:[{transform:[ak,ae,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ab()}],"translate-x":[{"translate-x":ab()}],"translate-y":[{"translate-y":ab()}],"translate-z":[{"translate-z":ab()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ak,ae]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ak,ae]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[V,al,af,ag]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function aB(...a){return aA(t(a))}let aC=(b="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",c={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent/10",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent/10",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},a=>{var d;if((null==c?void 0:c.variants)==null)return t(b,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:e,defaultVariants:f}=c,g=Object.keys(e).map(b=>{let c=null==a?void 0:a[b],d=null==f?void 0:f[b];if(null===c)return null;let g=u(c)||u(d);return e[b][g]}),h=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return t(b,g,null==c||null==(d=c.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)}),aD=k.forwardRef(({className:a,variant:b,size:c,asChild:d=!1,...e},f)=>{let g=d?p:"button";return(0,j.jsx)(g,{className:aB(aC({variant:b,size:c,className:a})),ref:f,...e})});aD.displayName="Button";let aE=k.forwardRef(({className:a,type:b,...c},d)=>(0,j.jsx)("input",{type:b,className:aB("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:d,...c}));aE.displayName="Input",a.i(35112);var aF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,b)=>{let c=k.forwardRef((a,c)=>{let{asChild:d,...e}=a,f=d?p:b;return(0,j.jsx)(f,{...e,ref:c})});return c.displayName=`Primitive.${b}`,{...a,[b]:c}},{}),aG=k.forwardRef((a,b)=>(0,j.jsx)(aF.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));aG.displayName="Label";let aH=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)(aG,{ref:c,className:aB("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...b}));aH.displayName=aG.displayName;let aI=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var aJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let aK=(0,k.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,k.createElement)("svg",{ref:i,...aJ,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:aI("lucide",e),...h},[...g.map(([a,b])=>(0,k.createElement)(a,b)),...Array.isArray(f)?f:[f]])),aL=(a,b)=>{let c=(0,k.forwardRef)(({className:c,...d},e)=>(0,k.createElement)(aK,{ref:e,iconNode:b,className:aI(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},aM=aL("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),aN=aL("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),aO=aL("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),aP=aL("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),aQ=aL("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),aR=aL("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),aS=aL("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),aT=aL("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),aU=a=>a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?"":"Email invalide":"Email requis",aV=a=>a?a.length<6?"6 caracteres minimum":"":"Mot de passe requis",aW=a=>a.trim()?"":"Nom requis";function aX({isOpen:a,onClose:b,initialMode:c,onLogin:d,onRegister:e,authError:f}){let[g,h]=(0,k.useState)("register"===c?"role-select":"login"),[i,l]=(0,k.useState)(null),[m,n]=(0,k.useState)(""),[o,p]=(0,k.useState)(""),[q,r]=(0,k.useState)(""),[s,t]=(0,k.useState)(!1),[u,v]=(0,k.useState)({});(0,k.useEffect)(()=>{a&&(h("register"===c?"role-select":"login"),l(null),n(""),p(""),r(""),v({}))},[a,c]);let w=(0,k.useMemo)(()=>!aU(m)&&!aV(o),[m,o]),x=(0,k.useMemo)(()=>!aW(q)&&!aU(m)&&!aV(o)&&!!i,[q,m,o,i]),y="http://127.0.0.1:5000/auth/google/login",z=i?`${y}?role=${i}`:y,A=async a=>{a.preventDefault();let c={email:aU(m),password:aV(o)};if(v(c),!c.email&&!c.password){t(!0);try{await d(m,o),b()}finally{t(!1)}}},B=async a=>{a.preventDefault();let c={name:aW(q),email:aU(m),password:aV(o)};if(i||(c.role="Choisis un rôle"),v(c),!c.name&&!c.email&&!c.password&&!c.role){t(!0);try{await e(q,m,o,i),b()}finally{t(!1)}}},C=a=>{l(a),h("register"),v(a=>({...a,role:""}))},D=({field:a})=>!u[a]&&("role"===a?i:"name"===a?q:"email"===a?m:o)?(0,j.jsx)(aS,{className:"w-4 h-4 text-green-600","aria-hidden":"true"}):null;return a?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-foreground/50 backdrop-blur-sm",onClick:b}),(0,j.jsxs)("div",{className:"relative bg-card rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden border border-border",style:{backgroundImage:"url(/dog-chchiya.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,j.jsx)("button",{onClick:b,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors z-10","aria-label":"Fermer",children:(0,j.jsx)(aR,{className:"w-4 h-4"})}),(0,j.jsx)("div",{className:"pt-8 pb-4 px-6 text-center border-b border-border bg-white/75 backdrop-blur-sm",children:(0,j.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center",children:(0,j.jsx)(aM,{className:"w-6 h-6 text-primary-foreground"})}),(0,j.jsx)("span",{className:"text-xl font-bold text-foreground",children:"PetCare"})]})}),(0,j.jsxs)("div",{className:"p-6 bg-white/75 backdrop-blur-sm max-h-[80vh] overflow-y-auto",children:["login"===g&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/70 backdrop-blur-sm border border-border shadow-sm",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Bienvenue"}),(0,j.jsx)("p",{className:"text-muted-foreground mt-1",children:"Connecte-toi pour continuer"})]}),(0,j.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{htmlFor:"email",children:"Email"}),(0,j.jsx)(D,{field:"email"})]}),(0,j.jsx)(aE,{id:"email",type:"email",placeholder:"FoulenElFoulani@gmail.com",value:m,onChange:a=>n(a.target.value),onBlur:()=>v(a=>({...a,email:aU(m)})),"aria-invalid":!!u.email,required:!0,className:"h-12"}),u.email&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.email]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{htmlFor:"password",children:"Mot de passe"}),(0,j.jsx)(D,{field:"password"})]}),(0,j.jsx)(aE,{id:"password",type:"password",placeholder:"********",value:o,onChange:a=>p(a.target.value),onBlur:()=>v(a=>({...a,password:aV(o)})),"aria-invalid":!!u.password,required:!0,className:"h-12"}),u.password&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.password]})]}),f?(0,j.jsx)("p",{className:"text-sm text-destructive",children:f}):null,(0,j.jsxs)(aD,{type:"submit",className:"w-full h-12 text-base",disabled:s||!w,children:[s?(0,j.jsx)(aQ,{className:"w-4 h-4 animate-spin mr-2"}):null,"Se connecter"]})]}),(0,j.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,j.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,j.jsx)("span",{className:"px-3 text-xs text-muted-foreground uppercase tracking-wide",children:"ou"}),(0,j.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,j.jsx)("a",{href:z,className:"block mt-4",children:(0,j.jsx)(aD,{type:"button",variant:"outline",className:"w-full h-12 text-base bg-white border-primary text-primary hover:bg-primary/10",children:"Continuer avec Google"})}),(0,j.jsx)("div",{className:"mt-6 text-center",children:(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Pas de compte ?"," ",(0,j.jsx)("button",{onClick:()=>h("role-select"),className:"text-primary hover:underline font-medium",children:"Créer un compte"})]})})]}),"role-select"===g&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/90 backdrop-blur-md border border-border shadow-sm",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Choisis ton rôle"}),(0,j.jsx)("p",{className:"text-muted-foreground mt-1",children:"Propriétaire ou gardien"})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsxs)("button",{onClick:()=>C("owner"),className:"w-full p-4 rounded-xl border-2 border-border bg-white/75 backdrop-blur-sm hover:border-primary hover:bg-primary/5 transition-all text-left flex items-start gap-4 shadow-md",children:[(0,j.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shrink-0",children:(0,j.jsx)(aN,{className:"w-6 h-6 text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"font-semibold text-foreground",children:"Propriétaire"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trouve un gardien de confiance"})]})]}),(0,j.jsxs)("button",{onClick:()=>C("sitter"),className:"w-full p-4 rounded-xl border-2 border-border bg-white/90 backdrop-blur-md hover:border-accent hover:bg-accent/5 transition-all text-left flex items-start gap-4 shadow-md",children:[(0,j.jsx)("div",{className:"w-12 h-12 bg-accent/10 rounded-xl flex items-center justify-center shrink-0",children:(0,j.jsx)(aO,{className:"w-6 h-6 text-accent"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"font-semibold text-foreground",children:"Gardien"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gagne en gardant des animaux"})]})]})]}),(0,j.jsx)("div",{className:"mt-6 text-center",children:(0,j.jsx)("button",{onClick:()=>h("login"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Déjà un compte ? Connexion"})})]}),"register"===g&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{onClick:()=>h("role-select"),className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,j.jsx)(aP,{size:16}),"Retour"]}),(0,j.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-white/90 backdrop-blur-md border border-border shadow-sm",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Créer un compte"}),(0,j.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Inscription en tant que ","owner"===i?"propriétaire":"gardien"]})]}),(0,j.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{htmlFor:"name",children:"Nom complet"}),(0,j.jsx)(D,{field:"name"})]}),(0,j.jsx)(aE,{id:"name",type:"text",placeholder:"Foulen El Foulani",value:q,onChange:a=>r(a.target.value),onBlur:()=>v(a=>({...a,name:aW(q)})),"aria-invalid":!!u.name,required:!0,className:"h-12"}),u.name&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.name]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{htmlFor:"reg-email",children:"Email"}),(0,j.jsx)(D,{field:"email"})]}),(0,j.jsx)(aE,{id:"reg-email",type:"email",placeholder:"FoulenElFoulani@gmail.com",value:m,onChange:a=>n(a.target.value),onBlur:()=>v(a=>({...a,email:aU(m)})),"aria-invalid":!!u.email,required:!0,className:"h-12"}),u.email&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.email]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{htmlFor:"reg-password",children:"Mot de passe"}),(0,j.jsx)(D,{field:"password"})]}),(0,j.jsx)(aE,{id:"reg-password",type:"password",placeholder:"********",value:o,onChange:a=>p(a.target.value),onBlur:()=>v(a=>({...a,password:aV(o)})),"aria-invalid":!!u.password,required:!0,className:"h-12"}),u.password&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.password]})]}),u.role&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),u.role]}),f?(0,j.jsx)("p",{className:"text-sm text-destructive",children:f}):null,(0,j.jsxs)(aD,{type:"submit",className:"w-full h-12 text-base",disabled:s||!x,children:[s?(0,j.jsx)(aQ,{className:"w-4 h-4 animate-spin mr-2"}):null,"S'inscrire"]}),(0,j.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,j.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,j.jsx)("span",{className:"px-3 text-xs text-muted-foreground uppercase tracking-wide",children:"ou"}),(0,j.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,j.jsx)("a",{href:z,className:"block mt-4",children:(0,j.jsx)(aD,{type:"button",variant:"outline",className:"w-full h-12 text-base bg-white border-primary text-primary hover:bg-primary/10",children:"Continuer avec Google"})})]})]})]})]})]}):null}var aY=a.i(83219);let aZ=aL("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),a$=aL("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),a_=aL("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),a0=aL("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),a1=[{title:"Créer une demande",desc:"Choisissez le service, l'adresse et le budget."},{title:"Recevoir des offres",desc:"Les gardiens proches répondent, contre-offres incluses."},{title:"Accepter et réserver",desc:"Une réservation est créée automatiquement."},{title:"Suivi et avis",desc:"Mises à jour puis avis qui renforcent la confiance."}];function a2({onLogin:a,onRegister:b,authError:c}){let[d,e]=(0,k.useState)(!1),[f,g]=(0,k.useState)("login"),[h,i]=(0,k.useState)({distance:!0,available:!0}),l=()=>{g("register"),e(!0)};return(0,j.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,j.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/85 backdrop-blur-md border-b border-border",children:(0,j.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,j.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary rounded-2xl flex items-center justify-center shadow-md",children:(0,j.jsx)(aM,{className:"w-6 h-6 text-primary-foreground"})}),(0,j.jsxs)("div",{className:"leading-tight",children:[(0,j.jsx)("div",{className:"text-lg font-semibold",children:"PetCare"}),(0,j.jsx)("div",{className:"text-xs text-muted-foreground",children:"Taking care of your pet"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(aD,{variant:"ghost",className:"hidden sm:inline-flex",onClick:()=>{g("login"),e(!0)},children:"Connexion"}),(0,j.jsx)(aD,{onClick:l,children:"Créer un compte"})]})]})})}),(0,j.jsx)("section",{className:"pt-28 pb-14 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:(0,j.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-10 items-center",children:[(0,j.jsxs)("div",{className:"space-y-4 text-center lg:text-left",children:[(0,j.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white shadow-sm text-sm text-primary",children:[(0,j.jsx)(aZ,{className:"w-4 h-4"}),"Grand Tunis"]}),(0,j.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold leading-tight",children:"Trouvez le gardien parfait pour votre compagnon"}),(0,j.jsx)("p",{className:"text-lg text-muted-foreground max-w-xl mx-auto lg:mx-0",children:"Des gardiens vérifiés, passionnés et disponibles près de chez vous. Réservez en quelques clics, profitez l'esprit tranquille."}),(0,j.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start",children:[(0,j.jsxs)(aD,{size:"lg",className:"rounded-2xl bg-primary hover:bg-primary/90",onClick:l,children:["Trouver un pet-sitter ",(0,j.jsx)(a_,{className:"w-5 h-5 ml-1"})]}),(0,j.jsx)(aD,{size:"lg",variant:"outline",className:"rounded-2xl border-primary text-primary bg-white",onClick:l,children:"Devenir pet-sitter"})]}),(0,j.jsxs)("div",{className:"flex items-center gap-6 text-sm text-muted-foreground justify-center lg:justify-start",children:[(0,j.jsxs)("div",{className:"flex -space-x-2",children:[(0,j.jsx)("img",{src:"/happy-person-1.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"}),(0,j.jsx)("img",{src:"/happy-person-2.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"}),(0,j.jsx)("img",{src:"/happy-person-3.jpeg",alt:"",className:"w-9 h-9 rounded-full border-2 border-white shadow"})]}),(0,j.jsx)("span",{children:"500+ propriétaires satisfaits"}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(a0,{className:"w-5 h-5 fill-amber-400 text-amber-400"}),(0,j.jsx)("span",{className:"font-semibold",children:"4.9"})]})]})]}),(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("div",{className:"aspect-square rounded-[32px] overflow-hidden bg-[#f5e6d3] shadow-xl border border-border",children:(0,j.jsx)("img",{src:"/dog-fez.png",alt:"",className:"w-full h-full object-contain"})}),(0,j.jsx)("div",{className:"absolute -bottom-5 left-5 glass rounded-2xl p-4 border border-border",children:(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center",children:(0,j.jsx)(a$,{className:"w-6 h-6 text-accent"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-semibold",children:"Sitters vérifiés"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Local & vérifié"})]})]})})]})]})}),(0,j.jsx)("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-secondary",children:(0,j.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,j.jsxs)("div",{className:"text-center mb-10",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold",children:"Nos Services"}),(0,j.jsx)("p",{className:"text-lg text-muted-foreground",children:"Des solutions adaptées à tous vos besoins"})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,j.jsx)(a3,{variant:"garde",title:"Garde à domicile",description:"Sitter chez vous pour prendre soin de votre compagnon dans son environnement familier.",features:["✓ Visite quotidienne","✓ Photos et updates","✓ Soins personnalisés"],priceLabel:"25 TND",priceUnit:"/jour",badge:"Populaire"}),(0,j.jsx)(a3,{variant:"promenade",title:"Promenade",description:"Balade quotidienne pour l'exercice et le bien-être.",features:["✓ 30-60 minutes","✓ Parcours sécurisés","✓ Socialisation"],priceLabel:"15 TND",priceUnit:"/balade"}),(0,j.jsx)(a3,{variant:"urgence",title:"Urgence",description:"Assistance rapide pour les situations imprévues.",features:["✓ Réponse immédiate","✓ Service prioritaire","✓ Gardiens disponibles"],priceLabel:"40 TND",priceUnit:"/intervention",badge:"24/7",pulse:!0}),(0,j.jsx)(a3,{variant:"taxi",title:"Pet Taxi",description:"Transport sécurisé pour vétérinaire ou toilettage.",features:["✓ Véhicule adapté","✓ Chauffeur expérimenté","✓ Porte-à-porte"],priceLabel:"20 TND",priceUnit:"/trajet"})]})]})}),(0,j.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-white/60",children:(0,j.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-8 items-center",children:[(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold",children:"Gardiens proches de chez vous"}),(0,j.jsx)("p",{className:"text-muted-foreground",children:"Carte, sitters vérifiés, notes et distance. Filtrez par proximité dans le Grand Tunis."}),(0,j.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,j.jsx)("button",{onClick:()=>i(a=>({...a,distance:!a.distance})),className:`px-3 py-1 rounded-full transition ${h.distance?"bg-primary/15 text-primary":"bg-muted text-muted-foreground"}`,children:"Filtre distance"}),(0,j.jsx)("button",{onClick:()=>i(a=>({...a,available:!a.available})),className:`px-3 py-1 rounded-full transition ${h.available?"bg-accent/15 text-accent":"bg-muted text-muted-foreground"}`,children:"Sitters disponibles"})]}),(0,j.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Filtres actifs : ",h.distance?"distance":""," ",h.available?"• disponibilités":""]})]}),(0,j.jsxs)("div",{className:"h-80 rounded-3xl overflow-hidden shadow-lg border border-border relative",children:[(0,j.jsx)("img",{src:"/map-of-tunis-tunisia-streets.png",alt:"Tunis map",className:"w-full h-full object-cover"}),(0,j.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background/30 to-transparent pointer-events-none"}),(0,j.jsx)("button",{className:"absolute top-3 right-3 bg-white/90 rounded-full px-3 py-1 text-sm shadow",children:"Filtrer"})]})]})}),(0,j.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8",children:(0,j.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8 items-center",children:[(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold",children:"Profil animal"}),(0,j.jsx)("p",{className:"text-muted-foreground",children:"Carte d'identité complète pour que le gardien sache tout avant la mission."}),(0,j.jsx)("div",{className:"flex flex-wrap gap-2",children:["Amical","Actif","Aime les enfants","Intérieur"].map(a=>(0,j.jsx)("span",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary text-sm shadow-sm",children:a},a))})]}),(0,j.jsxs)("div",{className:"bg-white rounded-3xl p-4 shadow-md border border-border",children:[(0,j.jsxs)("div",{className:"flex gap-4",children:[(0,j.jsx)("img",{src:"/sam.jpg",alt:"",className:"w-28 h-28 rounded-2xl object-cover"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-xl font-semibold",children:"Sam"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Husky • 3y 1m"}),(0,j.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,j.jsxs)("div",{className:"glass rounded-xl p-2",children:[(0,j.jsx)("p",{className:"font-semibold",children:"Poids"}),(0,j.jsx)("p",{className:"text-muted-foreground",children:"5.5 kg"})]}),(0,j.jsxs)("div",{className:"glass rounded-xl p-2",children:[(0,j.jsx)("p",{className:"font-semibold",children:"Hauteur"}),(0,j.jsx)("p",{className:"text-muted-foreground",children:"42 cm"})]})]})]})]}),(0,j.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dressé en laisse","Ok chats","Actif"].map(a=>(0,j.jsx)("span",{className:"px-3 py-1 rounded-full bg-accent/10 text-accent text-xs font-medium",children:a},a))})]})]})}),(0,j.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-background",children:(0,j.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold",children:"Comment ça marche ?"}),(0,j.jsx)("div",{className:"grid md:grid-cols-4 gap-4",children:a1.map((a,b)=>(0,j.jsxs)("div",{className:"rounded-2xl border border-border bg-card p-4 shadow-sm",children:[(0,j.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 text-primary font-bold flex items-center justify-center mb-3",children:b+1}),(0,j.jsx)("p",{className:"font-semibold",children:a.title}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.desc})]},a.title))})]})}),(0,j.jsx)("section",{className:"py-12 px-4 sm:px-6 lg:px-8",children:(0,j.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold",children:"Blog"}),(0,j.jsx)("a",{href:"/blog",className:"text-primary text-sm underline",children:"Voir tout"})]}),(0,j.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:aY.default.slice(0,3).map(a=>(0,j.jsxs)("a",{href:`/blog/${a.slug}`,className:"rounded-2xl border border-border bg-card p-4 shadow-sm hover:shadow-md transition space-y-2",children:[a.image&&(0,j.jsx)("div",{className:"h-40 w-full overflow-hidden rounded-xl bg-muted",children:(0,j.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"})}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.date).toLocaleDateString()}),(0,j.jsx)("p",{className:"text-lg font-semibold",children:a.title}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.excerpt})]},a.slug))})]})}),(0,j.jsx)(aX,{isOpen:d,onClose:()=>e(!1),initialMode:f,onLogin:a,onRegister:(a,c,d)=>b(a,c,d,"owner"),authError:c})]})}function a3({variant:a,title:b,description:c,features:d,priceLabel:e,priceUnit:f,badge:g,pulse:h}){return(0,j.jsxs)("div",{className:`relative rounded-2xl p-5 bg-gradient-to-br ${{garde:"from-[#f5e6d3]",promenade:"from-[#d4e7f7]",urgence:"from-[#ffd4d4]",taxi:"from-[#e8d9f5]"}[a]} to-white border-t-4 shadow-sm hover:-translate-y-2 hover:shadow-lg transition`,style:{borderColor:{garde:"#d4c5a9",promenade:"#a8cde8",urgence:"#ffb3b3",taxi:"#d1b8e8"}[a]},children:[(0,j.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-[radial-gradient(circle_at_top_right,rgba(198,123,92,0.1)_0%,transparent_70%)] pointer-events-none"}),(0,j.jsx)("div",{className:"w-16 h-16 flex items-center justify-center bg-white/60 rounded-xl shadow-sm mb-3 text-primary font-bold text-lg",children:b.charAt(0)}),g&&(0,j.jsx)("span",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold ${h?"bg-destructive text-white animate-pulse uppercase":"bg-gradient-to-r from-[#ffd700] to-[#ffa500] text-[#2c2c2c]"}`,children:g}),(0,j.jsx)("h3",{className:"text-xl font-semibold",children:b}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:c}),(0,j.jsx)("div",{className:"flex flex-col gap-2 text-sm text-muted-foreground mb-4",children:d.map(a=>(0,j.jsx)("span",{children:a},a))}),(0,j.jsxs)("div",{className:"flex items-center justify-between border-t pt-3",children:[(0,j.jsxs)("div",{className:"text-primary font-bold text-lg",children:[e," ",(0,j.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:f})]}),(0,j.jsx)(aD,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",children:"Réserver →"})]})]})}"function"==typeof SuppressedError&&SuppressedError;var a4=(d=h?g:(h=1,g=function a(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){if(b.constructor!==c.constructor)return!1;if(Array.isArray(b)){if((d=b.length)!=c.length)return!1;for(e=d;0!=e--;)if(!a(b[e],c[e]))return!1;return!0}if(b.constructor===RegExp)return b.source===c.source&&b.flags===c.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===c.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===c.toString();if((d=(f=Object.keys(b)).length)!==Object.keys(c).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(c,f[e]))return!1;for(e=d;0!=e--;){var d,e,f,g=f[e];if(!a(b[g],c[g]))return!1}return!0}return b!=b&&c!=c}))&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;let a5="__googleMapsScriptId";(e=i||(i={}))[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE";class a6{constructor({apiKey:a,authReferrerPolicy:b,channel:c,client:d,id:e=a5,language:f,libraries:g=[],mapIds:h,nonce:i,region:j,retries:k=3,url:l="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=a,this.authReferrerPolicy=b,this.channel=c,this.client=d,this.id=e||a5,this.language=f,this.libraries=g,this.mapIds=h,this.nonce=i,this.region=j,this.retries=k,this.url=l,this.version=m,a6.instance){if(!a4(this.options,a6.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(a6.instance.options)}`);return a6.instance}a6.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?i.FAILURE:this.done?i.SUCCESS:this.loading?i.LOADING:i.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let a=this.url;return a+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(a+=`&key=${this.apiKey}`),this.channel&&(a+=`&channel=${this.channel}`),this.client&&(a+=`&client=${this.client}`),this.libraries.length>0&&(a+=`&libraries=${this.libraries.join(",")}`),this.language&&(a+=`&language=${this.language}`),this.region&&(a+=`&region=${this.region}`),this.version&&(a+=`&v=${this.version}`),this.mapIds&&(a+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(a+=`&auth_referrer_policy=${this.authReferrerPolicy}`),a}deleteScript(){let a=document.getElementById(this.id);a&&a.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((a,b)=>{this.loadCallback(c=>{c?b(c.error):a(window.google)})})}importLibrary(a){return this.execute(),google.maps.importLibrary(a)}loadCallback(a){this.callbacks.push(a),this.execute()}setScript(){var a,b;let c,d,e,f,g,h,i,j,k,l,m;if(document.getElementById(this.id))return void this.callback();let n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(a=>!n[a]&&delete n[a]),(null==(b=null==(a=null==window?void 0:window.google)?void 0:a.maps)?void 0:b.importLibrary)||(f="google",g="importLibrary",h=document,j=(i=(i=window)[f]||(i[f]={})).maps||(i.maps={}),k=new Set,l=new URLSearchParams,m=()=>c||(c=new Promise((a,b)=>{var g,i,m,o;return g=this,i=void 0,m=void 0,o=function*(){var g;for(e in yield d=h.createElement("script"),d.id=this.id,l.set("libraries",[...k]+""),n)l.set(e.replace(/[A-Z]/g,a=>"_"+a[0].toLowerCase()),n[e]);l.set("callback",f+".maps.__ib__"),d.src=this.url+"?"+l,j.__ib__=a,d.onerror=()=>c=b(Error("The Google Maps JavaScript API could not load.")),d.nonce=this.nonce||(null==(g=h.querySelector("script[nonce]"))?void 0:g.nonce)||"",h.head.append(d)},new(m||(m=Promise))(function(a,b){function c(a){try{e(o.next(a))}catch(a){b(a)}}function d(a){try{e(o.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof m?e:new m(function(a){a(e)})).then(c,d)}e((o=o.apply(g,i||[])).next())})})),j[g]?console.warn("The Google Maps JavaScript API only loads once. Ignoring:",n):j[g]=(a,...b)=>k.add(a)&&m().then(()=>j[g](a,...b)));let o=this.libraries.map(a=>this.importLibrary(a));o.length||o.push(this.importLibrary("core")),Promise.all(o).then(()=>this.callback(),a=>{let b=new ErrorEvent("error",{error:a});this.loadErrorCallback(b)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(a){if(this.errors.push(a),this.errors.length<=this.retries){let a=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${a} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},a)}else this.onerrorEvent=a,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(a=>{a(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}function a7({apiKey:a="AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:b={lat:36.8065,lng:10.1815},markers:c=[],onMarkerClick:d,onSelectLocation:e,className:f,showRadius:g=!1,radiusKm:h=5}){let i=(0,k.useRef)(null),l=(0,k.useRef)(null),m=(0,k.useRef)([]),n=(0,k.useRef)(null),o=(0,k.useRef)(null),[p,q]=(0,k.useState)(null),r=(0,k.useMemo)(()=>new a6({apiKey:a,version:"weekly",libraries:["places"]}),[a]);return((0,k.useEffect)(()=>{let f=!0;if(!a){console.warn("Missing NEXT_PUBLIC_GOOGLE_MAPS_API_KEY"),q("Clé Google Maps absente");return}return r.importLibrary("maps").then(()=>{f&&i.current&&(q(null),l.current?l.current.setCenter(b):l.current=new google.maps.Map(i.current,{center:b,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),o.current&&(o.current.remove(),o.current=null),e&&l.current&&(o.current=l.current.addListener("click",a=>{a.latLng&&e({lat:a.latLng.lat(),lng:a.latLng.lng()})})),m.current.forEach(a=>a.setMap(null)),m.current=[],c.forEach(a=>{let b=new google.maps.Marker({position:{lat:a.lat,lng:a.lng},map:l.current,label:"request"===a.type?"R":"sitter"===a.type?"S":"U"});if(a.label){let c=new google.maps.InfoWindow({content:a.label});b.addListener("click",()=>{c.open({map:l.current,anchor:b}),d?.(a.id)})}else b.addListener("click",()=>d?.(a.id));m.current.push(b)}),g?(n.current&&n.current.setMap(null),n.current=new google.maps.Circle({map:l.current,center:b,radius:1e3*h,fillColor:"#c65a3a",fillOpacity:.05,strokeColor:"#c65a3a",strokeOpacity:.3,strokeWeight:1})):n.current&&(n.current.setMap(null),n.current=null))}).catch(a=>{console.error("Failed to load Google Maps",a),q("Impossible de charger la carte")}),()=>{f=!1,m.current.forEach(a=>a.setMap(null)),m.current=[],n.current&&(n.current.setMap(null),n.current=null),o.current&&(o.current.remove(),o.current=null)}},[a,b,c,d,e,g,h,r]),p)?(0,j.jsx)("div",{className:aB("relative w-full h-full bg-secondary/50 text-muted-foreground flex items-center justify-center text-sm",f),children:p}):(0,j.jsx)("div",{ref:i,className:aB("relative w-full h-full",f)})}let a8=aL("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);function a9({children:a,snapPoints:b=[.15,.5,.9],defaultSnap:c=0,className:d}){let[e,f]=(0,k.useState)(c),[g,h]=(0,k.useState)(!1),i=(0,k.useRef)(null),l=(0,k.useRef)(0),m=(0,k.useRef)(0),n=`${100*b[e]}%`,o=a=>{h(!0),l.current="touches"in a?a.touches[0].clientY:a.clientY,m.current=b[e]},p=()=>{h(!1)};return(0,j.jsxs)("div",{ref:i,className:aB("absolute bottom-0 left-0 right-0 bg-card rounded-t-3xl shadow-2xl transition-all duration-300 ease-out z-40",g&&"transition-none",d),style:{height:n},children:[(0,j.jsx)("div",{className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing",onTouchStart:o,onTouchEnd:p,onMouseDown:o,onMouseUp:p,onClick:()=>{f(a=>(a+1)%b.length)},children:(0,j.jsx)(a8,{className:"w-8 h-1.5 text-muted-foreground/50"})}),(0,j.jsx)("div",{className:"overflow-y-auto h-[calc(100%-28px)] px-4 pb-8",children:a})]})}let ba=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("div",{ref:c,className:aB("rounded-xl border bg-card text-card-foreground shadow-sm",a),...b}));ba.displayName="Card";let bb=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("div",{ref:c,className:aB("flex flex-col space-y-1.5 p-6",a),...b}));bb.displayName="CardHeader";let bc=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("h3",{ref:c,className:aB("text-2xl font-semibold leading-none tracking-tight",a),...b}));bc.displayName="CardTitle",k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("p",{ref:c,className:aB("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let bd=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("div",{ref:c,className:aB("p-6 pt-0",a),...b}));function be(a,b=[]){let c=[],d=()=>{let b=c.map(a=>k.createContext(a));return function(c){let d=c?.[a]||b;return k.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=k.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=k.useMemo(()=>g,Object.values(g));return(0,j.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=k.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return k.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}function bf(a){let b=k.useRef(a);return k.useEffect(()=>{b.current=a}),k.useMemo(()=>(...a)=>b.current?.(...a),[])}bd.displayName="CardContent",k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("div",{ref:c,className:aB("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter";var bg=globalThis?.document?k.useLayoutEffect:()=>{},bh="Avatar",[bi,bj]=be(bh),[bk,bl]=bi(bh),bm=k.forwardRef((a,b)=>{let{__scopeAvatar:c,...d}=a,[e,f]=k.useState("idle");return(0,j.jsx)(bk,{scope:c,imageLoadingStatus:e,onImageLoadingStatusChange:f,children:(0,j.jsx)(aF.span,{...d,ref:b})})});bm.displayName=bh;var bn="AvatarImage",bo=k.forwardRef((a,b)=>{let{__scopeAvatar:c,src:d,onLoadingStatusChange:e=()=>{},...f}=a,g=bl(bn,c),h=function(a,b){let[c,d]=k.useState("idle");return bg(()=>{if(!a)return void d("error");let c=!0,e=new window.Image,f=a=>()=>{c&&d(a)};return d("loading"),e.onload=f("loaded"),e.onerror=f("error"),e.src=a,b&&(e.referrerPolicy=b),()=>{c=!1}},[a,b]),c}(d,f.referrerPolicy),i=bf(a=>{e(a),g.onImageLoadingStatusChange(a)});return bg(()=>{"idle"!==h&&i(h)},[h,i]),"loaded"===h?(0,j.jsx)(aF.img,{...f,ref:b,src:d}):null});bo.displayName=bn;var bp="AvatarFallback",bq=k.forwardRef((a,b)=>{let{__scopeAvatar:c,delayMs:d,...e}=a,f=bl(bp,c),[g,h]=k.useState(void 0===d);return k.useEffect(()=>{if(void 0!==d){let a=window.setTimeout(()=>h(!0),d);return()=>window.clearTimeout(a)}},[d]),g&&"loaded"!==f.imageLoadingStatus?(0,j.jsx)(aF.span,{...e,ref:b}):null});bq.displayName=bp;let br=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)(bm,{ref:c,className:aB("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));br.displayName=bm.displayName;let bs=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)(bo,{ref:c,className:aB("aspect-square h-full w-full",a),...b}));bs.displayName=bo.displayName;let bt=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)(bq,{ref:c,className:aB("flex h-full w-full items-center justify-center rounded-full bg-muted font-medium text-muted-foreground",a),...b}));function bu({status:a,size:b="md"}){let c={open:{label:"Ouvert",className:"bg-accent/10 text-accent"},accepted:{label:"Acceptée",className:"bg-primary/10 text-primary"},active:{label:"Active",className:"bg-chart-2/20 text-chart-2"},"in-progress":{label:"En cours",className:"bg-chart-2/20 text-chart-2"},scheduled:{label:"Planifiée",className:"bg-primary/10 text-primary"},completed:{label:"Terminée",className:"bg-accent/10 text-accent"},cancelled:{label:"Annulée",className:"bg-destructive/10 text-destructive"}},{label:d,className:e}=c[a]||c.open;return(0,j.jsxs)("span",{className:aB("inline-flex items-center rounded-full font-medium","sm"===b?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1",e),children:[(0,j.jsx)("span",{className:aB("w-1.5 h-1.5 rounded-full mr-1.5","open"===a?"bg-accent":"active"===a||"in-progress"===a?"bg-chart-2":"bg-current")}),d]})}bt.displayName=bq.displayName;let bv=aL("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),bw=aL("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]),bx=aL("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),by=aL("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function bz({type:a,size:b=20,className:c}){let d={sitting:bv,walking:bw,taxi:bx,emergency:by}[["sitting","walking","taxi","emergency"].includes(a)?a:"sitting"]||bv;return(0,j.jsx)(d,{size:b,className:aB(c)})}function bA(a,b="fr"){return({sitting:"Garde à domicile",walking:"Promenade",taxi:"Taxi animaux",emergency:"Urgence"})[a]??"Service"}var bB=a.i(35577);let bC=aL("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),bD=aL("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),bE=Symbol.for("constructDateFrom");function bF(a,b){return"function"==typeof a?a(b):a&&"object"==typeof a&&bE in a?a[bE](b):a instanceof Date?new a.constructor(b):new Date(b)}let bG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function bH(a){return (b={})=>{let c=b.width?String(b.width):a.defaultWidth;return a.formats[c]||a.formats[a.defaultWidth]}}let bI={date:bH({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:bH({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:bH({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},bJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bK(a){return(b,c)=>{let d;if("formatting"===(c?.context?String(c.context):"standalone")&&a.formattingValues){let b=a.defaultFormattingWidth||a.defaultWidth,e=c?.width?String(c.width):b;d=a.formattingValues[e]||a.formattingValues[b]}else{let b=a.defaultWidth,e=c?.width?String(c.width):a.defaultWidth;d=a.values[e]||a.values[b]}return d[a.argumentCallback?a.argumentCallback(b):b]}}function bL(a){return(b,c={})=>{let d,e=c.width,f=e&&a.matchPatterns[e]||a.matchPatterns[a.defaultMatchWidth],g=b.match(f);if(!g)return null;let h=g[0],i=e&&a.parsePatterns[e]||a.parsePatterns[a.defaultParseWidth],j=Array.isArray(i)?function(a,b){for(let c=0;c<a.length;c++)if(b(a[c]))return c}(i,a=>a.test(h)):function(a,b){for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&b(a[c]))return c}(i,a=>a.test(h));return d=a.valueCallback?a.valueCallback(j):j,{value:d=c.valueCallback?c.valueCallback(d):d,rest:b.slice(h.length)}}}let bM={code:"en-US",formatDistance:(a,b,c)=>{let d,e=bG[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"in "+d;else return d+" ago";return d},formatLong:bI,formatRelative:(a,b,c,d)=>bJ[a],localize:{ordinalNumber:(a,b)=>{let c=Number(a),d=c%100;if(d>20||d<10)switch(d%10){case 1:return c+"st";case 2:return c+"nd";case 3:return c+"rd"}return c+"th"},era:bK({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bK({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:a=>a-1}),month:bK({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bK({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bK({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(f={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:a=>parseInt(a,10)},(a,b={})=>{let c=a.match(f.matchPattern);if(!c)return null;let d=c[0],e=a.match(f.parsePattern);if(!e)return null;let g=f.valueCallback?f.valueCallback(e[0]):e[0];return{value:g=b.valueCallback?b.valueCallback(g):g,rest:a.slice(d.length)}}),era:bL({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:bL({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:bL({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:bL({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:bL({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},bN={};function bO(a,b){return bF(b||a,a)}function bP(a){let b=bO(a),c=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()));return c.setUTCFullYear(b.getFullYear()),a-c}function bQ(a,...b){let c=bF.bind(null,a||b.find(a=>"object"==typeof a));return b.map(c)}function bR(a,b){let c=bO(a)-bO(b);return c<0?-1:c>0?1:c}function bS({request:a,onClick:b,compact:c=!1}){var d,e;let{lang:f}=(0,bB.useI18n)(),g=a.petName||a?.pet?.name||"Animal",h=a.petType||a?.pet?.type||a?.pet?.species,i=h?` - ${h}`:"",k="string"==typeof a.location?a.location:a.location?.address||"Localisation inconnue";return(0,j.jsx)(ba,{className:`cursor-pointer hover:shadow-md transition-shadow ${c?"p-2":""}`,onClick:b,children:(0,j.jsx)(bd,{className:c?"p-2":"p-4",children:(0,j.jsxs)("div",{className:"flex items-start gap-3",children:[(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsxs)(br,{className:c?"h-12 w-12":"h-16 w-16",children:[(0,j.jsx)(bs,{src:a.petImage||"/petAvatar.png",alt:g}),(0,j.jsx)(bt,{children:g[0]})]}),(0,j.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-card rounded-full flex items-center justify-center shadow-sm",children:(0,j.jsx)(bz,{type:a.serviceType,size:14,className:"text-primary"})})]}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,j.jsxs)("h3",{className:"font-semibold text-foreground truncate",children:[g,i]}),(0,j.jsx)(bu,{status:a.status,size:"sm"})]}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:[bA(a.serviceType,f)," • ",g,a.petType?` (${a.petType})`:""]}),!c&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-1",children:[(0,j.jsx)(aZ,{size:14}),(0,j.jsx)("span",{className:"truncate",children:k})]}),(0,j.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-2",children:[(0,j.jsx)(bC,{size:14}),(0,j.jsx)("span",{children:a.dateStart?new Date(a.dateStart).toLocaleDateString():""})]})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-accent",children:[(0,j.jsx)(bD,{size:16}),(0,j.jsxs)("span",{children:[a.offeredPrice," TND"]})]}),(0,j.jsx)("span",{className:"text-xs text-muted-foreground",children:a.createdAt?(d=new Date(a.createdAt),e={addSuffix:!0},function(a,b,c){var d;let e,f=c?.locale??bN.locale??bM,g=bR(a,b);if(isNaN(g))throw RangeError("Invalid time value");let h=Object.assign({},c,{addSuffix:c?.addSuffix,comparison:g}),[i,j]=bQ(c?.in,...g>0?[b,a]:[a,b]),k=(d=void 0,a=>{let b=(d?Math[d]:Math.trunc)(a);return 0===b?0:b})((bO(j)-bO(i))/1e3),l=Math.round((k-(bP(j)-bP(i))/1e3)/60);if(l<2)if(c?.includeSeconds)if(k<5)return f.formatDistance("lessThanXSeconds",5,h);else if(k<10)return f.formatDistance("lessThanXSeconds",10,h);else if(k<20)return f.formatDistance("lessThanXSeconds",20,h);else if(k<40)return f.formatDistance("halfAMinute",0,h);else if(k<60)return f.formatDistance("lessThanXMinutes",1,h);else return f.formatDistance("xMinutes",1,h);else if(0===l)return f.formatDistance("lessThanXMinutes",1,h);else return f.formatDistance("xMinutes",l,h);if(l<45)return f.formatDistance("xMinutes",l,h);if(l<90)return f.formatDistance("aboutXHours",1,h);if(l<1440){let a=Math.round(l/60);return f.formatDistance("aboutXHours",a,h)}if(l<2520)return f.formatDistance("xDays",1,h);else if(l<43200){let a=Math.round(l/1440);return f.formatDistance("xDays",a,h)}else if(l<86400)return e=Math.round(l/43200),f.formatDistance("aboutXMonths",e,h);if((e=function(a,b,c){var d,e;let f,g,h,i,[j,k,l]=bQ(void 0,a,a,b),m=bR(k,l),n=Math.abs(function(a,b,c){let[d,e]=bQ(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(k,l));if(n<1)return 0;1===k.getMonth()&&k.getDate()>27&&k.setDate(30),k.setMonth(k.getMonth()-m*n);let o=bR(k,l)===-m;+(f=bO(j,void 0),d=void 0,(g=bO(f,d?.in)).setHours(23,59,59,999),g)==+(e=void 0,i=(h=bO(f,e?.in)).getMonth(),h.setFullYear(h.getFullYear(),i+1,0),h.setHours(23,59,59,999),h)&&1===n&&1===bR(j,l)&&(o=!1);let p=m*(n-o);return 0===p?0:p}(j,i))<12){let a=Math.round(l/43200);return f.formatDistance("xMonths",a,h)}{let a=e%12,b=Math.trunc(e/12);return a<3?f.formatDistance("aboutXYears",b,h):a<9?f.formatDistance("overXYears",b,h):f.formatDistance("almostXYears",b+1,h)}}(d,bF(d,Date.now()),e)):""})]})]})]})})})}let bT=aL("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),bU=aL("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function bV({score:a,reviewCount:b,size:c="md",showLabel:d=!0}){let e=Number.isFinite(a)?a:0,{icon:f,label:g,color:h}={high:{icon:bT,label:"Trusted",color:"text-accent bg-accent/10"},medium:{icon:a$,label:"Verified",color:"text-primary bg-primary/10"},low:{icon:bU,label:"New",color:"text-muted-foreground bg-muted"}}[e>=4.5?"high":e>=3.5?"medium":"low"];return(0,j.jsxs)("div",{className:aB("inline-flex items-center rounded-full font-medium",h,{sm:"text-xs px-1.5 py-0.5 gap-1",md:"text-sm px-2 py-1 gap-1.5",lg:"text-base px-3 py-1.5 gap-2"}[c]),children:[(0,j.jsx)(f,{size:{sm:12,md:14,lg:18}[c]}),d&&(0,j.jsx)("span",{children:g}),(0,j.jsx)("span",{className:"font-semibold",children:e.toFixed(1)}),void 0!==b&&(0,j.jsxs)("span",{className:"text-muted-foreground",children:["(",b,")"]})]})}let bW=aL("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function bX({offer:a,onAccept:b,onReject:c,locationLabel:d}){let e=a.sitterName||"Garde",f=e[0],g="number"==typeof a.distance&&Number.isFinite(a.distance)?`${a.distance.toFixed(1)} km`:null,h="number"==typeof a.offeredPrice&&Number.isFinite(a.offeredPrice)?`${a.offeredPrice} TND`:"-";return(0,j.jsx)(ba,{className:"overflow-hidden",children:(0,j.jsx)(bd,{className:"p-4",children:(0,j.jsxs)("div",{className:"flex items-start gap-3",children:[(0,j.jsxs)(br,{className:"h-14 w-14",children:[(0,j.jsx)(bs,{src:a.sitterAvatar||"/sitterAvatar.png",alt:e}),(0,j.jsx)(bt,{children:f})]}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,j.jsx)("h3",{className:"font-semibold text-foreground",children:e}),(0,j.jsx)(bV,{score:a.sitterTrustScore,reviewCount:a.sitterReviewCount,size:"sm"})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground mb-2",children:[(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(aZ,{size:14}),(0,j.jsx)("span",{children:d||g||"Localisation inconnue"})]}),(0,j.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-accent",children:[(0,j.jsx)(bD,{size:14}),(0,j.jsx)("span",{children:h})]})]}),a.message&&(0,j.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground bg-secondary rounded-lg p-2 mb-3",children:[(0,j.jsx)(bW,{size:14,className:"mt-0.5 flex-shrink-0"}),(0,j.jsx)("p",{className:"line-clamp-2",children:a.message})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",onClick:c,children:"Decline"}),(0,j.jsx)(aD,{size:"sm",className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:b,children:"Accept"})]})]})]})})})}let bY=aL("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),bZ=aL("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),b$=aL("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),b_=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)("textarea",{className:aB("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));function b0(a,[b,c]){return Math.min(c,Math.max(b,a))}function b1(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function b2({prop:a,defaultProp:b,onChange:c=()=>{}}){let[d,e]=function({defaultProp:a,onChange:b}){let c=k.useState(a),[d]=c,e=k.useRef(d),f=bf(b);return k.useEffect(()=>{e.current!==d&&(f(d),e.current=d)},[d,e,f]),c}({defaultProp:b,onChange:c}),f=void 0!==a,g=f?a:d,h=bf(c);return[g,k.useCallback(b=>{if(f){let c="function"==typeof b?b(a):b;c!==a&&h(c)}else e(b)},[f,a,e,h])]}b_.displayName="Textarea";var b3=k.createContext(void 0);function b4(a){let b=k.useRef({value:a,previous:a});return k.useMemo(()=>(b.current.value!==a&&(b.current.previous=b.current.value,b.current.value=a),b.current.previous),[a])}function b5(a){let[b,c]=k.useState(void 0);return bg(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}var b6=["PageUp","PageDown"],b7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],b8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},b9="Slider",[ca,cb,cc]=function(a){let b=a+"CollectionProvider",[c,d]=be(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=k.default.useRef(null),f=k.default.useRef(new Map).current;return(0,j.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let h=a+"CollectionSlot",i=k.default.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=o(b,f(h,c).collectionRef);return(0,j.jsx)(p,{ref:e,children:d})});i.displayName=h;let l=a+"CollectionItemSlot",m="data-radix-collection-item",n=k.default.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=k.default.useRef(null),h=o(b,g),i=f(l,c);return k.default.useEffect(()=>(i.itemMap.set(g,{ref:g,...e}),()=>void i.itemMap.delete(g))),(0,j.jsx)(p,{...{[m]:""},ref:h,children:d})});return n.displayName=l,[{Provider:g,Slot:i,ItemSlot:n},function(b){let c=f(a+"CollectionConsumer",b);return k.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${m}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}(b9),[cd,ce]=be(b9,[cc]),[cf,cg]=cd(b9),ch=k.forwardRef((a,b)=>{let{name:c,min:d=0,max:e=100,step:f=1,orientation:g="horizontal",disabled:h=!1,minStepsBetweenThumbs:i=0,defaultValue:l=[d],value:m,onValueChange:n=()=>{},onValueCommit:o=()=>{},inverted:p=!1,form:q,...r}=a,s=k.useRef(new Set),t=k.useRef(0),u="horizontal"===g,[v=[],w]=b2({prop:m,defaultProp:l,onChange:a=>{let b=[...s.current];b[t.current]?.focus(),n(a)}}),x=k.useRef(v);function y(a,b,{commit:c}={commit:!1}){let g,h=(String(f).split(".")[1]||"").length,j=b0(Math.round((Math.round((a-d)/f)*f+d)*(g=Math.pow(10,h)))/g,[d,e]);w((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,j,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,i*f))return a;{t.current=d.indexOf(j);let b=String(d)!==String(a);return b&&c&&o(d),b?d:a}})}return(0,j.jsx)(cf,{scope:a.__scopeSlider,name:c,disabled:h,min:d,max:e,valueIndexToChangeRef:t,thumbs:s.current,values:v,orientation:g,form:q,children:(0,j.jsx)(ca.Provider,{scope:a.__scopeSlider,children:(0,j.jsx)(ca.Slot,{scope:a.__scopeSlider,children:(0,j.jsx)(u?ck:cl,{"aria-disabled":h,"data-disabled":h?"":void 0,...r,ref:b,onPointerDown:b1(r.onPointerDown,()=>{h||(x.current=v)}),min:d,max:e,inverted:p,onSlideStart:h?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(v,a);y(a,b)},onSlideMove:h?void 0:function(a){y(a,t.current)},onSlideEnd:h?void 0:function(){let a=x.current[t.current];v[t.current]!==a&&o(v)},onHomeKeyDown:()=>!h&&y(d,0,{commit:!0}),onEndKeyDown:()=>!h&&y(e,v.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!h){let c=b6.includes(a.key)||a.shiftKey&&b7.includes(a.key),d=t.current;y(v[d]+f*(c?10:1)*b,d,{commit:!0})}}})})})})});ch.displayName=b9;var[ci,cj]=cd(b9,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ck=k.forwardRef((a,b)=>{let c,{min:d,max:e,dir:f,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:l,onStepKeyDown:m,...n}=a,[p,q]=k.useState(null),r=o(b,a=>q(a)),s=k.useRef(void 0),t=(c=k.useContext(b3),f||c||"ltr"),u="ltr"===t,v=u&&!g||!u&&g;function w(a){let b=s.current||p.getBoundingClientRect(),c=cw([0,b.width],v?[d,e]:[e,d]);return s.current=b,c(a-b.left)}return(0,j.jsx)(ci,{scope:a.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:(0,j.jsx)(cm,{dir:t,"data-orientation":"horizontal",...n,ref:r,style:{...n.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=w(a.clientX);h?.(b)},onSlideMove:a=>{let b=w(a.clientX);i?.(b)},onSlideEnd:()=>{s.current=void 0,l?.()},onStepKeyDown:a=>{let b=b8[v?"from-left":"from-right"].includes(a.key);m?.({event:a,direction:b?-1:1})}})})}),cl=k.forwardRef((a,b)=>{let{min:c,max:d,inverted:e,onSlideStart:f,onSlideMove:g,onSlideEnd:h,onStepKeyDown:i,...l}=a,m=k.useRef(null),n=o(b,m),p=k.useRef(void 0),q=!e;function r(a){let b=p.current||m.current.getBoundingClientRect(),e=cw([0,b.height],q?[d,c]:[c,d]);return p.current=b,e(a-b.top)}return(0,j.jsx)(ci,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,j.jsx)(cm,{"data-orientation":"vertical",...l,ref:n,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);f?.(b)},onSlideMove:a=>{let b=r(a.clientY);g?.(b)},onSlideEnd:()=>{p.current=void 0,h?.()},onStepKeyDown:a=>{let b=b8[q?"from-bottom":"from-top"].includes(a.key);i?.({event:a,direction:b?-1:1})}})})}),cm=k.forwardRef((a,b)=>{let{__scopeSlider:c,onSlideStart:d,onSlideMove:e,onSlideEnd:f,onHomeKeyDown:g,onEndKeyDown:h,onStepKeyDown:i,...k}=a,l=cg(b9,c);return(0,j.jsx)(aF.span,{...k,ref:b,onKeyDown:b1(a.onKeyDown,a=>{"Home"===a.key?(g(a),a.preventDefault()):"End"===a.key?(h(a),a.preventDefault()):b6.concat(b7).includes(a.key)&&(i(a),a.preventDefault())}),onPointerDown:b1(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():d(a)}),onPointerMove:b1(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&e(a)}),onPointerUp:b1(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),f(a))})})}),cn="SliderTrack",co=k.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,e=cg(cn,c);return(0,j.jsx)(aF.span,{"data-disabled":e.disabled?"":void 0,"data-orientation":e.orientation,...d,ref:b})});co.displayName=cn;var cp="SliderRange",cq=k.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,e=cg(cp,c),f=cj(cp,c),g=o(b,k.useRef(null)),h=e.values.length,i=e.values.map(a=>cv(a,e.min,e.max)),l=h>1?Math.min(...i):0,m=100-Math.max(...i);return(0,j.jsx)(aF.span,{"data-orientation":e.orientation,"data-disabled":e.disabled?"":void 0,...d,ref:g,style:{...a.style,[f.startEdge]:l+"%",[f.endEdge]:m+"%"}})});cq.displayName=cp;var cr="SliderThumb",cs=k.forwardRef((a,b)=>{let c=cb(a.__scopeSlider),[d,e]=k.useState(null),f=o(b,a=>e(a)),g=k.useMemo(()=>d?c().findIndex(a=>a.ref.current===d):-1,[c,d]);return(0,j.jsx)(ct,{...a,ref:f,index:g})}),ct=k.forwardRef((a,b)=>{var c,d,e,f,g;let h,i,{__scopeSlider:l,index:m,name:n,...p}=a,q=cg(cr,l),r=cj(cr,l),[s,t]=k.useState(null),u=o(b,a=>t(a)),v=!s||q.form||!!s.closest("form"),w=b5(s),x=q.values[m],y=void 0===x?0:cv(x,q.min,q.max),z=(c=m,(d=q.values.length)>2?`Value ${c+1} of ${d}`:2===d?["Minimum","Maximum"][c]:void 0),A=w?.[r.size],B=A?(e=A,f=y,g=r.direction,i=cw([0,50],[0,h=e/2]),(h-i(f)*g)*g):0;return k.useEffect(()=>{if(s)return q.thumbs.add(s),()=>{q.thumbs.delete(s)}},[s,q.thumbs]),(0,j.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[r.startEdge]:`calc(${y}% + ${B}px)`},children:[(0,j.jsx)(ca.ItemSlot,{scope:a.__scopeSlider,children:(0,j.jsx)(aF.span,{role:"slider","aria-label":a["aria-label"]||z,"aria-valuemin":q.min,"aria-valuenow":x,"aria-valuemax":q.max,"aria-orientation":q.orientation,"data-orientation":q.orientation,"data-disabled":q.disabled?"":void 0,tabIndex:q.disabled?void 0:0,...p,ref:u,style:void 0===x?{display:"none"}:a.style,onFocus:b1(a.onFocus,()=>{q.valueIndexToChangeRef.current=m})})}),v&&(0,j.jsx)(cu,{name:n??(q.name?q.name+(q.values.length>1?"[]":""):void 0),form:q.form,value:x},m)]})});cs.displayName=cr;var cu=a=>{let{value:b,...c}=a,d=k.useRef(null),e=b4(b);return k.useEffect(()=>{let a=d.current,c=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(e!==b&&c){let d=new Event("input",{bubbles:!0});c.call(a,b),a.dispatchEvent(d)}},[e,b]),(0,j.jsx)("input",{style:{display:"none"},...c,ref:d,defaultValue:b})};function cv(a,b,c){return b0(100/(c-b)*(a-b),[0,100])}function cw(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}let cx=k.forwardRef(({className:a,...b},c)=>(0,j.jsxs)(ch,{ref:c,className:aB("relative flex w-full touch-none select-none items-center",a),...b,children:[(0,j.jsx)(co,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,j.jsx)(cq,{className:"absolute h-full bg-primary"})}),(0,j.jsx)(cs,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));async function cy(a,b={}){let c="undefined"==typeof localStorage?null:localStorage.getItem("access_token"),d=new Headers(b.headers||{});"undefined"!=typeof FormData&&b.body instanceof FormData||d.has("Content-Type")||d.set("Content-Type","application/json");let e=a.startsWith("/auth/login")||a.startsWith("/auth/register")||a.startsWith("/auth/google/login")||a.startsWith("/auth/google/callback");c&&!e&&d.set("Authorization",`Bearer ${c}`);let f=await fetch(`http://127.0.0.1:5000${a}`,{...b,headers:d,credentials:"omit"});if(!f.ok){let a=await f.text(),b=null;try{b=JSON.parse(a)}catch{b=null}let c=Error(b?.message||a||`API error ${f.status}`);throw c.status=f.status,c.data=b,c}return f}function cz(a){if(!a)return null;if("object"==typeof a&&"number"==typeof a.lat&&"number"==typeof a.lng)return{lat:a.lat,lng:a.lng,address:a.address};if("string"==typeof a){try{let b=JSON.parse(a);if(b&&"number"==typeof b.lat&&"number"==typeof b.lng)return{lat:b.lat,lng:b.lng,address:b.address}}catch{}let b=a.split(",").map(a=>a.trim());if(b.length>=2){let a=Number(b[0]),c=Number(b[1]);if(!Number.isNaN(a)&&!Number.isNaN(c))return{lat:a,lng:c,address:b.slice(2).join(", ").trim()||void 0}}}return null}function cA(a){return{id:String(a.id),requestId:String(a.request_id??a.requestId??""),sitterId:String(a.sitter_id??a.sitterId??""),sitterName:a.sitter_name||a.sitterName||"Garde",sitterAvatar:a.sitter_avatar||a.sitterAvatar,sitterTrustScore:Number(a.sitter_trust_score??a.sitterTrustScore??0),sitterReviewCount:Number(a.sitter_review_count??a.sitterReviewCount??0),offeredPrice:Number(a.offered_price??a.offeredPrice??0),message:a.message,distance:Number(a.distance??a.distance_km??0),status:a.status||"pending",createdAt:a.created_at||a.createdAt||new Date().toISOString()}}function cB(a){let b=cz(a.location)||{lat:36.8065,lng:10.1815,address:"Tunis, Tunisia"};return{id:String(a.id),requestId:String(a.request_id??a.requestId??""),offerId:String(a.offer_id??a.offerId??""),ownerId:String(a.owner_id??a.ownerId??""),sitterId:String(a.sitter_id??a.sitterId??""),sitterName:a.sitter_name||a.sitterName||"Sitter",sitterAvatar:a.sitter_avatar||a.sitterAvatar,petName:a.pet_name||a.petName||"Animal",petType:a.pet_type||a.petType||"pet",serviceType:cC(a.service_type??a.serviceType??a.service_type_id),location:{lat:b.lat,lng:b.lng,address:b.address||a.location||"Localisation inconnue"},dateStart:a.date_start||a.dateStart||"",dateEnd:a.date_end||a.dateEnd||"",price:Number(a.price??a.agreed_price??a.requested_price??0),status:a.status||"scheduled",updates:Array.isArray(a.updates)?a.updates.map(a=>({id:String(a.id??Math.random()),createdAt:a.created_at||a.timestamp||new Date().toISOString(),type:a.type||"note",content:a.content??a.message??"",photoUrl:a.photo_url??a.photoUrl})):[]}}function cC(a){if("string"==typeof a){let b=a.toLowerCase();return b.includes("walk")?"walking":b.includes("taxi")?"taxi":b.includes("emerg")?"emergency":"sitting"}if("number"==typeof a){if(2===a)return"walking";if(3===a)return"taxi";if(4===a)return"emergency"}return"sitting"}function cD(a){return{id:String(a.id),ownerId:String(a.owner_id??""),ownerName:a.owner_name||a.ownerName||"",ownerAvatar:a.owner_avatar||a.ownerAvatar,petId:String(a.pet_id??a.petId??""),petName:a.pet_name||a.petName||"",petType:a.pet_type||a.petType||"",petImage:a.pet_image||a.petImage,serviceType:cC(a.service_type??a.serviceType??a.service_type_id),location:cz(a.location)||{lat:36.8065,lng:10.1815,address:a.location},dateStart:a.date_start||a.dateStart||"",dateEnd:a.date_end||a.dateEnd||"",offeredPrice:Number(a.requested_price??a.offeredPrice??0),status:a.status||"open",createdAt:a.created_at||a.createdAt||new Date().toISOString(),description:a.description}}async function cE(){let a=await cy("/requests/open",{method:"GET"}),b=await a.json();return Array.isArray(b)?b.map(cD):[]}async function cF(){let a=await cy("/requests/types",{method:"GET"});return await a.json()}async function cG(){let a=await cy("/requests/my",{method:"GET"}),b=await a.json();return Array.isArray(b)?b.map(cD):[]}async function cH(a){let b={pet_id:a.petId,service_type_id:a.serviceTypeId,requested_price:a.requestedPrice,location:JSON.stringify(a.location)},c=await cy("/requests",{method:"POST",body:JSON.stringify(b)});return cD(await c.json())}async function cI(){let a=await cy("/sitters",{method:"GET"}),b=await a.json();return Array.isArray(b)?b.map(a=>({id:String(a.id),sitterId:String(a.sitter_id??a.sitterId??a.id),name:a.name||a.full_name||"Sitter",avatar:a.avatar,trustScore:a.trust_score??a.trustScore,reviewCount:a.review_count??a.reviewCount,city:a.city,isAvailable:a.is_available??a.isAvailable,lat:a.lat,lng:a.lng,servicesOffered:a.services_offered??a.servicesOffered,bio:a.bio})):[]}async function cJ(){let a=await cy("/sitters/me",{method:"GET"});return await a.json()}async function cK(a){let b=await cy(`/sitters/${a}/reviews`,{method:"GET"});return await b.json()}async function cL(a){let b=await cy("/sitters/me",{method:"PUT",body:JSON.stringify(a)});return await b.json()}async function cM(){let a=await cy("/pets/",{method:"GET"});return await a.json()}async function cN(a){let b=await cy("/pets/",{method:"POST",body:JSON.stringify({name:a.name,species:a.species||a.type||a.type,breed:a.breed,age:a.age,temperament:a.temperament,medical_notes:a.medical_notes})});return await b.json()}async function cO(a,b){let c=await cy(`/pets/${a}`,{method:"PUT",body:JSON.stringify(b)});return await c.json()}async function cP(a){let b=await cy(`/requests/${a}/offers`,{method:"GET"}),c=await b.json();return Array.isArray(c)?c.map(cA):[]}async function cQ(a,b){let c=await cy(`/requests/${a}/offers`,{method:"POST",body:JSON.stringify({offered_price:b.price,message:b.message})});return await c.json()}async function cR(a){let b=await cy(`/offers/${a}/accept`,{method:"PUT"});return await b.json()}async function cS(a){let b=await cy(`/offers/${a}/reject`,{method:"PUT"});return await b.json()}async function cT(){let a=await cy("/bookings/my",{method:"GET"}),b=await a.json();return Array.isArray(b)?b.map(cB):[]}async function cU(a){let b=await cy(`/bookings/${a}`,{method:"GET"});return cB(await b.json())}async function cV(a){let b=await cy(`/bookings/${a}/complete`,{method:"PUT"});return cB(await b.json())}async function cW(a){let b=await cy(`/bookings/${a}/updates`,{method:"GET"}),c=await b.json();return Array.isArray(c)?c.map(a=>({id:String(a.id??Math.random()),createdAt:a.created_at||a.timestamp||new Date().toISOString(),type:a.type||"note",content:a.content??"",photoUrl:a.photo_url??a.photoUrl})):[]}async function cX(a,b){let c={type:b.type,content:b.content,photo_url:b.photoUrl};return(await cy(`/bookings/${a}/updates`,{method:"POST",body:JSON.stringify(c)})).json()}async function cY(a,b){let c=new FormData;return c.append("file",b),(await cy(`/bookings/${a}/updates/photo`,{method:"POST",body:c})).json()}async function cZ(a,b){let c=await cy(`/bookings/${a}/review`,{method:"POST",body:JSON.stringify(b)});return await c.json()}function c$(){let[a,b]=(0,k.useState)(null),[c,d]=(0,k.useState)(null),[e,f]=(0,k.useState)(!0);return(0,k.useEffect)(()=>{if(!navigator?.geolocation){d("Geolocation not available"),f(!1);return}navigator.geolocation.getCurrentPosition(a=>{b({lat:a.coords.latitude,lng:a.coords.longitude}),f(!1)},a=>{d(a.message),f(!1)},{enableHighAccuracy:!0,timeout:1e4})},[]),{coords:a,error:c,loading:e}}cx.displayName=ch.displayName;let c_=["Details","Localisation & Budget","Confirmation"];function c0({user:a,onClose:b,onSubmit:c,onUpdateUser:d}){var e;let[f,g]=(0,k.useState)(0),[h,i]=(0,k.useState)(a?.pets||[]),[l,m]=(0,k.useState)(!1),[n,o]=(0,k.useState)(null),[p,q]=(0,k.useState)([]),[r,s]=(0,k.useState)(null),[t,u]=(0,k.useState)(h[0]?.id??null),[v,w]=(0,k.useState)(null),[x,y]=(0,k.useState)(""),[z,A]=(0,k.useState)(""),[B,C]=(0,k.useState)([30]),[D,E]=(0,k.useState)(""),[F,G]=(0,k.useState)(!1),{coords:H}=c$(),[I,J]=(0,k.useState)({lat:a?.location?.lat??H?.lat??36.8065,lng:a?.location?.lng??H?.lng??10.1815,address:a?.location?.address??"Tunis, Tunisia"}),[K,L]=(0,k.useState)(!1),[M,N]=(0,k.useState)({name:"",species:"dog",breed:"",age:""}),[O,P]=(0,k.useState)(null),[Q,R]=(0,k.useState)(null),[S,T]=(0,k.useState)(I.address||""),[U,V]=(0,k.useState)(a?.location?.address||"Tunis, Tunisia"),[W,X]=(0,k.useState)(null),[Y,Z]=(0,k.useState)({});(0,k.useEffect)(()=>{let a=async()=>{try{let a=await cF();q(a||[])}catch(a){s("Types de services indisponibles.")}};(async()=>{m(!0),o(null);try{let a=await cM(),b=a?.map(a=>({id:String(a.id),name:a.name,type:a.type||a.species||"other",breed:a.breed,age:a.age,image:a.image||a.photo_url}))||[];i(b),!t&&b[0]&&u(String(b[0].id))}catch(a){o("Impossible de charger vos animaux.")}finally{m(!1)}})(),a()},[t]),(0,k.useEffect)(()=>{H?.lat&&H?.lng&&J(a=>({...a,lat:H.lat,lng:H.lng}))},[H]);let $=h.find(a=>String(a.id)===String(t)),_=(0,k.useMemo)(()=>p.find(a=>a.id===v)||null,[p,v]),aa=(0,k.useMemo)(()=>{if(!x||!z)return null;let a=new Date(x),b=new Date(z);if(Number.isNaN(a.getTime())||Number.isNaN(b.getTime())||b<=a)return null;let c=Math.round((b.getTime()-a.getTime())/36e5),d=Math.floor(c/24);return{hours:c,days:d,remHours:c%24}},[x,z]),ab=a=>{let b={};return 0===a&&(t||(b.pet="Selectionne un animal."),null===v&&(b.service="Choisis un service."),x||(b.dateStart="Date de debut requise"),z||(b.dateEnd="Date de fin requise"),x&&z&&new Date(z)<new Date(x)&&(b.dateEnd="La fin doit etre apres le debut")),1===a&&(S||U||(b.address="Adresse requise"),_&&B[0]<Number(_.min_price)?b.price=`Minimum ${Number(_.min_price)} TND`:B[0]<10&&(b.price="Montant trop bas")),b},ac=async()=>{let a={...ab(0),...ab(1)};if(Z(b=>({...b,...a})),Object.values(a).some(Boolean))return void R("Corrige les champs en rouge.");G(!0),R(null);try{await cH({petId:t,serviceTypeId:v,requestedPrice:B[0],location:{...I,address:S||U||I.address}}),c()}catch(a){R("Creation impossible. Verifie les champs et reessaie.")}finally{G(!1)}};return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:()=>{f>0?g(f-1):b()},className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:"Creer une demande"}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Etape ",f+1," sur ",c_.length]})]})]}),(0,j.jsx)("div",{className:"flex gap-1 px-4 py-3",children:c_.map((a,b)=>(0,j.jsx)("div",{className:`flex-1 h-1 rounded-full transition-colors ${b<=f?"bg-primary":"bg-border"}`},b))}),(0,j.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold",children:c_[f]}),Q?(0,j.jsx)("p",{className:"text-sm text-destructive",children:Q}):null,0===f&&(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"space-y-3",children:[l&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement des animaux."}),n&&(0,j.jsx)("p",{className:"text-sm text-destructive",children:n}),h.map(a=>(0,j.jsxs)("button",{onClick:()=>u(String(a.id)),className:`w-full p-4 rounded-xl border-2 transition-all flex items-center gap-4 ${t===String(a.id)?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,j.jsxs)(br,{className:"h-14 w-14",children:[(0,j.jsx)(bs,{src:a.image||`/petAvatar.png?height=56&width=56&query=${a.type} ${a.breed}`}),(0,j.jsx)(bt,{children:a.name?.[0]})]}),(0,j.jsxs)("div",{className:"flex-1 text-left",children:[(0,j.jsx)("p",{className:"font-semibold",children:a.name}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(a.breed||a.type)??""," - ",a.age??"-"," ans"]})]}),t===String(a.id)&&(0,j.jsx)("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:(0,j.jsx)(bY,{size:14,className:"text-primary-foreground"})})]},a.id)),Y.pet&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.pet]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsxs)(aD,{className:"flex-1",variant:"outline",size:"sm",onClick:()=>{o(null),(async()=>{try{let a=await cM(),b=a?.map(a=>({id:String(a.id),name:a.name,type:a.type||a.species||"other",breed:a.breed,age:a.age,image:a.image||a.photo_url}))||[];i(b),b[0]&&u(String(b[0].id))}catch(a){o("Impossible de rafraichir les animaux.")}})()},children:[(0,j.jsx)(bZ,{size:14,className:"mr-1"}),"Rafraichir mes animaux"]}),(0,j.jsxs)(aD,{variant:"secondary",size:"sm",onClick:()=>L(a=>!a),children:[(0,j.jsx)(aM,{size:16,className:"mr-1"}),"Ajouter"]})]}),K&&(0,j.jsxs)("div",{className:"p-4 border rounded-xl space-y-3 bg-secondary/30",children:[O?(0,j.jsx)("p",{className:"text-sm text-destructive",children:O}):null,(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Nom"}),(0,j.jsx)(aE,{value:M.name,onChange:a=>N({...M,name:a.target.value})})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Type"}),(0,j.jsxs)("select",{className:"w-full rounded-md border bg-card p-2 text-sm",value:M.species,onChange:a=>N({...M,species:a.target.value}),children:[(0,j.jsx)("option",{value:"dog",children:"Chien"}),(0,j.jsx)("option",{value:"cat",children:"Chat"}),(0,j.jsx)("option",{value:"other",children:"Autre"})]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Race"}),(0,j.jsx)(aE,{value:M.breed,onChange:a=>N({...M,breed:a.target.value})})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Age (ans)"}),(0,j.jsx)(aE,{type:"number",value:M.age,onChange:a=>N({...M,age:a.target.value})})]})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{type:"button",className:"flex-1",onClick:async()=>{if(P(null),!M.name)return void P("Nom requis.");try{let a=await cN({name:M.name,species:M.species,breed:M.breed,age:M.age?Number(M.age):void 0}),b={id:String(a.id),name:a.name,type:a.type||a.species||M.species||"other",breed:a.breed,age:a.age,image:a.image||a.photo_url};i(a=>[...a,b]),u(String(b.id)),d?.({pets:[...h,b]}),L(!1),N({name:"",species:"dog",breed:"",age:""})}catch(a){P("Ajout impossible. Verifie que tu es connecte.")}},disabled:!M.name,children:"Enregistrer l'animal"}),(0,j.jsx)(aD,{variant:"ghost",type:"button",onClick:()=>L(!1),children:"Annuler"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[r?(0,j.jsx)("p",{className:"text-sm text-destructive",children:r}):null,0===p.length&&!r&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement des services."}),(0,j.jsx)("div",{className:"grid grid-cols-2 gap-3",children:p.map(a=>{let b=a.name?.toLowerCase().includes("walk")||a.name?.toLowerCase().includes("dog")?"Promenade":a.name?.toLowerCase().includes("taxi")?"Pet Taxi":a.name?.toLowerCase().includes("emergency")?"Urgence":"Garde a domicile",c="Garde a domicile"===b?"bg-[#F5E6D3]":"Promenade"===b?"bg-[#D4E7F7]":"Urgence"===b?"bg-[#FFD4D4]":"bg-[#E8D9F5]",d="Garde a domicile"===b?"hover:border-[#c67b5c]":"Promenade"===b?"hover:border-[#2F6F8F]":"Urgence"===b?"hover:border-[#D94141]":"hover:border-[#8B9F8F]";return(0,j.jsxs)("button",{onClick:()=>w(a.id),className:`p-4 rounded-xl border-2 transition-all text-left shadow-sm ${c} ${v===a.id?"border-primary scale-[1.01]":`border-border ${d} hover:shadow-md`}`,children:[(0,j.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-3 bg-white/60 shadow-sm",children:(0,j.jsx)(bz,{type:"Promenade"===b?"walking":"Pet Taxi"===b?"taxi":"Urgence"===b?"emergency":"sitting",size:32})}),(0,j.jsx)("p",{className:"font-semibold text-sm",children:b}),(0,j.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Tarif min: ",Number(a.min_price)," TND ",a.description?`- ${a.description}`:""]})]},a.id)})}),Y.service&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.service]})]}),(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(aH,{htmlFor:"start",children:"Date et heure de debut"}),(0,j.jsx)(aE,{id:"start",type:"datetime-local",value:x,onChange:a=>y(a.target.value),onBlur:()=>Z(a=>({...a,...ab(0)})),"aria-invalid":!!Y.dateStart,min:new Date().toISOString().slice(0,16)}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selectionne la date et l'heure souhaitees"}),Y.dateStart&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.dateStart]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(aH,{htmlFor:"end",children:"Date et heure de fin"}),(0,j.jsx)(aE,{id:"end",type:"datetime-local",value:z,onChange:a=>A(a.target.value),onBlur:()=>Z(a=>({...a,...ab(0)})),"aria-invalid":!!Y.dateEnd,min:x||new Date().toISOString().slice(0,16)}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selectionne la date et l'heure souhaitees"}),Y.dateEnd&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.dateEnd]})]}),aa&&(0,j.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Duree estimee : ",aa.days,"j ",aa.remHours,"h (",aa.hours," heures)"]}),(0,j.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[(0,j.jsx)("span",{className:"text-muted-foreground",children:"Suggestions :"}),(0,j.jsx)(aD,{type:"button",variant:"outline",size:"sm",onClick:()=>{let a=(x?new Date(x):new Date).toISOString().slice(0,10);y(`${a}T09:00`),A(`${a}T12:00`)},children:"Matin (09:00-12:00)"}),(0,j.jsx)(aD,{type:"button",variant:"outline",size:"sm",onClick:()=>{let a=(x?new Date(x):new Date).toISOString().slice(0,10);y(`${a}T12:00`),A(`${a}T17:00`)},children:"Apres-midi (12:00-17:00)"}),(0,j.jsx)(aD,{type:"button",variant:"outline",size:"sm",onClick:()=>{let a=(x?new Date(x):new Date).toISOString().slice(0,10);y(`${a}T18:00`),A(`${a}T22:00`)},children:"Soir (18:00-22:00)"})]})]})]}),1===f&&(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(aZ,{size:20,className:"text-primary"}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)(aH,{children:"Adresse"}),(0,j.jsx)(aE,{value:S,onChange:a=>{let b=a.target.value;T(b),J(a=>({...a,address:b||U||a.address}))},placeholder:"Ex: Rue de Marseille, Tunis"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(aH,{children:"Ville / Zone (Grand Tunis)"}),(0,j.jsx)("select",{className:"w-full mt-1 rounded-md border bg-card p-2",value:U,onChange:a=>{let b=a.target.value;V(b),J(a=>({...a,address:S||b,lat:a.lat,lng:a.lng}))},children:["Tunis, Tunisia","La Marsa","Carthage","Le Kram","Ariana","Ben Arous","Manouba","Ezzahra","Bardo"].map(a=>(0,j.jsx)("option",{value:a,children:a},a))})]}),Y.address&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.address]}),(0,j.jsxs)(aD,{type:"button",variant:"outline",size:"sm",className:"inline-flex items-center gap-2",onClick:()=>{H?.lat&&H?.lng&&(J({lat:H.lat,lng:H.lng,address:S||U||I.address}),T(S||U||I.address||"Ma position"))},children:[(0,j.jsx)(b$,{size:16}),"Utiliser ma position"]}),(0,j.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Lat: ",I.lat.toFixed(4)," - Lng: ",I.lng.toFixed(4)]}),(0,j.jsx)("div",{className:"rounded-2xl overflow-hidden border border-border h-72",children:(0,j.jsx)(a7,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:W||I,markers:W?[{id:"selected",lat:W.lat,lng:W.lng,type:"request",label:"Emplacement"}]:[],onSelectLocation:a=>{let b=S?.trim()?S:`${U||"Tunis"}, (${a.lat.toFixed(4)}, ${a.lng.toFixed(4)})`;T(b),X(a),J({...I,...a,address:b})}})}),(0,j.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Adresse actuelle : ",S||U," | Coords : ",W?`${W.lat.toFixed(4)}, ${W.lng.toFixed(4)}`:"-"]})]}),(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsxs)("div",{className:"inline-flex items-center gap-2 text-4xl font-bold text-primary",children:[(0,j.jsx)("span",{children:B[0]}),(0,j.jsx)("span",{className:"text-lg font-semibold text-muted-foreground",children:"TND"})]}),(0,j.jsx)("p",{className:"text-muted-foreground mt-1",children:"Budget propose"}),_?(0,j.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",Number(_.min_price)," TND pour ce service"]}):null,aa&&(0,j.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Prix estime: ",Math.max(B[0],_?Number(_.min_price):0)," TND - Duree ",aa.hours," h"]})]}),(0,j.jsxs)("div",{className:"px-4",children:[(0,j.jsx)(cx,{value:B,onValueChange:C,min:10,max:200,step:5,className:"mb-4"}),(0,j.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,j.jsx)("span",{children:"10 TND"}),(0,j.jsx)("span",{children:"200 TND"})]})]}),Y.price&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),Y.price]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(aH,{htmlFor:"description",children:"Notes additionnelles (optionnel)"}),(0,j.jsx)(b_,{id:"description",placeholder:"Instructions pour le gardien...",value:D,onChange:a=>E(a.target.value),rows:3})]})]})]}),2===f&&(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)(br,{className:"h-12 w-12",children:[(0,j.jsx)(bs,{src:$?.image||"/placeholder.svg"}),(0,j.jsx)(bt,{children:$?.name?.[0]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-semibold",children:$?.name}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:$?.breed})]})]}),(0,j.jsx)("div",{className:"h-px bg-border"}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:_?(0,j.jsx)(bz,{type:_.name.toLowerCase().includes("walk")?"walking":_.name.toLowerCase().includes("taxi")?"taxi":_.name.toLowerCase().includes("emergency")?"emergency":"sitting",className:"text-primary"}):null}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:_?_.name:2===(e=v)?"Promenade":3===e?"Pet Taxi":4===e?"Urgence":1===e?"Garde a domicile":"Service"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type de service"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bC,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:"font-medium",children:[x?new Date(x).toLocaleDateString():"-"," - ",z?new Date(z).toLocaleDateString():"-"]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plage de dates"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(aZ,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:I.address}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bD,{size:20,className:"text-accent"})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:"font-medium text-accent",children:[B[0]," TND"]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ton offre"})]})]}),D&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"h-px bg-border"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:D})]})]})})]}),(0,j.jsx)("div",{className:"p-4 border-t border-border",children:(0,j.jsx)(aD,{onClick:()=>{let a=ab(f);Z(b=>({...b,...a})),Object.values(a).some(Boolean)||(f<c_.length-1?g(f+1):ac())},className:"w-full",size:"lg",disabled:!Object.values(ab(f)).every(a=>!a)||F,children:f===c_.length-1?"Envoyer la demande":"Continuer"})})]})}function c1({onBack:a,onUpdated:b}){let[c,d]=(0,k.useState)([]),[e,f]=(0,k.useState)(!1),[g,h]=(0,k.useState)(null),[i,l]=(0,k.useState)(null),[m,n]=(0,k.useState)({name:"",species:"dog",breed:"",age:void 0,temperament:"",medical_notes:"",weight:"",height:"",behaviors:""}),[o,p]=(0,k.useState)({}),q=({field:a})=>!o[a]&&m[a]?(0,j.jsx)(aS,{className:"w-4 h-4 text-green-600","aria-hidden":"true"}):null,r=async()=>{f(!0),h(null);try{let a=await cM();d(a||[]),b?.(a||[])}catch(a){console.error(a),h("Impossible de charger vos animaux.")}finally{f(!1)}};(0,k.useEffect)(()=>{r()},[]);let s=a=>{a?(l(String(a.id)),n({...a,weight:t(a.medical_notes,"Poids"),height:t(a.medical_notes,"Taille"),behaviors:a.temperament||""})):(l("new"),n({name:"",species:"dog",breed:"",age:void 0,weight:"",height:"",behaviors:"",temperament:"",medical_notes:""}))},t=(a,b)=>{if(!a)return"";let c=a.split("\n").find(a=>a.toLowerCase().startsWith(b.toLowerCase()));return c?c.split(":").slice(1).join(":").trim():""},u=()=>{let a=[];return m.weight&&a.push(`Poids: ${m.weight}`),m.height&&a.push(`Taille: ${m.height}`),m.medical_notes&&a.push(m.medical_notes),a.join("\n")},v=async()=>{let a={};if(m.name||(a.name="Nom requis"),m.species||(a.species="Type requis"),p(a),Object.values(a).some(Boolean))return void h("Corrige les champs en rouge.");f(!0),h(null);try{if(i&&"new"!==i){let a=await cO(i,{name:m.name,species:m.species,breed:m.breed,age:m.age?Number(m.age):void 0,temperament:m.behaviors||m.temperament,medical_notes:u()}),e=c.map(b=>String(b.id)===String(a.id)?a:b);d(e),b?.(e)}else{let a=await cN({name:m.name,species:m.species,breed:m.breed,age:m.age?Number(m.age):void 0,temperament:m.behaviors,medical_notes:u()}),e=[...c,a];d(e),b?.(e)}l(null),n({name:"",species:"dog",breed:"",age:void 0,weight:"",height:"",behaviors:"",temperament:"",medical_notes:""})}catch(a){console.error(a),h("Sauvegarde impossible.")}finally{f(!1)}};return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:a,className:"p-2 hover:bg-secondary rounded-lg",children:"←"}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:"Mes animaux"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gérer les profils de vos compagnons."})]}),(0,j.jsx)(aD,{size:"sm",onClick:()=>s(),children:"Ajouter un animal"})]}),(0,j.jsxs)("div",{className:"p-4 space-y-3 overflow-y-auto",children:[e&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."}),g&&(0,j.jsx)("p",{className:"text-sm text-destructive",children:g}),c.map(a=>(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 flex gap-3 items-center",children:[(0,j.jsxs)(br,{className:"h-14 w-14",children:[(0,j.jsx)(bs,{src:a.image||"/petAvatar.png"}),(0,j.jsx)(bt,{children:a.name?.[0]??(0,j.jsx)(aM,{})})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-semibold",children:a.name}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(a.breed||a.species||a.type)??""," · ",a.age??"-"," ans"]})]}),(0,j.jsx)(aD,{variant:"outline",size:"sm",onClick:()=>s(a),children:"Modifier"})]}),a.temperament&&(0,j.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Comportement: ",a.temperament]}),a.medical_notes&&(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Notes: ",a.medical_notes]})]})]})},a.id)),0===c.length&&!e&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré."}),null!==i&&(0,j.jsx)(ba,{className:"border-primary/50",children:(0,j.jsxs)(bd,{className:"p-4 space-y-3",children:[(0,j.jsx)("h2",{className:"font-semibold",children:"new"===i?"Nouvel animal":"Modifier l'animal"}),g&&(0,j.jsx)("p",{className:"text-sm text-destructive",children:g}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{children:"Nom"}),(0,j.jsx)(q,{field:"name"})]}),(0,j.jsx)(aE,{value:m.name,onChange:a=>n({...m,name:a.target.value}),onBlur:()=>p(a=>({...a,name:m.name?"":"Nom requis"})),"aria-invalid":!!o.name}),o.name&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),o.name]})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)(aH,{children:"Type"}),(0,j.jsx)(q,{field:"species"})]}),(0,j.jsxs)("select",{className:"w-full rounded-md border bg-card p-2 text-sm",value:m.species||"dog",onChange:a=>n({...m,species:a.target.value}),onBlur:()=>p(a=>({...a,species:m.species?"":"Type requis"})),"aria-invalid":!!o.species,children:[(0,j.jsx)("option",{value:"dog",children:"Chien"}),(0,j.jsx)("option",{value:"cat",children:"Chat"}),(0,j.jsx)("option",{value:"other",children:"Autre"})]}),o.species&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),o.species]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(aH,{children:"Race"}),(0,j.jsx)(aE,{value:m.breed,onChange:a=>n({...m,breed:a.target.value})})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(aH,{children:"Âge"}),(0,j.jsx)(aE,{type:"number",value:m.age,onChange:a=>n({...m,age:a.target.value?Number(a.target.value):void 0})})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(aH,{children:"Poids"}),(0,j.jsx)(aE,{value:m.weight,onChange:a=>n({...m,weight:a.target.value})})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(aH,{children:"Taille"}),(0,j.jsx)(aE,{value:m.height,onChange:a=>n({...m,height:a.target.value})})]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Comportement"}),(0,j.jsx)(b_,{value:m.behaviors,onChange:a=>n({...m,behaviors:a.target.value}),placeholder:"Amical, actif, ok chats..."})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Notes médicales / besoins"}),(0,j.jsx)(b_,{value:m.medical_notes,onChange:a=>n({...m,medical_notes:a.target.value}),placeholder:"Allergies, médicaments, etc."})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{onClick:v,disabled:e,children:"Enregistrer"}),(0,j.jsx)(aD,{variant:"ghost",onClick:()=>l(null),disabled:e,children:"Annuler"})]})]})})]})]})}let c2=aL("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),c3=aL("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function c4(a,b){let c=bO(a,b?.in);return c.setHours(0,0,0,0),c}function c5(a,b){let c=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??bN.weekStartsOn??bN.locale?.options?.weekStartsOn??0,d=bO(a,b?.in),e=d.getDay();return d.setDate(d.getDate()-(7*(e<c)+e-c)),d.setHours(0,0,0,0),d}function c6(a,b){return c5(a,{...b,weekStartsOn:1})}function c7(a,b){let c=bO(a,b?.in),d=c.getFullYear(),e=bF(c,0);e.setFullYear(d+1,0,4),e.setHours(0,0,0,0);let f=c6(e),g=bF(c,0);g.setFullYear(d,0,4),g.setHours(0,0,0,0);let h=c6(g);return c.getTime()>=f.getTime()?d+1:c.getTime()>=h.getTime()?d:d-1}function c8(a,b){let c=bO(a,b?.in),d=c.getFullYear(),e=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??bN.firstWeekContainsDate??bN.locale?.options?.firstWeekContainsDate??1,f=bF(b?.in||a,0);f.setFullYear(d+1,0,e),f.setHours(0,0,0,0);let g=c5(f,b),h=bF(b?.in||a,0);h.setFullYear(d,0,e),h.setHours(0,0,0,0);let i=c5(h,b);return+c>=+g?d+1:+c>=+i?d:d-1}function c9(a,b){let c=Math.abs(a).toString().padStart(b,"0");return(a<0?"-":"")+c}let da={y(a,b){let c=a.getFullYear(),d=c>0?c:1-c;return c9("yy"===b?d%100:d,b.length)},M(a,b){let c=a.getMonth();return"M"===b?String(c+1):c9(c+1,2)},d:(a,b)=>c9(a.getDate(),b.length),a(a,b){let c=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.toUpperCase();case"aaa":return c;case"aaaaa":return c[0];default:return"am"===c?"a.m.":"p.m."}},h:(a,b)=>c9(a.getHours()%12||12,b.length),H:(a,b)=>c9(a.getHours(),b.length),m:(a,b)=>c9(a.getMinutes(),b.length),s:(a,b)=>c9(a.getSeconds(),b.length),S(a,b){let c=b.length;return c9(Math.trunc(a.getMilliseconds()*Math.pow(10,c-3)),b.length)}},db={G:function(a,b,c){let d=+(a.getFullYear()>0);switch(b){case"G":case"GG":case"GGG":return c.era(d,{width:"abbreviated"});case"GGGGG":return c.era(d,{width:"narrow"});default:return c.era(d,{width:"wide"})}},y:function(a,b,c){if("yo"===b){let b=a.getFullYear();return c.ordinalNumber(b>0?b:1-b,{unit:"year"})}return da.y(a,b)},Y:function(a,b,c,d){let e=c8(a,d),f=e>0?e:1-e;return"YY"===b?c9(f%100,2):"Yo"===b?c.ordinalNumber(f,{unit:"year"}):c9(f,b.length)},R:function(a,b){return c9(c7(a),b.length)},u:function(a,b){return c9(a.getFullYear(),b.length)},Q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"Q":return String(d);case"QQ":return c9(d,2);case"Qo":return c.ordinalNumber(d,{unit:"quarter"});case"QQQ":return c.quarter(d,{width:"abbreviated",context:"formatting"});case"QQQQQ":return c.quarter(d,{width:"narrow",context:"formatting"});default:return c.quarter(d,{width:"wide",context:"formatting"})}},q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"q":return String(d);case"qq":return c9(d,2);case"qo":return c.ordinalNumber(d,{unit:"quarter"});case"qqq":return c.quarter(d,{width:"abbreviated",context:"standalone"});case"qqqqq":return c.quarter(d,{width:"narrow",context:"standalone"});default:return c.quarter(d,{width:"wide",context:"standalone"})}},M:function(a,b,c){let d=a.getMonth();switch(b){case"M":case"MM":return da.M(a,b);case"Mo":return c.ordinalNumber(d+1,{unit:"month"});case"MMM":return c.month(d,{width:"abbreviated",context:"formatting"});case"MMMMM":return c.month(d,{width:"narrow",context:"formatting"});default:return c.month(d,{width:"wide",context:"formatting"})}},L:function(a,b,c){let d=a.getMonth();switch(b){case"L":return String(d+1);case"LL":return c9(d+1,2);case"Lo":return c.ordinalNumber(d+1,{unit:"month"});case"LLL":return c.month(d,{width:"abbreviated",context:"standalone"});case"LLLLL":return c.month(d,{width:"narrow",context:"standalone"});default:return c.month(d,{width:"wide",context:"standalone"})}},w:function(a,b,c,d){let e,f,g,h,i=Math.round((c5(e=bO(a,d?.in),d)-(f=d?.firstWeekContainsDate??d?.locale?.options?.firstWeekContainsDate??bN.firstWeekContainsDate??bN.locale?.options?.firstWeekContainsDate??1,g=c8(e,d),(h=bF(d?.in||e,0)).setFullYear(g,0,f),h.setHours(0,0,0,0),c5(h,d)))/6048e5)+1;return"wo"===b?c.ordinalNumber(i,{unit:"week"}):c9(i,b.length)},I:function(a,b,c){let d,e,f,g=Math.round((c6(d=bO(a,void 0))-(e=c7(d,void 0),(f=bF(d,0)).setFullYear(e,0,4),f.setHours(0,0,0,0),c6(f)))/6048e5)+1;return"Io"===b?c.ordinalNumber(g,{unit:"week"}):c9(g,b.length)},d:function(a,b,c){return"do"===b?c.ordinalNumber(a.getDate(),{unit:"date"}):da.d(a,b)},D:function(a,b,c){let d,e,f=function(a,b,c){let[d,e]=bQ(void 0,a,b),f=c4(d),g=c4(e);return Math.round((f-bP(f)-(g-bP(g)))/864e5)}(d=bO(a,void 0),((e=bO(d,void 0)).setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e))+1;return"Do"===b?c.ordinalNumber(f,{unit:"dayOfYear"}):c9(f,b.length)},E:function(a,b,c){let d=a.getDay();switch(b){case"E":case"EE":case"EEE":return c.day(d,{width:"abbreviated",context:"formatting"});case"EEEEE":return c.day(d,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},e:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"e":return String(f);case"ee":return c9(f,2);case"eo":return c.ordinalNumber(f,{unit:"day"});case"eee":return c.day(e,{width:"abbreviated",context:"formatting"});case"eeeee":return c.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(e,{width:"short",context:"formatting"});default:return c.day(e,{width:"wide",context:"formatting"})}},c:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"c":return String(f);case"cc":return c9(f,b.length);case"co":return c.ordinalNumber(f,{unit:"day"});case"ccc":return c.day(e,{width:"abbreviated",context:"standalone"});case"ccccc":return c.day(e,{width:"narrow",context:"standalone"});case"cccccc":return c.day(e,{width:"short",context:"standalone"});default:return c.day(e,{width:"wide",context:"standalone"})}},i:function(a,b,c){let d=a.getDay(),e=0===d?7:d;switch(b){case"i":return String(e);case"ii":return c9(e,b.length);case"io":return c.ordinalNumber(e,{unit:"day"});case"iii":return c.day(d,{width:"abbreviated",context:"formatting"});case"iiiii":return c.day(d,{width:"narrow",context:"formatting"});case"iiiiii":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},a:function(a,b,c){let d=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,b,c){let d,e=a.getHours();switch(d=12===e?"noon":0===e?"midnight":e/12>=1?"pm":"am",b){case"b":case"bb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,b,c){let d,e=a.getHours();switch(d=e>=17?"evening":e>=12?"afternoon":e>=4?"morning":"night",b){case"B":case"BB":case"BBB":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,b,c){if("ho"===b){let b=a.getHours()%12;return 0===b&&(b=12),c.ordinalNumber(b,{unit:"hour"})}return da.h(a,b)},H:function(a,b,c){return"Ho"===b?c.ordinalNumber(a.getHours(),{unit:"hour"}):da.H(a,b)},K:function(a,b,c){let d=a.getHours()%12;return"Ko"===b?c.ordinalNumber(d,{unit:"hour"}):c9(d,b.length)},k:function(a,b,c){let d=a.getHours();return(0===d&&(d=24),"ko"===b)?c.ordinalNumber(d,{unit:"hour"}):c9(d,b.length)},m:function(a,b,c){return"mo"===b?c.ordinalNumber(a.getMinutes(),{unit:"minute"}):da.m(a,b)},s:function(a,b,c){return"so"===b?c.ordinalNumber(a.getSeconds(),{unit:"second"}):da.s(a,b)},S:function(a,b){return da.S(a,b)},X:function(a,b,c){let d=a.getTimezoneOffset();if(0===d)return"Z";switch(b){case"X":return dd(d);case"XXXX":case"XX":return de(d);default:return de(d,":")}},x:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"x":return dd(d);case"xxxx":case"xx":return de(d);default:return de(d,":")}},O:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"O":case"OO":case"OOO":return"GMT"+dc(d,":");default:return"GMT"+de(d,":")}},z:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"z":case"zz":case"zzz":return"GMT"+dc(d,":");default:return"GMT"+de(d,":")}},t:function(a,b,c){return c9(Math.trunc(a/1e3),b.length)},T:function(a,b,c){return c9(+a,b.length)}};function dc(a,b=""){let c=a>0?"-":"+",d=Math.abs(a),e=Math.trunc(d/60),f=d%60;return 0===f?c+String(e):c+String(e)+b+c9(f,2)}function dd(a,b){return a%60==0?(a>0?"-":"+")+c9(Math.abs(a)/60,2):de(a,b)}function de(a,b=""){let c=Math.abs(a);return(a>0?"-":"+")+c9(Math.trunc(c/60),2)+b+c9(c%60,2)}let df=(a,b)=>{switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}},dg=(a,b)=>{switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}},dh={p:dg,P:(a,b)=>{let c,d=a.match(/(P+)(p+)?/)||[],e=d[1],f=d[2];if(!f)return df(a,b);switch(e){case"P":c=b.dateTime({width:"short"});break;case"PP":c=b.dateTime({width:"medium"});break;case"PPP":c=b.dateTime({width:"long"});break;default:c=b.dateTime({width:"full"})}return c.replace("{{date}}",df(e,b)).replace("{{time}}",dg(f,b))}},di=/^D+$/,dj=/^Y+$/,dk=["D","DD","YY","YYYY"],dl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dn=/^'([^]*?)'?$/,dp=/''/g,dq=/[a-zA-Z]/;function dr(a,b,c){let d=c?.locale??bN.locale??bM,e=c?.firstWeekContainsDate??c?.locale?.options?.firstWeekContainsDate??bN.firstWeekContainsDate??bN.locale?.options?.firstWeekContainsDate??1,f=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??bN.weekStartsOn??bN.locale?.options?.weekStartsOn??0,g=bO(a,c?.in);if(!(g instanceof Date||"object"==typeof g&&"[object Date]"===Object.prototype.toString.call(g))&&"number"!=typeof g||isNaN(+bO(g)))throw RangeError("Invalid time value");let h=b.match(dm).map(a=>{let b=a[0];return"p"===b||"P"===b?(0,dh[b])(a,d.formatLong):a}).join("").match(dl).map(a=>{if("''"===a)return{isToken:!1,value:"'"};let b=a[0];if("'"===b){var c;let b;return{isToken:!1,value:(b=(c=a).match(dn))?b[1].replace(dp,"'"):c}}if(db[b])return{isToken:!0,value:a};if(b.match(dq))throw RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:a}});d.localize.preprocessor&&(h=d.localize.preprocessor(g,h));let i={firstWeekContainsDate:e,weekStartsOn:f,locale:d};return h.map(e=>{if(!e.isToken)return e.value;let f=e.value;return(!c?.useAdditionalWeekYearTokens&&dj.test(f)||!c?.useAdditionalDayOfYearTokens&&di.test(f))&&function(a,b,c){var d,e,f;let g,h=(d=a,e=b,f=c,g="Y"===d[0]?"years":"days of the month",`Use \`${d.toLowerCase()}\` instead of \`${d}\` (in \`${e}\`) for formatting ${g} to the input \`${f}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(h),dk.includes(a))throw RangeError(h)}(f,b,String(a)),(0,db[f[0]])(g,f,d.localize,i)}).join("")}function ds({booking:a,onBack:b,onComplete:c,isSitter:d=!1}){let[e,f]=(0,k.useState)(a.updates||[]),[g,h]=(0,k.useState)(!1),[i,l]=(0,k.useState)({type:"note",content:"",photoUrl:""}),[m,n]=(0,k.useState)(!1),[o,p]=(0,k.useState)(!1),[q,r]=(0,k.useState)(null),[s,t]=(0,k.useState)(null),u=(a,b)=>{if(!a)return"--";let c=new Date(a);return Number.isNaN(c.getTime())?"--":dr(c,b)},v=a.location||{},w="number"==typeof v.lat?v.lat:36.8065,x="number"==typeof v.lng?v.lng:10.1815,y=v.address||("string"==typeof v?v:`Lat ${w.toFixed(3)}, Lng ${x.toFixed(3)}`)||"Localisation inconnue",z=a.sitterName?a.sitterName[0]:"?",A=a.petName||"Animal",B=a.sitterName||"Sitter",C=a.price??a.agreedPrice??0,D=bA(a.serviceType),E=`${u(a.dateStart,"dd/MM/yyyy")} - ${u(a.dateEnd,"dd/MM/yyyy")}`,F=d&&["active","in-progress"].includes((a.status||"").toLowerCase()),G=async()=>{h(!0);try{let b=await cW(a.id);f(b)}catch(a){console.error("Failed to load updates",a)}finally{h(!1)}};(0,k.useEffect)(()=>{G()},[a.id]);let H=async b=>{if(b){p(!0),r(null),t(null);try{let c=await cY(a.id,b);c?.url?(l(a=>({...a,photoUrl:c.url})),t("Photo ajoutée")):r("Échec de l'upload")}catch(a){console.error(a),r("Échec de l'upload")}finally{p(!1)}}},I=async()=>{n(!0);try{await cX(a.id,{type:i.type,content:i.content,photoUrl:i.photoUrl}),await G(),l({type:"note",content:"",photoUrl:""})}catch(a){console.error("Failed to add update",a)}finally{n(!1)}};return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:b,className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:"Réservation active"}),(0,j.jsx)(bu,{status:a.status,size:"sm"})]})]}),(0,j.jsx)("div",{className:"h-56 relative rounded-b-2xl overflow-hidden shadow-inner",children:(0,j.jsx)(a7,{markers:[{id:a.sitterId,lat:w,lng:x,type:"sitter",label:a.sitterName}]})}),(0,j.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4 bg-background",children:[(0,j.jsx)(ba,{className:"shadow-md",children:(0,j.jsx)(bd,{className:"p-4",children:(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)(br,{className:"h-14 w-14",children:[(0,j.jsx)(bs,{src:a.sitterAvatar||"/sitterAvatar.png"}),(0,j.jsx)(bt,{children:z})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("p",{className:"font-semibold",children:B}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:["S'occupe de ",A]})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{variant:"outline",size:"icon",className:"rounded-full bg-transparent",children:(0,j.jsx)(c2,{size:18})}),(0,j.jsx)(aD,{variant:"outline",size:"icon",className:"rounded-full bg-transparent",children:(0,j.jsx)(bW,{size:18})})]})]})})}),(0,j.jsx)(ba,{className:"shadow-sm",children:(0,j.jsxs)(bd,{className:"p-4 space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bz,{type:a.serviceType,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:D}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Service"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bC,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:E}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Durée"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(a0,{size:20,className:"text-accent"})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:"font-medium",children:[C," TND"]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tarif convenu"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(aZ,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:y}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]})]})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"font-semibold mb-3",children:"Mises à jour"}),g&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement..."}),(0,j.jsxs)("div",{className:"space-y-4",children:[e.map((a,b)=>(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsxs)("div",{className:"flex flex-col items-center",children:[(0,j.jsx)("div",{className:"w-3 h-3 bg-primary rounded-full"}),b<e.length-1&&(0,j.jsx)("div",{className:"w-0.5 flex-1 bg-border mt-1"})]}),(0,j.jsxs)("div",{className:"flex-1 pb-4",children:[(0,j.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:u(a.createdAt,"dd/MM/yyyy HH:mm")}),(0,j.jsx)("p",{className:"text-xs font-semibold text-foreground uppercase",children:a.type}),(0,j.jsx)("p",{className:"text-sm",children:a.content||"—"}),a.photoUrl&&(0,j.jsx)("img",{src:a.photoUrl,alt:"Mise à jour",className:"mt-2 rounded-lg w-full max-w-xs object-cover"})]})]},a.id)),0===e.length&&!g&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pas encore de mises à jour."})]})]}),F&&(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-3",children:[(0,j.jsx)("p",{className:"font-semibold",children:"Ajouter une mise à jour"}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"text-sm text-muted-foreground",children:"Type"}),(0,j.jsxs)("select",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:i.type,onChange:a=>l(b=>({...b,type:a.target.value})),children:[(0,j.jsx)("option",{value:"note",children:"Note"}),(0,j.jsx)("option",{value:"feeding",children:"Repas"}),(0,j.jsx)("option",{value:"walking",children:"Promenade"}),(0,j.jsx)("option",{value:"meds",children:"Médicaments"}),(0,j.jsx)("option",{value:"photo",children:"Photo"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"text-sm text-muted-foreground",children:"Contenu"}),(0,j.jsx)("textarea",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:i.content,onChange:a=>l(b=>({...b,content:a.target.value})),placeholder:"Ex: Repas pris à 19h, balade de 20 minutes...",rows:3})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("label",{className:"text-sm text-muted-foreground",children:"Photo"}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsxs)("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border bg-card text-sm cursor-pointer hover:bg-secondary",children:[(0,j.jsx)(c3,{size:16}),(0,j.jsx)("span",{children:o?"Upload en cours...":"Choisir un fichier"}),(0,j.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>H(a.target.files?.[0]),disabled:o})]}),(0,j.jsx)("input",{className:"w-full rounded-md border border-border bg-background p-2 text-sm",value:i.photoUrl,onChange:a=>l(b=>({...b,photoUrl:a.target.value})),placeholder:"Ou collez une URL https://..."}),s&&(0,j.jsx)("p",{className:"text-xs text-success",children:s}),q&&(0,j.jsx)("p",{className:"text-xs text-destructive",children:q})]})]}),(0,j.jsx)(aD,{className:"w-full",onClick:I,disabled:m,children:m?"Envoi...":"Publier"})]})})]}),["in-progress","active"].includes((a.status||"").toLowerCase())&&(0,j.jsx)("div",{className:"p-4 border-t border-border",children:c?(0,j.jsxs)(aD,{className:"w-full",variant:"outline",onClick:()=>c(),children:[(0,j.jsx)(a0,{size:18,className:"mr-2"}),"Terminer et noter"]}):(0,j.jsxs)(aD,{className:"w-full bg-transparent",variant:"outline",children:[(0,j.jsx)(a0,{size:18,className:"mr-2"}),"Laisser un avis après la fin"]})})]})}function dt({targetName:a,targetAvatar:b,petName:c,onSubmit:d,onBack:e}){let[f,g]=(0,k.useState)(0),[h,i]=(0,k.useState)(0),[l,m]=(0,k.useState)(""),[n,o]=(0,k.useState)(null);return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:e,className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsx)("div",{className:"flex-1",children:(0,j.jsx)("h1",{className:"font-semibold",children:"Leave a Review"})})]}),(0,j.jsx)("div",{className:"flex-1 p-4",children:(0,j.jsxs)(ba,{children:[(0,j.jsxs)(bb,{className:"text-center pb-2",children:[(0,j.jsxs)(br,{className:"h-20 w-20 mx-auto mb-3",children:[(0,j.jsx)(bs,{src:b||"/happy-person-3.jpeg"}),(0,j.jsx)(bt,{className:"text-xl",children:a[0]})]}),(0,j.jsxs)(bc,{className:"text-lg",children:["How was your experience with ",a,"?"]}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Service for ",c]})]}),(0,j.jsx)(bd,{children:(0,j.jsxs)("form",{onSubmit:a=>{(a.preventDefault(),f<=0)?o("Choisis une note avant d'envoyer."):(o(null),d(f,l))},className:"space-y-6",children:[(0,j.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(a=>(0,j.jsx)("button",{type:"button",onClick:()=>g(a),onMouseEnter:()=>i(a),onMouseLeave:()=>i(0),className:"p-1 transition-transform hover:scale-110",children:(0,j.jsx)(a0,{size:40,className:`transition-colors ${a<=(h||f)?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})},a))}),f>0&&(0,j.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:[5===f&&"Excellent!",4===f&&"Very Good!",3===f&&"Good",2===f&&"Fair",1===f&&"Poor"]}),n&&(0,j.jsx)("p",{className:"text-center text-xs text-destructive",children:n}),(0,j.jsx)("div",{className:"space-y-2",children:(0,j.jsx)(b_,{placeholder:"Share your experience (optional)...",value:l,onChange:a=>m(a.target.value),rows:4})}),(0,j.jsx)(aD,{type:"submit",className:"w-full",size:"lg",disabled:0===f,children:"Submit Review"})]})})]})})]})}let du=aL("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dv=aL("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),dw=aL("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function dx({user:a,onLogout:b,onUpdateUser:c}){let{t:d}=(0,bB.useI18n)(),[e,f]=(0,k.useState)("home"),[g,h]=(0,k.useState)(null),[i,l]=(0,k.useState)(!1),[m,n]=(0,k.useState)([]),[o,p]=(0,k.useState)([]),[q,r]=(0,k.useState)([]),[s,t]=(0,k.useState)([]),[u,v]=(0,k.useState)(null),{coords:w}=c$(),x=async()=>{try{let a=await cI();n(a)}catch(a){console.error("Failed to load sitters",a),n([])}try{let a=await cG();p(a)}catch(a){console.error("Failed to load requests",a),p([])}try{let a=await cT();t(a)}catch(a){console.error("Failed to load bookings",a),t([])}};(0,k.useEffect)(()=>{x()},[]);let y=(0,k.useMemo)(()=>o.filter(a=>{let b="open"===(a.status||"").toLowerCase(),c=s.some(b=>String(b.requestId)===String(a.id));return b&&!c}),[o,s]),z=m.map(a=>{let b=a.lat??a.location?.lat,c=a.lng??a.location?.lng;return b&&c?{id:a.id,lat:b,lng:c,type:"sitter",label:a.name||"Sitter"}:null}).filter(Boolean),A=a=>{h(a),f("view-offers"),cP(a.id).then(r).catch(()=>r([]))},B=async a=>{try{await cR(a.id);let b=await cT();t(b),await x(),f(b&&b.length>0?"active-booking":"home")}catch(a){console.error(a),f("home")}finally{h(null)}},C=async a=>{await cS(a.id).catch(a=>console.error(a)),r(b=>b.filter(b=>b.id!==a.id))};if("create-request"===e)return(0,j.jsx)(c0,{user:a,onClose:()=>f("home"),onSubmit:async()=>{await x(),f("home")},onUpdateUser:c});if("pets"===e)return(0,j.jsx)(c1,{onBack:()=>f("home"),onUpdated:a=>c?.({pets:a})});if("requests-list"===e)return(0,j.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:()=>f("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:d("myRequests")}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[o.length," demandes"]})]})]}),(0,j.jsxs)("div",{className:"p-4 space-y-3",children:[o.map(a=>(0,j.jsx)(bS,{request:a,onClick:()=>A(a)},a.id)),0===o.length&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Aucune demande."})]})]});if("bookings-list"===e)return(0,j.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:()=>f("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:d("bookings")}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s.length," réservations"]})]})]}),(0,j.jsxs)("div",{className:"p-4 space-y-3",children:[s.map(a=>(0,j.jsxs)("div",{className:"p-4 rounded-xl border bg-card shadow-sm",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-semibold",children:a.petName||"Animal"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.sitterName})]}),(0,j.jsx)(bu,{status:a.status,size:"sm"})]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.location?.address||("string"==typeof a.location?a.location:"Localisation inconnue")}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.dateStart?new Date(a.dateStart).toLocaleDateString():""," →"," ",a.dateEnd?new Date(a.dateEnd).toLocaleDateString():""]}),(0,j.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,j.jsx)(aD,{size:"sm",variant:"outline",onClick:()=>{v(a),f("active-booking")},children:"Détails"}),a.status&&("in-progress"===a.status||"active"===a.status.toLowerCase())&&(0,j.jsx)(aD,{size:"sm",onClick:async()=>{await cV(a.id),t(await cT())},children:"Terminer"}),a.status&&"completed"===a.status.toLowerCase()&&(0,j.jsx)(aD,{size:"sm",variant:"secondary",onClick:()=>{v(a),f("review")},children:"Noter le gardien"})]})]},a.id)),0===s.length&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Aucune réservation."})]})]});if("review"===e&&u)return(0,j.jsx)(dt,{targetName:u.sitterName||"Sitter",targetAvatar:u.sitterAvatar,petName:u.petName||"Animal",onSubmit:async(a,b)=>{await cZ(u.id,{rating:a,comment:b}),f("home"),t(await cT()),v(null)},onBack:()=>f("home")});if("active-booking"===e&&(u||s[0])){let a=u||s[0];return(0,j.jsx)(ds,{booking:a,onBack:()=>{v(null),f("home")},onComplete:async()=>{await cV(a.id),t(await cT()),v(a),f("review")}})}return(0,j.jsxs)("div",{className:"h-screen w-full relative overflow-hidden",children:[(0,j.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 p-4 flex items-center justify-between",children:[(0,j.jsx)("button",{onClick:()=>l(!0),className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center",children:(0,j.jsx)(dw,{size:20})}),(0,j.jsx)("div",{className:"bg-card px-4 py-2 rounded-full shadow-md",children:(0,j.jsx)("span",{className:"text-sm font-medium",children:"Grand Tunis"})}),(0,j.jsxs)("button",{className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center relative",children:[(0,j.jsx)(dv,{size:20}),(0,j.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-accent rounded-full"})]})]}),i&&(0,j.jsxs)("div",{className:"absolute inset-0 z-50 flex",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>l(!1)}),(0,j.jsxs)("div",{className:"relative w-72 bg-card h-full shadow-xl",children:[(0,j.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsx)("span",{className:"font-semibold",children:d("menu")}),(0,j.jsx)("button",{onClick:()=>l(!1),children:(0,j.jsx)(aR,{size:20})})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)(br,{className:"h-12 w-12",children:[(0,j.jsx)(bs,{src:a?.avatar||"/userAvatar.png"}),(0,j.jsx)(bt,{children:a?.name?.[0]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:a?.name}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Propriétaire"})]})]})]}),(0,j.jsxs)("div",{className:"p-4 space-y-2",children:[(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{l(!1),f("pets")},children:d("myPets")}),(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{l(!1),f("requests-list")},children:d("myRequests")}),(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>void f("bookings-list"),children:d("bookings")}),(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",children:d("settings")}),(0,j.jsx)("button",{onClick:b,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary text-destructive",children:d("logout")})]})]})]}),(0,j.jsx)(a7,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:w||{lat:36.8065,lng:10.1815},markers:z,showRadius:!!w,radiusKm:5}),(0,j.jsx)(aD,{onClick:()=>f("create-request"),className:"fixed w-14 h-14 rounded-full shadow-xl bg-accent hover:bg-accent/90 border border-accent/40 z-50",style:{bottom:"6rem",right:"1.25rem"},size:"icon","aria-label":d("createRequest"),children:(0,j.jsx)(du,{size:24})}),(0,j.jsx)(a9,{defaultSnap:1,children:"view-offers"===e&&g?(0,j.jsxs)("div",{children:[(0,j.jsxs)("button",{onClick:()=>{f("home"),h(null)},className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[(0,j.jsx)(aP,{size:16}),"Retour aux demandes"]}),(0,j.jsxs)("h2",{className:"text-lg font-semibold mb-1",children:[d("offers")," · ",g.petName]}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:[q.length," gardiens intéressés"]}),(0,j.jsx)("div",{className:"space-y-3",children:q.map(a=>(0,j.jsx)(bX,{offer:a,locationLabel:"string"==typeof g.location?g.location:g.location?.address,onAccept:()=>B(a),onReject:()=>C(a)},a.id))})]}):(0,j.jsxs)("div",{children:[s.length>0&&"in-progress"===s[0].status&&(0,j.jsxs)("button",{onClick:()=>f("active-booking"),className:"w-full mb-4 p-4 bg-accent/10 rounded-xl flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center",children:(0,j.jsx)("span",{className:"text-accent-foreground text-sm font-bold",children:"!"})}),(0,j.jsxs)("div",{className:"flex-1 text-left",children:[(0,j.jsx)("p",{className:"font-medium text-foreground",children:d("activeBooking")}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s[0].sitterName," s'occupe de ",s[0].petName]})]}),(0,j.jsx)(aP,{size:20,className:"rotate-180 text-muted-foreground"})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold",children:d("nearSitters")}),(0,j.jsxs)("span",{className:"text-sm text-muted-foreground",children:[m.length," disponibles"]})]}),y.length>0&&(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Tes demandes en cours"}),(0,j.jsx)("div",{className:"space-y-3",children:y.slice(0,2).map(a=>(0,j.jsx)(bS,{request:a,onClick:()=>A(a),compact:!0},a.id))})]}),(0,j.jsx)("div",{className:"space-y-3",children:m.map((a,b)=>(0,j.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-secondary rounded-xl",children:[(0,j.jsxs)(br,{className:"h-10 w-10",children:[(0,j.jsx)(bs,{src:a.avatar||"/sitterAvatar.png"}),(0,j.jsx)(bt,{children:a.name?.[0]})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("p",{className:"font-medium text-sm",children:a.name}),(0,j.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(a.trustScore||0).toFixed?.(1)," ★ · ",a.reviewCount||0," avis"]})]}),(0,j.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(1+.5*b).toFixed(1)," km"]})]},a.id))})]})})]})}function dy({request:a,onBack:b,onAccept:c}){let[d,e]=(0,k.useState)(!1),[f,g]=(0,k.useState)(a.offeredPrice.toString()),[h,i]=(0,k.useState)(""),[l,m]=(0,k.useState)(!1),[n,o]=(0,k.useState)(null),[p,q]=(0,k.useState)({}),r=a.location||{},s="number"==typeof r.lat?r.lat:36.8065,t="number"==typeof r.lng?r.lng:10.1815,u=r.address||"Localisation inconnue",v=a.petName?a.petName[0]:"?",w=a.ownerName?a.ownerName[0]:"?",x=a.dateStart?new Date(a.dateStart):null,y=a.dateEnd?new Date(a.dateEnd):null,z=x&&!Number.isNaN(x.getTime())?dr(x,"MMM d, h:mm a"):"Date inconnue",A=y&&!Number.isNaN(y.getTime())?dr(y,"MMM d, h:mm a"):"Date inconnue",B=async()=>{m(!0),o(null);try{let b=Number.parseFloat(f),d={};if(Number.isNaN(b)?d.price="Montant invalide":b<a.offeredPrice&&(d.price="Pas en dessous du prix demandé"),q(d),Object.values(d).some(Boolean))return void m(!1);await cQ(a.id,{price:Number.parseFloat(f),message:h}),c()}catch(a){console.error("Failed to send offer",a),o("string"==typeof a?.message?a.message:"Impossible d'envoyer la contre-offre. Vérifie le prix ou réessaie.")}finally{m(!1)}},C=async()=>{m(!0),o(null);try{await cQ(a.id,{price:a.offeredPrice,message:""}),c()}catch(a){console.error("Failed to submit offer",a),o("string"==typeof a?.message?a.message:"Impossible d'envoyer l'offre. Tu as peut-être déjà proposé.")}finally{m(!1)}};return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:b,className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:"Détail de la demande"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:bA(a.serviceType)})]})]}),(0,j.jsx)("div",{className:"h-48 relative",children:(0,j.jsx)(a7,{center:{lat:s,lng:t},markers:[{id:a.id,lat:s,lng:t,type:"request",label:a.petName}]})}),(0,j.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[(0,j.jsx)(ba,{children:(0,j.jsx)(bd,{className:"p-4",children:(0,j.jsxs)("div",{className:"flex items-start gap-4",children:[(0,j.jsxs)(br,{className:"h-16 w-16",children:[(0,j.jsx)(bs,{src:a.petImage||"/happy-dog-playing.jpeg",alt:a.petName}),(0,j.jsx)(bt,{children:v})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold",children:a.petName}),(0,j.jsx)("p",{className:"text-muted-foreground capitalize",children:a.petType}),(0,j.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,j.jsxs)(br,{className:"h-6 w-6",children:[(0,j.jsx)(bs,{src:a.ownerAvatar||"/userAvatar.png"}),(0,j.jsx)(bt,{children:w})]}),(0,j.jsx)("span",{className:"text-sm text-muted-foreground",children:a.ownerName})]})]}),(0,j.jsxs)("div",{className:"text-right",children:[(0,j.jsxs)("div",{className:"flex items-center gap-1 text-2xl font-bold text-accent",children:[(0,j.jsx)(bD,{size:24}),(0,j.jsx)("span",{children:a.offeredPrice})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"TND proposé"})]})]})})}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bz,{type:a.serviceType,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:bA(a.serviceType)}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type de service"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(bC,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:"font-medium",children:[z," - ",A]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date & Heure"})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:(0,j.jsx)(aZ,{size:20,className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:u}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Localisation"})]})]})]})}),a.description&&(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4",children:[(0,j.jsx)("h3",{className:"font-medium mb-2",children:"Notes complémentaires"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})}),d&&(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-4",children:[(0,j.jsx)("h3",{className:"font-medium",children:"Contre-offre"}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(aH,{htmlFor:"price",children:"Prix (TND)"}),(0,j.jsx)(aE,{id:"price",type:"number",value:f,onChange:a=>g(a.target.value),min:10,onBlur:()=>{let b=Number.parseFloat(f);q(c=>({...c,price:Number.isNaN(b)?"Montant invalide":b<a.offeredPrice?"Pas en dessous du prix demandé":""}))},"aria-invalid":!!p.price}),p.price&&(0,j.jsxs)("p",{className:"flex items-center gap-1 text-xs text-destructive",children:[(0,j.jsx)(aT,{className:"w-3 h-3"}),p.price]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(aH,{htmlFor:"message",children:"Message (optionnel)"}),(0,j.jsx)(b_,{id:"message",placeholder:"Présente-toi au propriétaire...",value:h,onChange:a=>i(a.target.value),rows:3})]})]})})]}),(0,j.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[n?(0,j.jsx)("p",{className:"text-sm text-destructive",children:n}):null,d?(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>e(!1),disabled:l,children:"Annuler"}),(0,j.jsx)(aD,{className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:B,disabled:l,children:"Envoyer"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)(aD,{variant:"outline",className:"flex-1 bg-transparent",onClick:b,disabled:l,children:"Refuser"}),(0,j.jsxs)(aD,{className:"flex-1 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:C,disabled:l,children:["Accepter (",a.offeredPrice," TND)"]})]}),(0,j.jsxs)(aD,{variant:"ghost",className:"w-full",onClick:()=>e(!0),disabled:l,children:[(0,j.jsx)(bW,{size:18,className:"mr-2"}),"Faire une contre-offre"]})]})]})]})}var dz="Switch",[dA,dB]=be(dz),[dC,dD]=dA(dz),dE=k.forwardRef((a,b)=>{let{__scopeSwitch:c,name:d,checked:e,defaultChecked:f,required:g,disabled:h,value:i="on",onCheckedChange:l,form:m,...n}=a,[p,q]=k.useState(null),r=o(b,a=>q(a)),s=k.useRef(!1),t=!p||m||!!p.closest("form"),[u=!1,v]=b2({prop:e,defaultProp:f,onChange:l});return(0,j.jsxs)(dC,{scope:c,checked:u,disabled:h,children:[(0,j.jsx)(aF.button,{type:"button",role:"switch","aria-checked":u,"aria-required":g,"data-state":dI(u),"data-disabled":h?"":void 0,disabled:h,value:i,...n,ref:r,onClick:b1(a.onClick,a=>{v(a=>!a),t&&(s.current=a.isPropagationStopped(),s.current||a.stopPropagation())})}),t&&(0,j.jsx)(dH,{control:p,bubbles:!s.current,name:d,value:i,checked:u,required:g,disabled:h,form:m,style:{transform:"translateX(-100%)"}})]})});dE.displayName=dz;var dF="SwitchThumb",dG=k.forwardRef((a,b)=>{let{__scopeSwitch:c,...d}=a,e=dD(dF,c);return(0,j.jsx)(aF.span,{"data-state":dI(e.checked),"data-disabled":e.disabled?"":void 0,...d,ref:b})});dG.displayName=dF;var dH=a=>{let{control:b,checked:c,bubbles:d=!0,...e}=a,f=k.useRef(null),g=b4(c),h=b5(b);return k.useEffect(()=>{let a=f.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(g!==c&&b){let e=new Event("click",{bubbles:d});b.call(a,c),a.dispatchEvent(e)}},[g,c,d]),(0,j.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...e,tabIndex:-1,ref:f,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dI(a){return a?"checked":"unchecked"}let dJ=k.forwardRef(({className:a,...b},c)=>(0,j.jsx)(dE,{className:aB("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,j.jsx)(dG,{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})}));dJ.displayName=dE.displayName;let dK=aL("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),dL=aL("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function dM({user:a,onBack:b,onUpdateUser:c}){let{t:d}=(0,bB.useI18n)(),[e,f]=(0,k.useState)(a?.isAvailable??!0),[g,h]=(0,k.useState)(a?.bio||""),[i,l]=(0,k.useState)(a?.servicesOffered||[]),[m,n]=(0,k.useState)(a?.basePrice??""),[o,p]=(0,k.useState)(a?.city||""),[q,r]=(0,k.useState)(!1),[s,t]=(0,k.useState)(null),[u,v]=(0,k.useState)(null),[w,x]=(0,k.useState)([]);(0,k.useEffect)(()=>{(async()=>{try{let a=await cJ();if(v(a),f(!!(a.is_available??a.isAvailable)),h(a.bio||""),l(a.services||a.services_offered||a.servicesOffered||[]),n(a.base_price??a.basePrice??""),p(a.city||""),a.id){let b=await cK(a.id);x(Array.isArray(b)?b:[])}}catch(a){console.error("Failed to load profile",a),t("Impossible de charger le profil")}})()},[]);let y=async()=>{r(!0);try{let b=await cL({bio:g,is_available:e,services:i,base_price:""===m?void 0:m,city:o});c({isAvailable:b.is_available??b.isAvailable,bio:b.bio,servicesOffered:b.services||b.services_offered||b.servicesOffered,trustScore:b.trust_score??b.trustScore??a.trustScore,reviewCount:b.review_count??b.reviewCount??a.reviewCount,city:b.city??o})}catch(a){console.error("Failed to save profile",a)}finally{r(!1)}};return(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:b,className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsx)("div",{className:"flex-1",children:(0,j.jsx)("h1",{className:"font-semibold",children:"Mon profil"})}),(0,j.jsx)(aD,{variant:"ghost",size:"icon",onClick:y,disabled:q,children:(0,j.jsx)(dK,{size:18})})]}),(0,j.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,j.jsxs)("div",{className:"p-6 flex flex-col items-center text-center",children:[(0,j.jsxs)("div",{className:"relative mb-4",children:[(0,j.jsxs)(br,{className:"h-24 w-24",children:[(0,j.jsx)(bs,{src:a?.avatar||"/userAvatar.png"}),(0,j.jsx)(bt,{className:"text-2xl",children:a?.name?.[0]})]}),(0,j.jsx)("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground shadow-md",children:(0,j.jsx)(dL,{size:14})})]}),(0,j.jsx)("h2",{className:"text-xl font-semibold",children:a?.name}),(0,j.jsx)("p",{className:"text-muted-foreground mb-3",children:a?.email}),(0,j.jsx)(bV,{score:a?.trustScore??0,reviewCount:a?.reviewCount,size:"lg"}),s?(0,j.jsx)("p",{className:"text-sm text-destructive mt-2",children:s}):null]}),(0,j.jsxs)("div",{className:"px-4 space-y-4 pb-8",children:[(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:"Disponibilité"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:e?"Visible pour les propriétaires":"Vous ne recevrez pas de nouvelles demandes"})]}),(0,j.jsx)(dJ,{checked:e,onCheckedChange:a=>{f(a),c({isAvailable:a})}})]})}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4",children:[(0,j.jsx)("h3",{className:"font-medium mb-2",children:"À propos"}),(0,j.jsx)(b_,{value:g,onChange:a=>h(a.target.value),placeholder:"Parlez de votre expérience, ville, disponibilités...",rows:3})]})}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-3",children:[(0,j.jsx)("h3",{className:"font-medium mb-3",children:"Services proposés"}),(0,j.jsx)(aE,{value:i.join(", "),onChange:a=>l(a.target.value.split(",").map(a=>a.trim()).filter(Boolean)),placeholder:"Garde à domicile, Promenade, Taxi..."}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Tarif de base (TND)"}),(0,j.jsx)(aE,{type:"number",value:""===m?"":m,onChange:a=>n(""===a.target.value?"":Number(a.target.value)),placeholder:"Ex: 30"})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(aH,{children:"Ville"}),(0,j.jsx)(aE,{value:o,onChange:a=>p(a.target.value),placeholder:"Ex: Tunis"})]})]})]})}),(0,j.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 text-center",children:[(0,j.jsx)("p",{className:"text-2xl font-bold text-primary",children:a?.reviewCount||0}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:d("reviewsCount")})]})}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 text-center",children:[(0,j.jsx)("p",{className:"text-2xl font-bold text-primary",children:a?.trustScore?.toFixed(1)||"0.0"}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:d("avgRating")})]})}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 text-center",children:[(0,j.jsx)("p",{className:"text-2xl font-bold text-accent",children:u?.completed_count??"—"}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Terminées"})]})})]}),(0,j.jsx)(ba,{children:(0,j.jsxs)(bd,{className:"p-4 space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h3",{className:"font-semibold",children:"Avis"}),(0,j.jsxs)("span",{className:"text-xs text-muted-foreground",children:[w.length," avis"]})]}),0===w.length&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pas encore d'avis."}),w.map(a=>(0,j.jsxs)("div",{className:"border border-border rounded-xl p-3 space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("span",{className:"font-semibold text-sm",children:a.reviewer_name||"Client"}),(0,j.jsxs)("span",{className:"text-xs text-accent font-semibold",children:[a.rating??a.score," ★"]})]}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:a.comment||""}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:a.created_at?new Date(a.created_at).toLocaleDateString():""})]},a.id))]})})]})]})]})}function dN(a){return a*Math.PI/180}let dO=aL("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function dP({user:a,onLogout:b,onUpdateUser:c}){let{t:d}=(0,bB.useI18n)(),[e,f]=(0,k.useState)("home"),[g,h]=(0,k.useState)(null),[i,l]=(0,k.useState)(!1),[m,n]=(0,k.useState)(!1),[o,p]=(0,k.useState)({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),[q,r]=(0,k.useState)([]),[s,t]=(0,k.useState)([]),[u,v]=(0,k.useState)(null),[w,x]=(0,k.useState)(!1),[y,z]=(0,k.useState)(!1),[A,B]=(0,k.useState)(null),{coords:C,loading:D}=c$(),E=async()=>{z(!0),B(null);try{let[a,b]=await Promise.all([cE(),cT()]);t(b||[]);let c=new Set((b||[]).map(a=>String(a.requestId||a.request_id))),d=(a||[]).filter(a=>"open"===(a.status||"").toLowerCase()&&!c.has(String(a.id)));r(d)}catch(a){console.error("Failed to load open requests",a),B(d("errorLoading")||"Erreur de chargement"),r([])}finally{z(!1)}};(0,k.useEffect)(()=>{E()},[]);let F=(0,k.useMemo)(()=>q.filter(a=>{if(o.serviceTypes.length>0&&!o.serviceTypes.includes(a.serviceType)||a.offeredPrice<o.minPrice||a.offeredPrice>o.maxPrice||o.city&&!("string"==typeof a.location?a.location.toLowerCase():a.location?.address?.toLowerCase()||"").includes(o.city.toLowerCase()))return!1;if(C&&o.maxDistance>0){let c=cz(a.location);if(c){var b;let a,d,e,f,g,h,i;if(a=dN((b={lat:c.lat,lng:c.lng}).lat-C.lat),d=dN(b.lng-C.lng),e=dN(C.lat),f=dN(b.lat),2*Math.atan2(Math.sqrt(i=(g=Math.sin(a/2))*g+Math.cos(e)*Math.cos(f)*(h=Math.sin(d/2))*h),Math.sqrt(1-i))*6371>o.maxDistance)return!1}}return!0}),[q,o,C]),G=F.map(a=>{let b=cz(a.location);return b?{id:a.id,lat:b.lat,lng:b.lng,type:"request",label:a.petName}:null}).filter(Boolean),H=a=>{h(a),f("request-details")};return"request-details"===e&&g?(0,j.jsx)(dy,{request:g,onBack:()=>{f("home"),h(null)},onAccept:()=>{f("home"),h(null),E()}}):"profile"===e?(0,j.jsx)(dM,{user:a,onBack:()=>f("home"),onUpdateUser:c}):"bookings"===e?u?(0,j.jsx)(ds,{booking:u,onBack:()=>v(null),isSitter:!0}):(0,j.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border",children:[(0,j.jsx)("button",{onClick:()=>f("home"),className:"p-2 hover:bg-secondary rounded-lg",children:(0,j.jsx)(aP,{size:20})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h1",{className:"font-semibold",children:d("bookings")}),(0,j.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s.length," ",d("available")??"disponibles"]})]})]}),(0,j.jsxs)("div",{className:"p-4 space-y-3",children:[w&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chargement du détail..."}),s.map(a=>{let b="string"==typeof a.location?a.location:a.location?.address||d("unknownLocation")||"";return(0,j.jsxs)("button",{className:"w-full text-left p-4 rounded-xl border bg-card shadow-sm hover:shadow-md transition",onClick:async()=>{x(!0);try{let b=await cU(a.id);v(b)}catch(a){console.error("Failed to load booking",a)}finally{x(!1)}},children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,j.jsx)("div",{className:"font-semibold",children:a.petName||"Animal"}),(0,j.jsx)(bu,{status:a.status,size:"sm"})]}),(0,j.jsxs)("div",{className:"text-sm text-muted-foreground",children:[bA(a.serviceType)," · ",b]}),(0,j.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.dateStart?new Date(a.dateStart).toLocaleDateString():""," ",a.dateEnd?new Date(a.dateEnd).toLocaleDateString():""]}),(0,j.jsxs)("div",{className:"text-sm font-semibold mt-1",children:[a.price??a.agreedPrice??0," TND"]})]},a.id)}),0===s.length&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:d("noData")})]})]}):(0,j.jsxs)("div",{className:"h-screen w-full relative overflow-hidden",children:[(0,j.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-30 p-4 flex items-center justify-between",children:[(0,j.jsx)("button",{onClick:()=>l(!0),className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center",children:(0,j.jsx)(dw,{size:20})}),(0,j.jsxs)("div",{className:"bg-card px-4 py-2 rounded-full shadow-md flex items-center gap-2",children:[(0,j.jsx)("span",{className:`w-2 h-2 rounded-full ${a?.isAvailable?"bg-accent":"bg-muted-foreground"}`}),(0,j.jsx)("span",{className:"text-sm font-medium",children:a?.isAvailable?d("available"):d("unavailable")})]}),(0,j.jsxs)("button",{className:"w-10 h-10 bg-card rounded-full shadow-md flex items-center justify-center relative",children:[(0,j.jsx)(dv,{size:20}),(0,j.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-accent rounded-full"})]})]}),i&&(0,j.jsxs)("div",{className:"absolute inset-0 z-50 flex",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>l(!1)}),(0,j.jsxs)("div",{className:"relative w-72 bg-card h-full shadow-xl",children:[(0,j.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsx)("span",{className:"font-semibold",children:d("menu")}),(0,j.jsx)("button",{onClick:()=>l(!1),children:(0,j.jsx)(aR,{size:20})})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)(br,{className:"h-12 w-12",children:[(0,j.jsx)(bs,{src:a?.avatar||"/sitterAvatar.png"}),(0,j.jsx)(bt,{children:a?.name?.[0]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"font-medium",children:a?.name}),(0,j.jsxs)("p",{className:"text-sm text-accent",children:[d("trust"),": ",a?.trustScore?.toFixed?.(1)??"0.0"," · ",d("reviewsCount"),":"," ",a?.reviewCount??0]})]})]})]}),(0,j.jsxs)("div",{className:"p-4 space-y-2",children:[(0,j.jsxs)("button",{onClick:()=>{f("profile"),l(!1)},className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary flex items-center gap-3",children:[(0,j.jsx)(aN,{size:20}),"Mon profil"]}),(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",onClick:()=>{E(),f("bookings"),l(!1)},children:d("bookings")}),(0,j.jsx)("button",{className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary",children:d("settings")}),(0,j.jsx)("button",{onClick:b,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-secondary text-destructive",children:d("logout")})]})]})]}),(0,j.jsx)(a7,{apiKey:"AIzaSyCdD0YNDL2_yUU_DgVS1vUHoVCTTc-HLD8",center:C||{lat:36.8065,lng:10.1815},markers:G,showRadius:!!C,radiusKm:o.maxDistance,onMarkerClick:a=>{let b=F.find(b=>b.id===a);b&&H(b)}}),(0,j.jsx)(aD,{onClick:()=>n(!m),variant:"outline",className:"absolute top-20 right-4 z-30 bg-card shadow-md",size:"icon",children:(0,j.jsx)(dO,{size:18})}),m&&(0,j.jsxs)("div",{className:"absolute top-32 right-4 z-30 w-72 bg-card rounded-xl shadow-lg p-4 space-y-3",children:[(0,j.jsx)("h3",{className:"font-semibold mb-3",children:"Filtres"}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:d("serviceType")}),(0,j.jsx)("div",{className:"flex flex-wrap gap-2",children:[{type:"sitting",icon:bv,label:"Garde maison"},{type:"walking",icon:bw,label:"Promenade"},{type:"taxi",icon:bx,label:"Taxi"},{type:"emergency",icon:by,label:"Urgence"}].map(({type:a,icon:b,label:c})=>(0,j.jsxs)("button",{onClick:()=>{p(b=>({...b,serviceTypes:b.serviceTypes.includes(a)?b.serviceTypes.filter(b=>b!==a):[...b.serviceTypes,a]}))},className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1.5 transition-colors ${o.serviceTypes.includes(a)?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:[(0,j.jsx)(b,{size:12}),c]},a))})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:d("city")??"Ville"}),(0,j.jsx)("input",{className:"w-full rounded-md border bg-card p-2 text-sm",value:o.city,onChange:a=>p(b=>({...b,city:a.target.value})),placeholder:"Ex: Tunis, La Marsa"})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Min TND"}),(0,j.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:o.minPrice,onChange:a=>p(b=>({...b,minPrice:Number(a.target.value)||0}))})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Max TND"}),(0,j.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:o.maxPrice,onChange:a=>p(b=>({...b,maxPrice:Number(a.target.value)||b.maxPrice}))})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:d("distance")??"Distance (km)"}),(0,j.jsx)("input",{type:"number",className:"w-full rounded-md border bg-card p-2 text-sm",value:o.maxDistance,onChange:a=>p(b=>({...b,maxDistance:Number(a.target.value)||b.maxDistance}))})]}),(0,j.jsx)(aD,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>p({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),children:"Effacer"})]})]}),(0,j.jsxs)(a9,{defaultSnap:1,children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold",children:d("openRequests")}),(0,j.jsxs)("span",{className:"text-sm text-muted-foreground",children:[y?d("loading"):`${F.length} disponibles`,D?" ...":""]})]}),A&&(0,j.jsxs)("div",{className:"mb-3 text-sm text-destructive bg-destructive/10 rounded-md p-3",children:[A,(0,j.jsx)(aD,{variant:"link",size:"sm",className:"ml-2 px-0",onClick:()=>void E(),children:d("retry")??"Réessayer"})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[F.map(a=>(0,j.jsx)(bS,{request:a,onClick:()=>H(a)},a.id)),0===F.length&&(0,j.jsxs)("div",{className:"text-center py-8",children:[(0,j.jsx)("p",{className:"text-muted-foreground",children:d("noData")}),(0,j.jsxs)("div",{className:"flex justify-center gap-3 mt-2",children:[(0,j.jsx)(aD,{variant:"outline",size:"sm",onClick:()=>void E(),children:d("refresh")??"Actualiser"}),(0,j.jsx)(aD,{variant:"link",size:"sm",onClick:()=>p({serviceTypes:[],maxDistance:15,minPrice:0,maxPrice:1e3,city:""}),children:d("reset")??"Réinitialiser"})]})]})]})]})]})}async function dQ(a,b){try{let c=await cy("/auth/login",{method:"POST",body:JSON.stringify({email:a,password:b})}),d=await c.json();if(!d.access_token)throw Error("Login successful but no access_token returned by the backend.");return"undefined"!=typeof localStorage&&(d.access_token&&localStorage.setItem("access_token",d.access_token),d.role&&localStorage.setItem("role",d.role)),d}catch(a){throw a}}async function dR(a){let b=(a.role||"").toUpperCase();return await cy("/auth/register",{method:"POST",body:JSON.stringify({full_name:a.name,email:a.email,password:a.password,role:b,city:a.city||"Tunis"})}),{message:"verification_sent"}}async function dS(){return(await cy("/auth/me",{method:"GET"})).json()}function dT(){let[a,b]=(0,k.useState)(null),[c,d]=(0,k.useState)(!0),[e,f]=(0,k.useState)(null);(0,l.useRouter)(),(0,k.useEffect)(()=>{(async()=>{if(!("undefined"!=typeof localStorage?localStorage.getItem("access_token"):null))return d(!1);try{let a=await dS();b({id:String(a.id),name:a.name||a.full_name||"",email:a.email||"",role:"sitter"===(a.role||"owner").toLowerCase()?"sitter":"owner",avatar:a.avatar,trustScore:a.trust_score??a.avg_rating,reviewCount:a.review_count,location:"string"==typeof a.location?{lat:36.8065,lng:10.1815,address:a.location}:a.location})}catch(a){console.error("meApi failed",a),b(null)}finally{d(!1)}})()},[]);let g=async(a,c)=>{f(null);try{await dQ(a,c);let d=await dS();b({id:String(d.id),name:d.name||d.full_name||"",email:d.email||"",role:"sitter"===(d.role||"owner").toLowerCase()?"sitter":"owner",avatar:d.avatar,trustScore:d.trust_score??d.avg_rating,reviewCount:d.review_count,location:"string"==typeof d.location?{lat:36.8065,lng:10.1815,address:d.location}:d.location})}catch(a){console.error("login failed",a),f(a?.message||"Login failed"),b(null)}},h=async(a,c,d,e)=>{f(null);try{await dR({name:a,email:c,password:d,role:e});let f=await dS();b({id:String(f.id),name:f.name||f.full_name||"",email:f.email||"",role:"sitter"===(f.role||"owner").toLowerCase()?"sitter":"owner",avatar:f.avatar,trustScore:f.trust_score??f.avg_rating,reviewCount:f.review_count,location:"string"==typeof f.location?{lat:36.8065,lng:10.1815,address:f.location}:f.location})}catch(a){console.error("register failed",a),f(a?.message||"Register failed"),b(null)}},i=()=>b(null),m=a=>{b(b=>b?{...b,...a}:null)};return c?(0,j.jsxs)("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,j.jsx)("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:(0,j.jsx)(aM,{className:"w-7 h-7 text-primary-foreground"})}),(0,j.jsx)("span",{className:"text-2xl font-bold text-foreground",children:"PetCare"})]}),(0,j.jsx)(aQ,{className:"w-6 h-6 text-primary animate-spin"})]}):a?"sitter"===a.role?(0,j.jsx)(dP,{user:a,onLogout:i,onUpdateUser:m}):(0,j.jsx)(dx,{user:a,onLogout:i,onUpdateUser:m}):(0,j.jsx)(a2,{onLogin:g,onRegister:h,authError:e??void 0})}a.s(["default",()=>dT],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map